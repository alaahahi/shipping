import{r as n,u as ge,c as N,a as l,b as a,w as d,F,o as D,H as xe,i,d as e,t as c,e as L,g as te,n as be}from"./app.cb6f9c6b.js";import{_ as ye}from"./AuthenticatedLayout.9246acda.js";/* empty css                                              */import{M as we,_ as ke,a as $e,b as Ce,c as Be}from"./ModalDel.f63d57b3.js";import{_ as Ne,a as De,b as Ve,c as Ee,d as Ae,i as Me}from"./imags.0fedeece.js";import{_,a as m}from"./TextInput.b81f5b48.js";import{a as u}from"./index.3da26083.js";import{t as Se}from"./trash.3844cc4f.js";import{W as Ge}from"./v3-infinite-loading.es.28d9f4b9.js";import{d as Te}from"./debounce.b7d4f80e.js";/* empty css                                                         */import"./print.04fa5952.js";/* empty css                                                            */import"./Uploader.7a321cd3.js";/* empty css                                                                 */const je=e("h2",{class:"mb-5 dark:text-white text-center"}," \u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0627\u0644\u062D\u0630\u0641 \u061F ",-1),Ie=e("h2",{class:"mb-5 dark:text-white text-center"}," \u062A\u062D\u0645\u064A\u0644 \u0645\u0644\u0641\u0627\u062A ",-1),Ue=e("h3",{class:"text-center"},"\u0627\u0644\u0645\u062D\u0627\u0633\u0628\u0629",-1),ze=e("h3",{class:"text-center"},"\u0627\u062F\u062E\u0627\u0644 \u0645\u0635\u0627\u0631\u064A\u0641",-1),Re=e("h3",{class:"text-center"},"\u062A\u062D\u0648\u064A\u0644 \u0645\u0646 \u0627\u0644\u062F\u0648\u0644\u0627\u0631 \u0627\u0644\u0649 \u062F\u064A\u0646\u0627\u0631",-1),Fe=e("h3",{class:"text-center"},"\u062A\u062D\u0648\u064A\u0644 \u0645\u0646 \u0627\u0644\u062F\u064A\u0646\u0627\u0631 \u0627\u0644\u0649 \u062F\u0648\u0644\u0627\u0631",-1),Le={key:0},qe={id:"alert-2",class:"p-4 mb-4 bg-red-100 rounded-lg dark:bg-red-200 text-center",role:"alert"},He={class:"ml-3 font-medium text-red-700 dark:text-red-800"},Oe={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},Pe={class:"overflow-hidden shadow-sm sm:rounded-lg"},We={class:"border-b border-gray-200"},Ye={class:"mt-4 mb-4 grid grid-cols-1 gap-4 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-7"},Je={class:"flex items-start rounded-xl dark:bg-gray-600 dark:text-gray-300 bg-white p-4 shadow-lg"},Ke=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full border border-orange-100 bg-orange-50"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-orange-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1),Qe={class:"mr-4"},Xe=e("h2",{class:"font-semibold"},"\u062C\u0645\u064A\u0639 \u0627\u0644\u0639\u0642\u0648\u062F",-1),Ze={class:"mt-2 text-sm text-gray-500 dark:text-gray-200"},et={class:"flex items-start rounded-xl dark:bg-gray-600 dark:text-gray-300 bg-white p-4 shadow-lg"},tt=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full border border-orange-100 bg-orange-50"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-orange-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1),st={class:"mr-4"},ot=e("h2",{class:"font-semibold"},"\u0627\u0644\u0639\u0642\u0648\u062F \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631",-1),at={class:"mt-2 text-sm text-gray-500 dark:text-gray-200"},lt={class:"flex items-start rounded-xl dark:bg-gray-600 dark:text-gray-300 bg-white p-4 shadow-lg"},nt=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full border border-red-100 bg-red-50"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1),rt={class:"mr-4"},dt=e("h2",{class:"font-semibold"},"\u062F\u064A\u0646 \u0627\u0644\u0639\u0642\u0648\u062F \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631",-1),it={class:"mt-2 text-sm text-gray-500 dark:text-gray-200"},ct={class:"flex items-start rounded-xl dark:bg-gray-600 dark:text-gray-300 bg-white p-4 shadow-lg"},ut=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full border border-red-100 bg-red-50"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1),pt={class:"mr-4"},_t=e("h2",{class:"font-semibold"},"\u0627\u0644\u0639\u0642\u0648\u062F \u0628\u0627\u0644\u062F\u064A\u0646\u0627\u0631",-1),mt={class:"mt-2 text-sm text-gray-500 dark:text-gray-200"},ht={class:"flex items-start rounded-xl dark:bg-gray-600 dark:text-gray-300 bg-white p-4 shadow-lg"},ft=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full border border-red-100 bg-red-50"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1),vt={class:"mr-4"},gt=e("h2",{class:"font-semibold"},"\u062F\u064A\u0646 \u0627\u0644\u0639\u0642\u0648\u062F \u0628\u0627\u0644\u062F\u064A\u0646\u0627\u0631",-1),xt={class:"mt-2 text-sm text-gray-500 dark:text-gray-200"};const bt={class:"grid grid-cols-2 md:grid-cols-5 lg:grid-cols-5 gap-3 lg:gap-3"},yt={class:"px-4"},wt={class:"px-4"},kt={class:"px-4"},$t={class:"relative w-full"},Ct={class:"grid grid-cols-2 md:grid-cols-5 lg:grid-cols-5 gap-3 lg:gap-3 pt-3"},Bt={class:"px-4"},Nt={class:"px-4"},Dt={class:"px-4"},Vt={class:"overflow-x-auto shadow-md mt-5"},Et={class:"w-full text-right text-gray-500 dark:text-gray-400 text-center"},At=e("thead",{class:"text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},[e("tr",{class:"rounded-l-lg mb-2 sm:mb-0"},[e("th",{className:"px-2 py-2",style:{width:"100px"}},"\u0631\u0642\u0645 \u0627\u0644\u0648\u0635\u0644"),e("th",{className:"px-2 py-2",style:{width:"180px"}},"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),e("th",{className:"px-2 py-2"},"\u0627\u0644\u0648\u0635\u0641"),e("th",{className:"px-2 py-2"},"\u0627\u0644\u0645\u0628\u0644\u063A"),e("th",{className:"px-2 py-2",style:{width:"100px"}},"\u062A\u0646\u0641\u064A\u0630"),e("th",{scope:"col",class:"px-1 py-2 text-base print:hidden",style:{width:"100px"}}," \u062A\u062E\u0632\u064A\u0646 ")])],-1),Mt={className:"border dark:border-gray-800 text-center px-2 py-1"},St={className:"border dark:border-gray-800 text-center px-2 py-1"},Gt={className:"border dark:border-gray-800 text-center px-2 py-1"},Tt={className:"border dark:border-gray-800 text-center px-2 py-1"},jt={className:"border dark:border-gray-800 text-center px-2 py-1"},It=["onClick"],Ut=["onClick"],zt=["href"],Rt=["src"],Ft={class:"spaner"},us={__name:"account",props:{url:String,users:Array,accounts:Array,boxes:Array},setup(v){const p=n({});n("");let b=n(!1),V=n(!1),y=n(!1),w=n(!1),k=n(!1),$=n(!1),E=n(!1),G=n(!1),C=n(!1),A=n(!1),M=n([]),B=n(0),T=n({}),I=n({}),U=n({}),Lt=n(!1),se=n(K()),oe=n(K()),q=n(0),H=n(0),O=n(0),P=n(0),W=n(0),z=n(!1),R=1,S="",Y=n([]);const g=()=>{R=0,M.value.length=0,z.value=!z.value},ae=Te(g,500),le=async o=>{try{const r=(await u.get("/getIndexAccounting",{params:{limit:100,page:R,q:S,from:se.value,to:oe.value}})).data;r.transactions.data.length<100?(M.value.push(...r.transactions.data),o.complete()):(M.value.push(...r.transactions.data),o.loaded()),p.value=r,R++}catch(t){console.log(t)}};(async()=>{u.get("/api/totalInfoContract").then(o=>{q.value=o.data.contract,H.value=o.data.sum_contract,O.value=o.data.sum_contract_debit,P.value=o.data.sum_contract_dinar,W.value=o.data.sum_contract_debit_dinar}).catch(o=>{console.error(o)})})();function Ht(){b.value=!0}function Ot(){y.value=!0}function Pt(){k.value=!0}function Wt(){$.value=!0}function ne(o){T.value=o,C.value=!0}function re(o){T.value=o,A.value=!0}ge(),n(!1);const h=n(0);function de(o){u.post("/api/receiptArrived",o).then(t=>{b.value=!1,window.location.reload()}).catch(t=>{h.value=t.response.data.errors})}function J(o){u.post("/api/salesDebt",o).then(t=>{g(),V.value=!1,y.value=!1,window.location.reload()}).catch(t=>{h.value=t.response.data.errors})}function ie(o){u.post("/api/convertDollarDinar",o).then(t=>{g(),k.value=!1}).catch(t=>{h.value=t.response.data.errors})}function ce(o){u.post("/api/convertDinarDollar",o).then(t=>{g(),$.value=!1}).catch(t=>{h.value=t.response.data.errors})}function K(){const o=new Date,t=o.getFullYear(),r=String(o.getMonth()+1).padStart(2,"0"),x=String(o.getDate()).padStart(2,"0");return`${t}-${r}-${x}`}function ue(o){u.post(`/api/delTransactions?id=${o.id}`).then(t=>{g(),C.value=!1}).catch(t=>{h.value=t.response.data.errors})}function Yt(o){B.value=o,pe(),w.value=!0}function pe(){u.get(`/api/getGenExpenses?expenses_type_id=${B.value}`).then(o=>{U.value=o.data}).catch(o=>{h.value=o.response.data.errors})}function Q(o){var t,r,x;u.post(`/api/GenExpenses?amount=${(t=o.amount)!=null?t:0}&expenses_type_id=${B.value}&factor=${(r=o.factor)!=null?r:1}&note=${(x=o.note)!=null?x:""}`).then(f=>{g(),w.value=!1,console.log(f.data),window.open(`/api/getIndexAccountsSelas?user_id=${f.data.morphed_id}&print=3&transactions_id=${f.data.id}`,"_blank"),window.location.reload()}).catch(f=>{h.value=f.response.data.errors})}function _e(o){var t,r;u.post(`/api/addTransfers?amount=${(t=o.amount)!=null?t:0}&sender_note=${(r=o.note)!=null?r:""}`).then(x=>{window.location.reload(),E.value=!1}).catch(x=>{h.value=x.response.data.errors})}function me(o){return`/public/uploadsResized/${o}`}function he(o){return`/public/uploads/${o}`}function fe(){g()}return(o,t)=>(D(),N(F,null,[l(a(xe),{title:"Dashboard"}),l(ye,null,{header:d(()=>[]),default:d(()=>{var f,X,Z,ee;return[l(we,{show:!!a(C),formData:a(T),onA:t[0]||(t[0]=s=>ue(s)),onClose:t[1]||(t[1]=s=>i(C)?C.value=!1:C=!1)},{header:d(()=>[je]),_:1},8,["show","formData"]),l(Ne,{show:!!a(A),formData:a(T),onA:t[2]||(t[2]=s=>fe(s)),onClose:t[3]||(t[3]=s=>i(A)?A.value=!1:A=!1)},{header:d(()=>[Ie]),_:1},8,["show","formData"]),l(De,{formData:a(I),show:!!a(w),expenses_type_id:a(B),GenExpenses:a(U),onA:t[4]||(t[4]=s=>Q(s)),onClose:t[5]||(t[5]=s=>i(w)?w.value=!1:w=!1)},{header:d(()=>[]),_:1},8,["formData","show","expenses_type_id","GenExpenses"]),l(Ve,{formData:a(I),show:!!a(E),expenses_type_id:a(B),allTransfers:a(Y),onA:t[6]||(t[6]=s=>_e(s)),onClose:t[7]||(t[7]=s=>i(E)?E.value=!1:E=!1)},{header:d(()=>[]),_:1},8,["formData","show","expenses_type_id","allTransfers"]),l(Ee,{formData:a(I),show:!!a(G),expenses_type_id:a(B),GenExpenses:a(U),allTransfers:a(Y),onA:t[8]||(t[8]=s=>Q(s)),onClose:t[9]||(t[9]=s=>i(G)?G.value=!1:G=!1)},{header:d(()=>[]),_:1},8,["formData","show","expenses_type_id","GenExpenses","allTransfers"]),l(ke,{show:!!a(b),data:v.users,accounts:v.accounts,onA:t[10]||(t[10]=s=>de(s)),onClose:t[11]||(t[11]=s=>i(b)?b.value=!1:b=!1)},{header:d(()=>[Ue]),_:1},8,["show","data","accounts"]),l($e,{show:!!a(V),data:v.users,accounts:v.accounts,onA:t[12]||(t[12]=s=>J(s)),onClose:t[13]||(t[13]=s=>i(V)?V.value=!1:V=!1)},{header:d(()=>[]),_:1},8,["show","data","accounts"]),l(Ae,{show:!!a(y),boxes:v.boxes,onA:t[14]||(t[14]=s=>J(s)),onClose:t[15]||(t[15]=s=>i(y)?y.value=!1:y=!1)},{header:d(()=>[ze]),_:1},8,["show","boxes"]),l(Ce,{show:!!a(k),boxes:v.boxes,onA:t[16]||(t[16]=s=>ie(s)),onClose:t[17]||(t[17]=s=>i(k)?k.value=!1:k=!1)},{header:d(()=>[Re]),_:1},8,["show","boxes"]),l(Be,{show:!!a($),boxes:v.boxes,onA:t[18]||(t[18]=s=>ce(s)),onClose:t[19]||(t[19]=s=>i($)?$.value=!1:$=!1)},{header:d(()=>[Fe]),_:1},8,["show","boxes"]),o.$page.props.success?(D(),N("div",Le,[e("div",qe,[e("div",He,c(o.$page.props.success),1)])])):L("",!0),e("div",null,[e("div",Oe,[e("div",Pe,[e("div",We,[e("div",Ye,[e("div",Je,[Ke,e("div",Qe,[Xe,e("p",Ze,c(a(q)),1)])]),e("div",et,[tt,e("div",st,[ot,e("p",at,c(a(H)),1)])]),e("div",lt,[nt,e("div",rt,[dt,e("p",it,c(a(O)),1)])]),e("div",ct,[ut,e("div",pt,[_t,e("p",mt,c(a(P)),1)])]),e("div",ht,[ft,e("div",vt,[gt,e("p",xt,c(a(W)),1)])])]),L("",!0),L("",!0),e("div",bt,[e("div",yt,[e("div",null,[l(_,{for:"to",value:"\u062D\u0633\u0627\u0628 \u0627\u0644\u0635\u0646\u062F\u0648\u0642 \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631"}),l(m,{id:"to",type:"number",disabled:"",class:"mt-1 block w-full",value:p.value.sum_transactions},null,8,["value"])])]),e("div",wt,[e("div",null,[l(_,{for:"to",value:"\u0645\u0633\u062D\u0648\u0628\u0627\u062A \u0627\u0644\u0635\u0646\u062F\u0648\u0642 \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631"}),l(m,{id:"to",type:"number",disabled:"",class:"mt-1 block w-full",value:p.value.sum_transactions_debit},null,8,["value"])])]),e("div",kt,[e("div",null,[l(_,{for:"to",value:"\u062F\u062E\u0644 \u0627\u0644\u0635\u0646\u062F\u0648\u0642 \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631"}),l(m,{id:"to",type:"number",disabled:"",class:"mt-1 block w-full",value:p.value.sum_transactions_in},null,8,["value"])])]),e("div",null,[l(_,{for:"to",value:"\u0631\u0635\u064A\u062F \u0627\u0644\u0635\u0646\u062F\u0648\u0642 \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631"}),l(m,{id:"to",type:"number",disabled:"",class:"mt-1 block w-full",value:(X=(f=p.value)==null?void 0:f.user)==null?void 0:X.wallet.balance},null,8,["value"])]),e("div",$t,[l(_,{for:"to",value:"\u0628\u062D\u062B \u0631\u0642\u0645 \u0627\u0644\u0648\u0635\u0644 \u0627\u0648 \u0627\u0644\u0648\u0635\u0641"}),l(m,{id:"q",type:"text",class:"mt-1 block w-full",modelValue:a(S),"onUpdate:modelValue":t[31]||(t[31]=s=>i(S)?S.value=s:S=s),onInput:a(ae)},null,8,["modelValue","onInput"])])]),e("div",Ct,[e("div",Bt,[e("div",null,[l(_,{for:"to",value:"\u062D\u0633\u0627\u0628 \u0627\u0644\u0635\u0646\u062F\u0648\u0642 \u0628\u0627\u0644\u062F\u064A\u0646\u0627\u0631 \u0627\u0644\u0639\u0631\u0627\u0642\u064A"}),l(m,{id:"to",type:"number",disabled:"",class:"mt-1 block w-full",value:p.value.sum_transactions_dinar},null,8,["value"])])]),e("div",Nt,[e("div",null,[l(_,{for:"to",value:"\u0645\u0633\u062D\u0648\u0628\u0627\u062A \u0627\u0644\u0635\u0646\u062F\u0648\u0642 \u0628\u0627\u0644\u062F\u064A\u0646\u0627\u0631 \u0627\u0644\u0639\u0631\u0627\u0642\u064A"}),l(m,{id:"to",type:"number",disabled:"",class:"mt-1 block w-full",value:p.value.sum_transactions_debit_dinar},null,8,["value"])])]),e("div",Dt,[e("div",null,[l(_,{for:"to",value:"\u062F\u062E\u0644 \u0627\u0644\u0635\u0646\u062F\u0648\u0642 \u0628\u0627\u0644\u062F\u064A\u0646\u0627\u0631 \u0627\u0644\u0639\u0631\u0627\u0642\u064A"}),l(m,{id:"to",type:"number",disabled:"",class:"mt-1 block w-full",value:p.value.sum_transactions_in_dinar},null,8,["value"])])]),e("div",null,[l(_,{for:"to",value:"\u0631\u0635\u064A\u062F \u0627\u0644\u0635\u0646\u062F\u0648\u0642 \u0628\u0627\u0644\u062F\u064A\u0646\u0627\u0631 \u0627\u0644\u0639\u0631\u0627\u0642\u064A"}),l(m,{id:"to",type:"number",disabled:"",class:"mt-1 block w-full",value:(ee=(Z=p.value)==null?void 0:Z.user)==null?void 0:ee.wallet.balance_dinar},null,8,["value"])])]),e("div",Vt,[e("table",Et,[At,e("tbody",null,[(D(!0),N(F,null,te(a(M),s=>(D(),N("tr",{key:s.id,class:be([{"bg-red-100 dark:bg-red-900":s.type==="out"||s.type==="outUser"||s.type==="debt","bg-green-100 dark:bg-green-900":s.type==="in"||s.type==="inUser"},"bg-white border-b dark:bg-gray-900 dark:border-gray-900 hover:bg-gray-50 dark:hover:bg-gray-600"])},[e("td",Mt,c(s.id),1),e("td",St,c(s==null?void 0:s.created_at.slice(0,19).replace("T","  ")),1),e("th",Gt,c(s.description),1),e("td",Tt,c(s.amount+" "+s.currency),1),e("td",jt,[e("button",{class:"px-1 py-1 text-white bg-rose-500 rounded-md focus:outline-none",onClick:j=>ne(s)},[l(Se)],8,It),e("button",{class:"px-1 mx-2 py-1 text-white bg-purple-600 rounded-md focus:outline-none",onClick:j=>re(s)},[l(Me)],8,Ut)]),e("td",null,[(D(!0),N(F,null,te(s.transactions_images,(j,ve)=>(D(),N("a",{key:ve,href:he(j.name),style:{cursor:"pointer"},target:"_blank"},[e("img",{src:me(j.name),alt:"",class:"px-1",style:{"max-width":"80px","max-height":"50px",display:"inline"}},null,8,Rt)],8,zt))),128))])],2))),128))])])]),e("div",Ft,[l(a(Ge),{transactions:a(M),onInfinite:le,identifier:a(z)},null,8,["transactions","identifier"])])])])])])]}),_:1})],64))}};export{us as default};
