import{r as b,D as j,o as n,c as H,w as M,a as i,b as e,d as O,j as u,k as c,m as $,h as m,t as o,T as G,z as L,u as W,F as D,H as Y,e as F,v as J,g as K,f as U,n as P}from"./app.c3323736.js";import{a as Q}from"./AuthenticatedLayout.efd49a37.js";import"./vue-tailwind-datepicker.ab3cd77c.js";import{a as w}from"./index.1aca0a15.js";import{U as X}from"./Uploader.0314b9c5.js";import{q}from"./VueSearchSelect.b172ae44.js";import{s as Z}from"./show.537926b3.js";import{p as ee}from"./pay.9c3516c4.js";import{n as te,e as oe}from"./new.94dac5e0.js";import{d as se,W as ae}from"./debounce.46b61629.js";const re={key:0,class:"modal-mask"},de={class:"modal-wrapper max-h-[80vh]"},le={class:"modal-container dark:bg-gray-900 overflow-auto max-h-[80vh]"},ne={class:"modal-header"},ie={class:"text-center dark:text-gray-200"},ce={class:"modal-body"},pe={key:0,class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},ue={class:"mb-4 mx-1"},ge=e("label",{class:"dark:text-gray-200",for:"color_id"}," \u0635\u0627\u062D\u0628 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 ",-1),me={class:"relative"},he={class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},be={class:"mb-4 mx-1"},ye=e("label",{class:"dark:text-gray-200",for:"color_id"}," \u0627\u062E\u062A\u0631 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 ",-1),xe={class:"relative"},_e={key:1,class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2 mt-5"},ve=["disabled"],fe={key:2,class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},ke={class:"mb-4"},$e=e("label",{class:"form-label"},"\u0627\u0644\u0635\u0648\u0631",-1),we={class:"mt-3"},Ce={key:0,class:"text-danger"},De={class:"modal-footer my-2"},Me={class:"flex flex-row m-auto"},Ie={__name:"ModalAddCarExpensesFav",props:{show:Boolean,formData:Object,client:Array,saveCar:Boolean},setup(l){function y(){const a=new Date,r=a.getFullYear(),p=String(a.getMonth()+1).padStart(2,"0"),g=String(a.getDate()).padStart(2,"0");return`${r}-${p}-${g}`}let x=b(0);b(!0);let f=b([]);j(x,(a,r)=>{w.get("/api/getIndexCar",{params:{limit:1e3,user_id:a}}).then(p=>{f.value=p.data}).catch(p=>{console.error(p)})});function _(a){w.get("/api/carsAnnualImageDel?name="+a.name).then(r=>{toast.success("\u062A\u0645  \u062D\u0630\u0641 \u0627\u0644\u0635\u0648\u0631\u0629 \u0628\u0646\u062C\u0627\u062D",{timeout:5e3,position:"bottom-right",rtl:!0})}).catch(r=>{console.error(r)})}return(a,r)=>(n(),H(G,{name:"modal"},{default:M(()=>{var p,g,v;return[l.show?(n(),i("div",re,[e("div",de,[e("div",le,[e("div",ne,[O(a.$slots,"header",{},()=>[e("h2",ie,o(a.$t("add_car")),1)])]),e("div",ce,[l.formData.id?m("",!0):(n(),i("div",pe,[e("div",ue,[ge,e("div",me,[u(c(q),{optionValue:"id",optionText:"name",modelValue:c(x),"onUpdate:modelValue":r[0]||(r[0]=h=>$(x)?x.value=h:x=h),list:l.client,placeholder:"\u062A\u062D\u062F\u064A\u062F \u0635\u0627\u062D\u0628 \u0627\u0644\u0633\u064A\u0627\u0631\u0629"},null,8,["modelValue","list"])])])])),e("div",he,[e("div",be,[ye,e("div",xe,[u(c(q),{optionValue:"id",optionText:"car_type",modelValue:l.formData.carId,"onUpdate:modelValue":r[1]||(r[1]=h=>l.formData.carId=h),list:c(f),placeholder:" \u0627\u062E\u062A\u0631 \u0627\u0644\u0633\u064A\u0627\u0631\u0629"},null,8,["modelValue","list"])])])]),l.saveCar?m("",!0):(n(),i("div",_e,[e("button",{class:"modal-default-button py-3 bg-blue-500 rounded col-6",onClick:r[2]||(r[2]=h=>{l.formData.date=l.formData.date?l.formData.date:y(),a.$emit("a",l.formData)}),disabled:!l.formData.client_id&&!l.formData.client_name}," \u0625\u0636\u0627\u0641\u0629 \u0648\u0645\u062A\u0627\u0628\u0639\u0629 ",8,ve)])),l.saveCar?(n(),i("div",fe,[e("div",ke,[$e,e("div",we,[u(c(X),{server:"/api/carsAnnualUpload?carId="+l.saveCar,"is-invalid":!!((p=a.errors)!=null&&p.media),onChange:a.changeMedia,location:"/storage/posts/media",onInit:a.initMedia,onAdd:a.addMedia,onRemove:_},null,8,["server","is-invalid","onChange","onInit","onAdd"])]),(g=a.errors)!=null&&g.media?(n(),i("p",Ce,o((v=a.errors)==null?void 0:v.media[0]),1)):m("",!0)])])):m("",!0)]),e("div",De,[e("div",Me,[e("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6",onClick:r[3]||(r[3]=h=>{a.$emit("close"),l.formData=""})}," \u0625\u063A\u0644\u0627\u0642 ")])])])])])):m("",!0)]}),_:3}))}},Ne={key:0,class:"py-2"},Ae={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},Ve={class:"bg-white overflow-hidden shadow-sm"},Se={class:"p-6 dark:bg-gray-900"},Ee={class:"flex flex-col"},Te={class:"grid grid-cols-2 md:grid-cols-5 lg:grid-cols-5 gap-2 lg:gap-1"},Be={class:"flex items-center max-w-5xl"},Fe=e("label",{class:"dark:text-gray-200",for:"simple-search"},null,-1),Ue={class:"relative w-full"},qe=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-200 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),ze={class:"text-center"},Re={value:"0",disabled:""},je={value:""},He=["value"],Oe=e("div",null,null,-1),Ge={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},Le={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},We={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},Ye={scope:"col",class:"px-1 py-3 text-base"},Je={scope:"col",class:"px-1 py-3 text-base"},Ke={scope:"col",class:"px-1 py-3 text-base"},Pe={scope:"col",class:"px-1 py-3 text-base"},Qe={scope:"col",class:"px-1 py-3 text-base"},Xe={scope:"col",class:"px-1 py-3 text-base"},Ze={scope:"col",class:"px-1 py-3 text-base"},et={scope:"col",class:"px-1 py-3 text-base"},tt=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0645\u062F\u0641\u0648\u0639 \u062F\u0648\u0644\u0627\u0631 ",-1),ot=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0645\u062F\u0641\u0648\u0639 \u062F\u064A\u0646\u0627\u0631 ",-1),st={scope:"col",class:"px-1 py-3 text-base"},at={scope:"col",class:"px-1 py-3 text-base",style:{width:"150px"}},rt={className:"border dark:border-gray-800 text-center px-2 py-2 "},dt={className:"border dark:border-gray-800 text-center px-2 py-2 "},lt={className:"border dark:border-gray-800 text-center px-2 py-2 "},nt={className:"border dark:border-gray-800 text-center px-2 py-2 "},it={className:"border dark:border-gray-800 text-center px-2 py-2 "},ct={className:"border dark:border-gray-800 text-center px-2 py-2 "},pt={className:"border dark:border-gray-800 text-center px-2 py-2 "},ut={className:"border dark:border-gray-800 text-center px-2 py-2 "},gt={className:"border dark:border-gray-800 text-center px-2 py-2 "},mt={className:"border dark:border-gray-800 text-center px-2 py-2 "},ht={className:"border dark:border-gray-800 text-center px-2 py-2 "},bt={className:"border dark:border-gray-800 text-start px-2 py-2"},yt=["onClick"],xt=["onClick"],_t=["onClick"],vt=["onClick"],ft={class:"spaner"},kt=e("div",null,null,-1),Et={__name:"index",props:{client:Array},setup(l){L(),W(),b("");let y=b(!1);function x(s={}){y.value=!0}const f=b({});b({});const _=b([]);let a=b(!1),r=0,p=1,g="";const v=()=>{p=0,_.value.length=0,a.value=!a.value},h=se(v,500),z=async s=>{try{const t=(await w.get("/getIndexCar",{params:{limit:100,page:p,q:g,user_id:r}})).data;t.data.length<100?(_.value.push(...t.data),s.complete()):(_.value.push(...t.data),s.loaded()),p++}catch(d){console.log(d)}};function R(s){w.post("/api/addCars",s).then(d=>{showModalCar.value=!1,v(),getcountTotalInfo()}).catch(d=>{console.error(d)})}return(s,d)=>(n(),i(D,null,[u(c(Y),{title:"Dashboard"}),u(Ie,{formData:f.value,show:!!c(y),client:l.client,onA:d[0]||(d[0]=t=>R(t)),onClose:d[1]||(d[1]=t=>$(y)?y.value=!1:y=!1)},{header:M(()=>[]),_:1},8,["formData","show","client"]),u(Q,null,{default:M(()=>[s.$page.props.auth.user.type_id==1||s.$page.props.auth.user.type_id==6?(n(),i("div",Ne,[e("div",Ae,[e("div",Ve,[e("div",Se,[e("div",Ee,[e("div",Te,[e("div",null,[e("form",Be,[Fe,e("div",Ue,[qe,F(e("input",{"onUpdate:modelValue":d[2]||(d[2]=t=>$(g)?g.value=t:g=t),onInput:d[3]||(d[3]=(...t)=>c(h)&&c(h)(...t)),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"\u0628\u062D\u062B",required:""},null,544),[[J,c(g)]])])])]),e("div",ze,[e("button",{type:"button",onClick:d[4]||(d[4]=t=>x()),style:{"min-width":"150px"},className:"px-6 mb-12 mx-2 py-2 font-bold text-white bg-green-500 rounded"},o(s.$t("addCar")),1)]),e("div",null,[F(e("select",{onChange:d[5]||(d[5]=t=>v()),"onUpdate:modelValue":d[6]||(d[6]=t=>$(r)?r.value=t:r=t),id:"default",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 mb-6 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500"},[e("option",Re,o(s.$t("selectCustomer")),1),e("option",je,o(s.$t("allOwners")),1),(n(!0),i(D,null,U(l.client,(t,k)=>(n(),i("option",{key:k,value:t.id},o(t.name),9,He))),128))],544),[[K,c(r)]])])]),e("div",null,[Oe,e("div",Ge,[e("table",Le,[e("thead",We,[e("tr",null,[e("th",Ye,o(s.$t("no")),1),e("th",Je,o(s.$t("car_owner")),1),e("th",Ke,o(s.$t("car_type")),1),e("th",Pe,o(s.$t("year")),1),e("th",Qe,o(s.$t("color")),1),e("th",Xe,o(s.$t("vin")),1),e("th",Ze,o(s.$t("car_number")),1),e("th",et,o(s.$t("date")),1),tt,ot,e("th",st,o(s.$t("note")),1),e("th",at,o(s.$t("execute")),1)])]),e("tbody",null,[(n(!0),i(D,null,U(_.value,t=>{var k,I,N,A,V,S,E,T,B;return n(),i("tr",{key:t.id,class:P([t.results==0?"":t.results==1?"bg-red-100 dark:bg-red-900":"bg-green-100 dark:bg-green-900","bg-white border-b dark:bg-gray-900 dark:border-gray-900 hover:bg-gray-50 dark:hover:bg-gray-600"])},[e("td",rt,o(t.no),1),e("td",dt,o((k=t.client)==null?void 0:k.name),1),e("td",lt,o(t.car_type),1),e("td",nt,o(t.year),1),e("td",it,o(t.car_color),1),e("td",ct,o(t.vin),1),e("td",pt,o(t.car_number),1),e("td",ut,o((I=t.contract)==null?void 0:I.created),1),e("td",gt,o(((N=t.contract)==null?void 0:N.paid)||0),1),e("td",mt,o(((A=t.contract)==null?void 0:A.paid_dinar)||0),1),e("td",ht,o((V=t.contract)==null?void 0:V.note),1),e("td",bt,[((S=t.contract)==null?void 0:S.price)!=((E=t.contract)==null?void 0:E.paid)||((T=t.contract)==null?void 0:T.price_dinar)!=((B=t.contract)==null?void 0:B.paid_dinar)?(n(),i("button",{key:0,tabIndex:"1",class:"px-2 py-1 text-white mx-1 bg-pink-500 rounded",onClick:C=>s.openModalEditCarContracts(t)},[u(ee)],8,yt)):m("",!0),t.contract?m("",!0):(n(),i("button",{key:1,tabIndex:"1",class:"px-2 py-1 text-white mx-1 bg-yellow-500 rounded",onClick:C=>s.openModalAddCarContracts(t)},[u(te)],8,xt)),t.is_exit?m("",!0):(n(),i("button",{key:2,tabIndex:"1",class:"px-2 py-1 text-white mx-1 bg-red-500 rounded",onClick:C=>s.openModalAddExitCar(t)},[u(oe)],8,_t)),t.is_exit?(n(),i("button",{key:3,tabIndex:"1",class:"px-2 py-1 text-white mx-1 bg-green-500 rounded",onClick:C=>s.openModalShowExitCar(t)},[u(Z)],8,vt)):m("",!0)])],2)}),128))])])]),e("div",ft,[u(c(ae),{car:_.value,onInfinite:z,identifier:c(a)},null,8,["car","identifier"])])])])])])])])):m("",!0),kt]),_:1})],64))}};export{Et as default};
