import{x as U,y as q,r as n,a as i,g as a,j as l,w as y,k as x,F as I,o as c,H as z,b as e,e as O,v as R,l as E,t as r,h as H,n as Y,L as G,i as P,N as W}from"./app.50b99c50.js";import{_ as J}from"./AuthenticatedLayout.d437cafa.js";import{_ as S}from"./TextInput.3332a1a8.js";import{p as K}from"./print.a5c9b972.js";import{t as Q}from"./trash.2944136d.js";import{e as X}from"./edit.6e52a512.js";import{M as Z}from"./ModalDelCar.83d0e293.js";import{_ as ee}from"./ModalEditCar_S.0cb66358.js";import{W as te}from"./v3-infinite-loading.es.681153ea.js";import{d as se}from"./debounce.c3c02a9e.js";import{a as w}from"./index.9ce3d550.js";/* empty css                                                    */import"./Uploader.be3711bd.js";/* empty css                                                                 */const oe=e("h2",{class:"my-5 dark:text-white text-center"}," \u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u0639\u0642\u062F \u061F ",-1),re={key:0,class:"py-2"},ae={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},le={class:"bg-white overflow-hidden shadow-sm"},de={class:"p-6 dark:bg-gray-900"},ne={class:"flex flex-col"},ie={class:"grid grid-cols-2 md:grid-cols-5 lg:grid-cols-5 gap-2 lg:gap-1"},ce={class:"flex items-center max-w-5xl mt-1"},pe=e("label",{class:"dark:text-gray-200",for:"simple-search"},null,-1),ue={class:"relative w-full"},_e=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-200 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),he={class:"px-4"},ge={class:"px-4"},me={className:" mr-5 print:hidden"},xe={key:0},be={key:1},ye={className:" mr-5 print:hidden"},fe=["href"],ve={key:0},ke={key:1},we=e("div",null,null,-1),Ce={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},$e={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},De={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},Ne={scope:"col",class:"px-1 py-3 text-base"},Me={scope:"col",class:"px-1 py-3 text-base"},Ie={scope:"col",class:"px-1 py-3 text-base"},Se={scope:"col",class:"px-1 py-3 text-base"},Ve={scope:"col",class:"px-1 py-3 text-base"},Le={scope:"col",class:"px-1 py-3 text-base"},Be={scope:"col",class:"px-1 py-3 text-base"},Fe={scope:"col",class:"px-1 py-3 text-base"},Te={scope:"col",class:"px-1 py-3 text-base"},je={scope:"col",class:"px-1 py-3 text-base"},Ae={scope:"col",class:"px-1 py-3 text-base"},Ue={scope:"col",class:"px-1 py-3 text-base"},qe={scope:"col",class:"px-1 py-3 text-base"},ze={scope:"col",class:"px-1 py-3 text-base"},Oe={scope:"col",class:"px-1 py-3 text-base",style:{width:"150px"}},Re={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ee={className:"border dark:border-gray-800 text-center px-1 py-2 "},He={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ye={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ge={className:"border dark:border-gray-800 text-center px-1 py-2 "},Pe={className:"border dark:border-gray-800 text-center px-1 py-2 "},We={className:"border dark:border-gray-800 text-center px-1 py-2 "},Je={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ke={className:"border dark:border-gray-800 text-center px-1 py-2 "},Qe={className:"border dark:border-gray-800 text-center px-1 py-2 "},Xe={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ze={className:"border dark:border-gray-800 text-center px-1 py-2 "},et={className:"border dark:border-gray-800 text-center px-1 py-2 "},tt={className:"border dark:border-gray-800 text-center px-1 py-2 "},st={className:"border dark:border-gray-800 text-start px-1 py-2"},ot=["onClick"],rt=["href"],at={class:"spaner"},lt={class:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-7"},dt={class:"flex items-start rounded-xl dark:bg-gray-600 dark:text-gray-300 bg-white p-4 shadow-lg"},nt=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full border border-red-100 bg-red-50"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1),it={class:"mr-4"},ct=e("h2",{class:"font-semibold"},"\u062C\u0645\u064A\u0639 \u0627\u0644\u0639\u0642\u0648\u062F",-1),pt={class:"mt-2 text-sm text-gray-500 dark:text-gray-200"},ut=e("div",null,null,-1),Mt={__name:"index",props:{client:Array,user:String},setup(C){const V=C;U();const f=q();let $=n(!1);n(!1),n(!1);let _=n(!1),h=n(!1);n(0);let D=n(0),p=n(A()),u=n(j());const N=n({}),g=n([]);let v=n(!1),L=0,k=1,m=V.user;const b=()=>{k=0,g.value.length=0,v.value=!v.value},B=async s=>{console.log(s);try{const o=await w.get("/api/getIndexContractCar",{params:{limit:100,page:k,q:m,from:p.value,to:u.value,user_id:L}}),d=o.data;D.value=o.data.total,d.data.length<100?(g.value.push(...d.data),s.complete()):(g.value.push(...d.data),s.loaded()),k++}catch(o){console.log(o)}};function F(s){_.value=!1,w.post("/api/updateCarsS",s).then(o=>{$.value=!1,f.success("\u062A\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}),getcountTotalInfo(),b()}).catch(o=>{$.value=!1,f.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}function T(s){w.post("/api/DelCarContract",s).then(o=>{h.value=!1,f.success("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0639\u0642\u062F \u0628\u0646\u062C\u0627\u062D",{timeout:3e3,position:"bottom-right",rtl:!0}),b()}).catch(o=>{console.error(o)})}const M=se(b,500);function j(){const s=new Date,o=s.getFullYear(),d=String(s.getMonth()+1).padStart(2,"0"),t=String(s.getDate()).padStart(2,"0");return`${o}-${d}-${t}`}function A(){const s=new Date,o=s.getFullYear(),d=String(s.getMonth()+1).padStart(2,"0");return`${o}-${d}-01`}return(s,o)=>{const d=W("InputLabel");return c(),i(I,null,[a(l(z),{title:"Dashboard"}),a(ee,{formData:N.value,show:!!l(_),client:C.client,onA:o[0]||(o[0]=t=>F(t)),onClose:o[1]||(o[1]=t=>x(_)?_.value=!1:_=!1)},{header:y(()=>[]),_:1},8,["formData","show","client"]),a(Z,{show:!!l(h),formData:N.value,onA:o[2]||(o[2]=t=>T(t)),onClose:o[3]||(o[3]=t=>x(h)?h.value=!1:h=!1)},{header:y(()=>[oe]),_:1},8,["show","formData"]),a(J,null,{default:y(()=>[s.$page.props.auth.user.type_id==8?(c(),i("div",re,[e("div",ae,[e("div",le,[e("div",de,[e("div",ne,[e("div",ie,[e("div",null,[e("form",ce,[pe,e("div",ue,[_e,O(e("input",{"onUpdate:modelValue":o[4]||(o[4]=t=>x(m)?m.value=t:m=t),onInput:o[5]||(o[5]=(...t)=>l(M)&&l(M)(...t)),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"\u0628\u062D\u062B",required:""},null,544),[[R,l(m)]])])])]),e("div",he,[e("div",null,[a(d,{for:"from",value:"\u0645\u0646 \u062A\u0627\u0631\u064A\u062E"}),a(S,{id:"from",type:"date",class:"mt-1 block w-full",modelValue:l(p),"onUpdate:modelValue":o[6]||(o[6]=t=>x(p)?p.value=t:p=t)},null,8,["modelValue"])])]),e("div",ge,[e("div",null,[a(d,{for:"to",value:"\u062D\u062A\u0649 \u062A\u0627\u0631\u064A\u062E"}),a(S,{id:"to",type:"date",class:"mt-1 block w-full",modelValue:l(u),"onUpdate:modelValue":o[7]||(o[7]=t=>x(u)?u.value=t:u=t)},null,8,["modelValue"])])]),e("div",me,[a(d,{for:"pay",value:"\u0641\u0644\u062A\u0631\u0629"}),e("button",{onClick:o[8]||(o[8]=E(t=>{b(),s.getcountTotalInfo()},["prevent"])),class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-gray-500 rounded",style:{width:"100%"}},[s.isLoading?(c(),i("span",be,"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...")):(c(),i("span",xe,"\u0641\u0644\u062A\u0631\u0629"))])]),e("div",ye,[a(d,{for:"pay",value:"\u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0639\u0642\u0648\u062F"}),e("a",{class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-blue-500 rounded",style:{display:"block","text-align":"center"},href:`api/contract_account_report?type=contract-report&from=${l(p)}&to=${l(u)}&print=2`,target:"_blank"},[s.isLoading?(c(),i("span",ke,"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...")):(c(),i("span",ve,"\u0637\u0628\u0627\u0639\u0629"))],8,fe)])]),e("div",null,[we,e("div",Ce,[e("table",$e,[e("thead",De,[e("tr",null,[e("th",Ne,r(s.$t("seller")),1),e("th",Me,r(s.$t("debt")),1),e("th",Ie,r(s.$t("debtInDinars")),1),e("th",Se,r(s.$t("car_type")),1),e("th",Ve,r(s.$t("vin")),1),e("th",Le,r(s.$t("color")),1),e("th",Be,r(s.$t("carPrice")),1),e("th",Fe,r(s.$t("paid")),1),e("th",Te,r(s.$t("remaining")),1),e("th",je,r(s.$t("date")),1),e("th",Ae,r(s.$t("Buyer")),1),e("th",Ue,r(s.$t("debt")),1),e("th",qe,r(s.$t("debtInDinars")),1),e("th",ze,r(s.$t("note")),1),e("th",Oe,r(s.$t("execute")),1)])]),e("tbody",null,[(c(!0),i(I,null,H(g.value,t=>(c(),i("tr",{key:t.id,class:Y([t.status==0?"":t.status==1?"bg-red-100 dark:bg-red-900":"bg-green-100 dark:bg-green-900","bg-white border-b dark:bg-gray-900 dark:border-gray-900 hover:bg-gray-50 dark:hover:bg-gray-600"])},[e("td",Re,r(t.name_seller),1),e("td",Ee,r(t.tex_seller-t.tex_seller_paid),1),e("td",He,r(t.tex_seller_dinar-t.tex_seller_dinar_paid),1),e("td",Ye,r(t.car_name),1),e("td",Ge,r(t.vin),1),e("td",Pe,r(t.color),1),e("td",We,r(t.car_price),1),e("td",Je,r(t.car_paid),1),e("td",Ke,r(t.car_price-t.car_paid),1),e("td",Qe,r(t.created),1),e("td",Xe,r(t.name_buyer),1),e("td",Ze,r(t.tex_buyer-t.tex_buyer_paid),1),e("td",et,r(t.tex_buyer_dinar-t.tex_buyer_dinar_paid),1),e("td",tt,r(t.system_note),1),e("td",st,[a(l(G),{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-slate-500 rounded inline-flex",href:`/contract/${t.id}`},{default:y(()=>[a(X)]),_:2},1032,["href"]),e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-orange-500 rounded",onClick:_t=>s.openModalDelCar(t)},[a(Q)],8,ot),e("a",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-blue-600 rounded inline-flex",href:`/contract_print/${t.id}`,target:"_blank"},[a(K)],8,rt)])],2))),128))])])])]),e("div",at,[a(l(te),{car:g.value,onInfinite:B,identifier:l(v)},null,8,["car","identifier"])]),e("div",null,[e("div",lt,[e("div",dt,[nt,e("div",it,[ct,e("p",pt,r(l(D)),1)])])])])])])])])])):P("",!0),ut]),_:1})],64)}}};export{Mt as default};
