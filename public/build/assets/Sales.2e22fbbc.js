import{x as Y,y as Z,r as n,a as i,g as d,j as l,w as D,k as g,F as A,o as c,H as ee,b as e,e as R,v as te,z as se,t as o,h as U,l as oe,i as j,n as ae,L as re}from"./app.1425fd0e.js";import{_ as le}from"./AuthenticatedLayout.09fa76e1.js";import{_ as x}from"./InputLabel.fce9d803.js";import{_ as q}from"./TextInput.54a25165.js";import{s as de}from"./show.6e77b3ad.js";import{p as ne}from"./pay.b3ec134d.js";import{t as ie}from"./trash.e9cffa42.js";import{e as ce}from"./edit.de401226.js";import{_ as pe}from"./ModalAddCarPayment.9c6f6f39.js";import{M as ue}from"./ModalDelCar.b747da78.js";import{_ as _e}from"./ModalEditCar_S.c7751cfa.js";import{W as he}from"./v3-infinite-loading.es.de6ddd3e.js";import{d as me}from"./debounce.4a61300d.js";import{a as M}from"./index.59b46b84.js";/* empty css                                                    */import"./Uploader.79fa26d5.js";/* empty css                                                                 *//* empty css                                                       */const ge=e("h2",{class:"mb-5 dark:text-white text-center"}," \u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 \u061F ",-1),xe={key:0,class:"py-2"},be={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},ye={class:"bg-white overflow-hidden shadow-sm"},fe={class:"p-6 dark:bg-gray-900"},ve={class:"flex flex-col"},ke={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-7 gap-2 lg:gap-1"},we={class:"flex items-center max-w-5xl"},$e=e("label",{class:"dark:text-gray-200",for:"simple-search"},null,-1),Ce={class:"relative w-full"},Ne=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-200 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),De={value:"0",disabled:""},Me={value:""},Ae=["value"],Ie={class:"px-2"},Pe={className:"mb-4"},ze={class:"px-2"},Se={className:"mb-4"},Ue={className:"mb-4  mr-2 print:hidden"},je=e("span",null,"\u0641\u0644\u062A\u0631\u0629",-1),Be=[je],Ve={className:"mb-4  mr-5 print:hidden"},Ee=["href"],Fe=e("span",null,"Excel",-1),Re=[Fe],qe={key:0,className:"mb-4  mr-5 print:hidden"},Le=["href"],Te=e("span",null,"\u0637\u0628\u0627\u0639\u0629",-1),He=[Te],Ge=e("div",null,null,-1),Oe={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},We={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},Je={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},Ke={scope:"col",class:"px-1 py-3 text-base"},Qe={scope:"col",class:"px-1 py-3 text-base"},Xe={scope:"col",class:"px-1 py-3 text-base"},Ye={scope:"col",class:"px-1 py-3 text-base"},Ze={scope:"col",class:"px-1 py-3 text-base"},et={scope:"col",class:"px-1 py-3 text-base"},tt={scope:"col",class:"px-1 py-3 text-base"},st={scope:"col",class:"px-1 py-3 text-base"},ot={scope:"col",class:"px-1 py-3 text-base"},at={scope:"col",class:"px-1 py-3 text-base"},rt={scope:"col",class:"px-1 py-3 text-base"},lt={scope:"col",class:"px-1 py-3 text-base"},dt={scope:"col",class:"px-1 py-3 text-base"},nt={scope:"col",class:"px-1 py-3 text-base"},it=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0646\u0642\u0644 \u0628\u0631\u064A ",-1),ct=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0646\u0642\u0644 \u0648\u062A\u062E\u0644\u064A\u0635 \u062F\u064A\u0646\u0627\u0631 ",-1),pt={scope:"col",class:"px-1 py-3 text-base"},ut={scope:"col",class:"px-1 py-3 text-base"},_t={scope:"col",class:"px-1 py-3 text-base"},ht={scope:"col",class:"px-1 py-3 text-base"},mt={scope:"col",class:"px-1 py-3 text-base",style:{width:"180px"}},gt=e("th",{class:"px-1 py-3 text-base"},"\u062A\u062E\u0632\u064A\u0646",-1),xt={className:"border dark:border-gray-800 text-center  dark:text-gray-200 text-black px-1 py-2 ",style:{"font-weight":"bold","font-size":"16px"}},bt={className:"border dark:border-gray-800 text-center px-1 py-2 "},yt={className:"border dark:border-gray-800 text-center px-1 py-2 "},ft={className:"border dark:border-gray-800 text-center px-1 py-2 "},vt={className:"border dark:border-gray-800 text-center px-1 py-2 "},kt={className:"border dark:border-gray-800 text-center px-1 py-2 "},wt={className:"border dark:border-gray-800 text-center px-1 py-2 "},$t={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ct={className:"border dark:border-gray-800 text-center px-1 py-2 "},Nt={className:"border dark:border-gray-800 text-center px-1 py-2 "},Dt={className:"border dark:border-gray-800 text-center px-1 py-2 "},Mt={className:"border dark:border-gray-800 text-center px-1 py-2 "},At={className:"border dark:border-gray-800 text-center px-1 py-2 "},It={className:"border dark:border-gray-800 text-center px-1 py-2 "},Pt={className:"border dark:border-gray-800 text-center px-1 py-2 "},zt={className:"border dark:border-gray-800 text-center px-1 py-2 "},St={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ut={className:"border dark:border-gray-800 text-center px-1 py-2 "},jt={className:"border dark:border-gray-800 text-center px-1 py-2 "},Bt={className:"border dark:border-gray-800 text-start px-1 py-2"},Vt=["onClick"],Et=["onClick"],Ft=["onClick"],Rt={className:"border dark:border-gray-800 text-center px-1 py-2 "},qt=["href"],Lt=["src"],Tt={class:"spaner"},Ht={class:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-7"},Gt={class:"flex items-start rounded-xl dark:bg-gray-600 dark:text-gray-300 bg-white p-4 shadow-lg"},Ot=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full border border-orange-100 bg-orange-50"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-orange-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1),Wt={class:"mr-4"},Jt={class:"font-semibold"},Kt={class:"mt-2 text-sm text-gray-500 dark:text-gray-200"},Qt={class:"flex items-start rounded-xl dark:bg-gray-600 dark:text-gray-300 bg-white p-4 shadow-lg"},Xt=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full border border-red-100 bg-red-50"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1),Yt={class:"mr-4"},Zt={class:"font-semibold"},es={class:"mt-2 text-sm text-gray-500 dark:text-gray-200"},ts=e("div",null,null,-1),fs={__name:"Sales",props:{client:Array,config:Array},setup(I){const k=I;Y();const w=Z();let P=n(!1);n(!1),n(!1);let b=n(!1),y=n(!1),f=n(!1),B=n(0),V=n(0);function L(s={}){r.value=s,r.value.dinar_s==0&&(r.value.dinar_s=r.value.dinar),r.value.expenses_s==0&&(r.value.expenses_s=r.value.expenses),r.value.dolar_price_s==0&&(r.value.dolar_price_s=k.config[0].dolar_price),r.value.shipping_dolar_s==0&&(r.value.shipping_dolar_s=k.config[0].shipping_dolar),r.value.coc_dolar_s==0&&(r.value.coc_dolar_s=k.config[0].coc_dolar),r.value.checkout_s==0&&(r.value.checkout_s=k.config[0].checkout),r.value.land_shipping_s==0&&(r.value.land_shipping_s=k.config[0].land_shipping_s),y.value=!0}function T(s={}){r.value=s,f.value=!0}function H(s={}){r.value=s,r.value.notePayment=" \u0628\u064A\u062F ",b.value=!0}const r=n({}),$=n([]);let u=n(""),_=n(""),z=n(!1),p=0,S=1,C="";const v=()=>{S=0,$.value.length=0,z.value=!z.value},G=async s=>{console.log(s);try{const t=(await M.get("/getIndexCar",{params:{limit:100,page:S,q:C,user_id:p,from:u.value,to:_.value}})).data;t.data.length<100?($.value.push(...t.data),s.complete()):($.value.push(...t.data),s.loaded()),S++}catch(a){console.log(a)}},E=async()=>{M.get("/api/totalInfo").then(s=>{B.value=s.data.data.mainAccount,V.value=s.data.data.allCars}).catch(s=>{console.error(s)})};E();function O(s){y.value=!1,M.post("/api/updateCarsS",s).then(a=>{P.value=!1,w.success("\u062A\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}),E(),v()}).catch(a=>{P.value=!1,w.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}function W(s){M.post("/api/DelCar",s).then(a=>{f.value=!1,w.success("\u062A\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D \u0648\u062E\u0635\u0645 \u0627\u0644\u0645\u0628\u0644\u063A \u0645\u0646 \u062F\u064A\u0646 \u0627\u0644\u0632\u0628\u0648\u0646",{timeout:3e3,position:"bottom-right",rtl:!0}),v()}).catch(a=>{console.error(a)})}function J(s){var a,t,h;M.get(`/api/addPaymentCar?car_id=${s.id}&discount=${(a=s.discountPayment)!=null?a:0}&amount=${(t=s.amountPayment)!=null?t:0}&note=${(h=s.notePayment)!=null?h:""}`).then(N=>{v(),b.value=!1,w.success(" \u062A\u0645 \u062F\u0641\u0639 \u0645\u0628\u0644\u063A \u062F\u0648\u0644\u0627\u0631 "+s.amountPayment+" \u0628\u0646\u062C\u0627\u062D ",{timeout:3e3,position:"bottom-right",rtl:!0});let m=N.data;window.open(`/api/getIndexAccountsSelas?user_id=${s.client.id}&print=2&transactions_id=${m.id}`,"_blank")}).catch(N=>{P.value=!1,w.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}const F=me(v,500);function K(s){return`/public/uploadsResized/${s}`}function Q(s){return`/public/uploads/${s}`}return(s,a)=>(c(),i(A,null,[d(l(ee),{title:"Dashboard"}),d(_e,{formData:r.value,show:!!l(y),client:I.client,onA:a[0]||(a[0]=t=>O(t)),onClose:a[1]||(a[1]=t=>g(y)?y.value=!1:y=!1)},{header:D(()=>[]),_:1},8,["formData","show","client"]),d(pe,{formData:r.value,show:!!l(b),onA:a[2]||(a[2]=t=>J(t)),onClose:a[3]||(a[3]=t=>g(b)?b.value=!1:b=!1)},{header:D(()=>[]),_:1},8,["formData","show"]),d(ue,{show:!!l(f),formData:r.value,onA:a[4]||(a[4]=t=>W(t)),onClose:a[5]||(a[5]=t=>g(f)?f.value=!1:f=!1)},{header:D(()=>[ge]),_:1},8,["show","formData"]),d(le,null,{default:D(()=>[s.$page.props.auth.user.type_id==1||s.$page.props.auth.user.type_id==6?(c(),i("div",xe,[e("div",be,[e("div",ye,[e("div",fe,[e("div",ve,[e("div",ke,[e("div",null,[d(x,{class:"mb-1",for:"pay",value:"\u0628\u062D\u062B"}),e("form",we,[$e,e("div",Ce,[Ne,R(e("input",{"onUpdate:modelValue":a[6]||(a[6]=t=>g(C)?C.value=t:C=t),onInput:a[7]||(a[7]=(...t)=>l(F)&&l(F)(...t)),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"\u0631\u0642\u0645 \u0627\u0644\u0634\u0627\u0646\u0635\u0649 - \u0631\u0642\u0645 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 - \u0627\u0633\u0645 \u0627\u0644\u062A\u0627\u062C\u0631 - \u0627\u0633\u0645 \u0627\u0644\u0633\u064A\u0627\u0631\u0629",required:""},null,544),[[te,l(C)]])])])]),e("div",null,[d(x,{class:"mb-1",for:"pay",value:"\u0627\u062E\u062A\u064A\u0627\u0631 \u062A\u0627\u062C\u0631"}),R(e("select",{onChange:a[8]||(a[8]=t=>v()),"onUpdate:modelValue":a[9]||(a[9]=t=>g(p)?p.value=t:p=t),id:"default",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 mb-6 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500"},[e("option",De,o(s.$t("selectCustomer")),1),e("option",Me,o(s.$t("allOwners")),1),(c(!0),i(A,null,U(I.client,(t,h)=>(c(),i("option",{key:h,value:t.id},o(t.name),9,Ae))),128))],544),[[se,l(p)]])]),e("div",Ie,[e("div",Pe,[d(x,{for:"from",value:s.$t("from_date")},null,8,["value"]),d(q,{id:"from",type:"date",class:"mt-1 block w-full",modelValue:l(u),"onUpdate:modelValue":a[10]||(a[10]=t=>g(u)?u.value=t:u=t)},null,8,["modelValue"])])]),e("div",ze,[e("div",Se,[d(x,{for:"to",value:s.$t("to_date")},null,8,["value"]),d(q,{id:"to",type:"date",class:"mt-1 block w-full",modelValue:l(_),"onUpdate:modelValue":a[11]||(a[11]=t=>g(_)?_.value=t:_=t)},null,8,["modelValue"])])]),e("div",Ue,[d(x,{for:"pay",value:"\u0641\u0644\u062A\u0631\u0629"}),e("button",{onClick:a[12]||(a[12]=oe(t=>v(),["prevent"])),class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-gray-500 rounded",style:{width:"100%"}},Be)]),e("div",Ve,[d(x,{for:"pay",value:"\u0637\u0628\u0627\u0639\u0629"}),e("a",{href:`/api/getIndexCar?user_id=${l(p)}&from=${l(u)}&to=${l(_)}&print=1&printExcel=1`,target:"_blank",class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-green-500 rounded block text-center",style:{width:"100%"}},Re,8,Ee)]),l(p)?(c(),i("div",qe,[d(x,{for:"pay",value:"\u0637\u0628\u0627\u0639\u0629"}),e("a",{target:"_blank",href:`api/getIndexAccountsSelas?user_id=${l(p)}&from=${l(u)}&to=${l(_)}&print=1&showComplatedCars=0`,class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-orange-500 rounded d-block",style:{width:"100%",display:"block","text-align":"center"}},He,8,Le)])):j("",!0)]),e("div",null,[Ge,e("div",Oe,[e("table",We,[e("thead",Je,[e("tr",null,[e("th",Ke,o(s.$t("car_owner")),1),e("th",Qe,o(s.$t("car_type")),1),e("th",Xe,o(s.$t("year")),1),e("th",Ye,o(s.$t("color")),1),e("th",Ze,o(s.$t("vin")),1),e("th",et,o(s.$t("car_number")),1),e("th",tt,o(s.$t("dinar")),1),e("th",st,o(s.$t("dolar_price")),1),e("th",ot,o(s.$t("dolar_custom")),1),e("th",at,o(s.$t("note")),1),e("th",rt,o(s.$t("shipping_dolar")),1),e("th",lt,o(s.$t("coc_dolar")),1),e("th",dt,o(s.$t("checkout")),1),e("th",nt,o(s.$t("expenses")),1),it,ct,e("th",pt,o(s.$t("total")),1),e("th",ut,o(s.$t("paid")),1),e("th",_t,o(s.$t("discount")),1),e("th",ht,o(s.$t("date")),1),e("th",mt,o(s.$t("execute")),1),gt])]),e("tbody",null,[(c(!0),i(A,null,U($.value,t=>{var h,N;return c(),i("tr",{key:t.id,class:ae([t.results==0?"":t.results==1?"bg-red-100 dark:bg-red-900":"bg-green-100 dark:bg-green-900","bg-white border-b dark:bg-gray-900 dark:border-gray-900 hover:bg-gray-50 dark:hover:bg-gray-600"])},[e("td",xt,o((h=t.client)==null?void 0:h.name),1),e("td",bt,o(t.car_type),1),e("td",yt,o(t.year),1),e("td",ft,o(t.car_color),1),e("td",vt,o(t.vin),1),e("td",kt,o(t.car_number),1),e("td",wt,o(t.dinar_s),1),e("td",$t,o(t.dolar_price_s),1),e("td",Ct,o((t.dinar_s/t.dolar_price_s*100).toFixed(0)||0),1),e("td",Nt,o(t.note),1),e("td",Dt,o(t.shipping_dolar_s),1),e("td",Mt,o(t.coc_dolar_s),1),e("td",At,o(t.checkout_s),1),e("td",It,o(t.expenses_s),1),e("td",Pt,o(t.land_shipping_s),1),e("td",zt,o(t.total_s.toFixed(0)),1),e("td",St,o(t.paid),1),e("td",Ut,o(t.discount),1),e("td",jt,o(t.date),1),e("td",Bt,[e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-slate-500 rounded",onClick:m=>L(t)},[d(ce)],8,Vt),e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-orange-500 rounded",onClick:m=>T(t)},[d(ie)],8,Et),t.total_s!=t.paid+t.discount?(c(),i("button",{key:0,tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-green-500 rounded",onClick:m=>H(t)},[d(ne)],8,Ft)):j("",!0),d(l(re),{style:{display:"inline-flex"},className:"px-1 py-1  text-white mx-1 bg-blue-500 rounded d-inline-block",href:s.route("showClients",(N=t.client)==null?void 0:N.id)},{default:D(()=>[d(de)]),_:2},1032,["href"])]),e("td",Rt,[(c(!0),i(A,null,U(t.car_images,(m,X)=>(c(),i("a",{key:X,href:Q(m.name),style:{cursor:"pointer"},target:"_blank"},[e("img",{src:K(m.name),alt:"",class:"px-1",style:{"max-width":"100px","max-height":"50px",display:"inline"}},null,8,Lt)],8,qt))),128))])],2)}),128))])])])]),e("div",Tt,[d(l(he),{car:$.value,onInfinite:G,identifier:l(z)},null,8,["car","identifier"])]),e("div",null,[e("div",Ht,[e("div",Gt,[Ot,e("div",Wt,[e("h2",Jt,o(s.$t("capital")),1),e("p",Kt,o(l(B)),1)])]),e("div",Qt,[Xt,e("div",Yt,[e("h2",Zt,o(s.$t("all_cars")),1),e("p",es,o(l(V)),1)])])])])])])])])])):j("",!0),ts]),_:1})],64))}};export{fs as default};
