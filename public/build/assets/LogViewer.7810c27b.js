import{u as F,r as s,j as h,a as m,g as p,q as V,w as x,F as b,o as v,H as B,b as a,e as C,k as L,h as M,t as i,i as N}from"./app.2f81e609.js";import{_ as S}from"./AuthenticatedLayout.e546d018.js";import{a as _}from"./index.08479f1f.js";import"./_plugin-vue_export-helper.cdc0426e.js";const z={class:"py-12"},D={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},j={class:"p-6 text-gray-900 dark:text-gray-100"},q={class:"flex flex-wrap items-center gap-4 mb-4"},A={class:"flex items-center gap-2"},E=["value"],K={key:0,value:"laravel.log"},T=["disabled"],U=["disabled"],$={class:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-900"},G={class:"p-4 text-xs overflow-auto max-h-[70vh] whitespace-pre-wrap font-mono text-gray-800 dark:text-gray-200",dir:"ltr"},Q={__name:"LogViewer",props:{logFiles:{type:Array,default:()=>[]}},setup(y){const f=F(),o=s([]),r=s("laravel.log"),n=s(""),d=s(!1),u=s(!1);h(()=>{var e;(e=g.logFiles)!=null&&e.length&&(o.value=g.logFiles,o.value.length>0&&!o.value.find(t=>t.name===r.value)&&(r.value=o.value[0].name)),c()});const g=y;h(()=>{var e;(e=g.logFiles)!=null&&e.length&&(o.value=g.logFiles,o.value.length>0&&!o.value.find(t=>t.name===r.value)&&(r.value=o.value[0].name)),c()});function c(){d.value=!0,_.get(route("logViewer.content"),{params:{file:r.value}}).then(e=>{var t;n.value=e.data.content||"(\u0641\u0627\u0631\u063A)",(t=e.data.logFiles)!=null&&t.length&&(o.value=e.data.logFiles)}).catch(e=>{console.error(e),f.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0644\u0648\u063A",{timeout:3e3,position:"bottom-right",rtl:!0}),n.value="(\u062E\u0637\u0623 \u0641\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644)"}).finally(()=>{d.value=!1})}function w(){!confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062A\u0641\u0631\u064A\u063A \u0645\u0644\u0641 \u0627\u0644\u0644\u0648\u063A\u061F \u0633\u064A\u062A\u0645 \u062D\u0630\u0641 \u0643\u0644 \u0627\u0644\u0645\u062D\u062A\u0648\u0649.")||(u.value=!0,_.post(route("logViewer.clear"),{file:r.value}).then(e=>{var t;f.success(e.data.message||"\u062A\u0645 \u0627\u0644\u062A\u0641\u0631\u064A\u063A \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}),n.value="(\u062A\u0645 \u0627\u0644\u062A\u0641\u0631\u064A\u063A)",(t=e.data.logFiles)!=null&&t.length&&(o.value=e.data.logFiles)}).catch(e=>{var t,l;f.error(((l=(t=e.response)==null?void 0:t.data)==null?void 0:l.error)||"\u0641\u0634\u0644 \u0627\u0644\u062A\u0641\u0631\u064A\u063A",{timeout:3e3,position:"bottom-right",rtl:!0})}).finally(()=>{u.value=!1}))}function k(e){return e<1024?e+" B":e<1024*1024?(e/1024).toFixed(1)+" KB":(e/(1024*1024)).toFixed(1)+" MB"}return(e,t)=>(v(),m(b,null,[p(V(B),{title:"\u0639\u0631\u0636 \u0648\u062A\u0641\u0631\u064A\u063A \u0644\u0648\u063A \u0627\u0644\u0623\u062E\u0637\u0627\u0621"}),p(S,null,{header:x(()=>[...t[1]||(t[1]=[a("h1",{class:"text-xl font-semibold text-gray-800 dark:text-gray-200"}," \u0639\u0631\u0636 \u0648\u062A\u0641\u0631\u064A\u063A \u0644\u0648\u063A \u0627\u0644\u0623\u062E\u0637\u0627\u0621 ",-1)])]),default:x(()=>[a("div",z,[a("div",D,[a("div",H,[a("div",j,[a("div",q,[a("div",A,[t[2]||(t[2]=a("label",{for:"log-file",class:"text-sm font-medium"},"\u0627\u0644\u0645\u0644\u0641:",-1)),C(a("select",{id:"log-file","onUpdate:modelValue":t[0]||(t[0]=l=>r.value=l),onChange:c,class:"rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-sm"},[(v(!0),m(b,null,M(o.value,l=>(v(),m("option",{key:l.name,value:l.name},i(l.name)+" ("+i(k(l.size))+") ",9,E))),128)),o.value.length===0?(v(),m("option",K,"laravel.log")):N("",!0)],544),[[L,r.value]])]),a("button",{onClick:c,disabled:d.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 text-sm"},i(d.value?"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...":"\u062A\u062D\u062F\u064A\u062B"),9,T),a("button",{onClick:w,disabled:u.value,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 text-sm"},i(u.value?"\u062C\u0627\u0631\u064A...":"\u062A\u0641\u0631\u064A\u063A \u0627\u0644\u0644\u0648\u063A"),9,U)]),a("div",$,[a("pre",G,i(n.value),1)]),t[3]||(t[3]=a("p",{class:"mt-2 text-sm text-gray-500 dark:text-gray-400"}," \u0645\u0633\u0627\u0631 \u0627\u0644\u0645\u0644\u0641\u0627\u062A: storage/logs/ ",-1))])])])])]),_:1})],64))}};export{Q as default};
