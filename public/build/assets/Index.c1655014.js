import{o as c,c as j,w as g,a as p,b as e,d as ee,t as l,e as w,v as U,O as te,i as N,T as ae,u as oe,r as u,l as T,g as r,q as d,F as E,H as se,s as S,k as re,h as le,n as B,L as H,f as ne}from"./app.9167521c.js";import{_ as de}from"./AuthenticatedLayout.c0f9cbfb.js";/* empty css                                              *//* empty css                                                         */import{_ as x}from"./InputLabel.c7e787cf.js";import{_ as z}from"./TextInput.c32fa69d.js";import{a as y}from"./index.cdef15ab.js";import{s as ie}from"./show.b333fc81.js";import{_ as me}from"./_plugin-vue_export-helper.cdc0426e.js";import{t as ue}from"./trash.330a137f.js";import{e as ce}from"./edit.ff091abb.js";import{M as ge}from"./ModalDelCar.9c0deea2.js";import{W as be}from"./v3-infinite-loading.es.b428e1c4.js";/* empty css              */import{d as fe}from"./debounce.ef2b2e3f.js";/* empty css                                                    */const pe={key:0,class:"modal-mask"},he={class:"modal-wrapper max-h-[80vh]"},xe={class:"modal-container dark:bg-gray-900 overflow-auto max-h-[80vh]"},ye={class:"modal-header"},ve={class:"modal-body"},_e={className:"mb-4 mx-5"},ke={class:"dark:text-gray-200",for:"name"},we={className:"mb-4 mx-5"},$e={class:"dark:text-gray-200",for:"phone"},Ce={className:"mb-4 mx-5"},De={class:"flex items-center cursor-pointer"},Ne={class:"relative"},Me={class:"modal-footer my-2"},Ve={class:"flex flex-row"},Ae={class:"basis-1/2 px-4"},Ie={class:"basis-1/2 px-4"},Ee=["disabled"],R={__name:"ModalEditClient",props:{show:Boolean,formData:Object},setup(m){return(n,s)=>(c(),j(ae,{name:"modal"},{default:g(()=>[m.show?(c(),p("div",pe,[e("div",he,[e("div",xe,[e("div",ye,[ee(n.$slots,"header")]),e("div",ve,[s[7]||(s[7]=e("h2",{class:"text-center dark:text-gray-200"}," \u062A\u0639\u062F\u064A\u0644 \u0632\u0628\u0648\u0646 ",-1)),e("div",_e,[e("label",ke,l(n.$t("name")),1),w(e("input",{id:"name",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[0]||(s[0]=i=>m.formData.name=i)},null,512),[[U,m.formData.name]])]),e("div",we,[e("label",$e,l(n.$t("phone")),1),w(e("input",{id:"phone",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[1]||(s[1]=i=>m.formData.phone=i)},null,512),[[U,m.formData.phone]])]),e("div",Ce,[e("label",De,[s[6]||(s[6]=e("span",{class:"mr-3 text-sm font-medium dark:text-gray-200"},"\u062A\u0641\u0639\u064A\u0644 \u0627\u0644\u0645\u0628\u064A\u0639\u0627\u062A \u0627\u0644\u062F\u0627\u062E\u0644\u064A\u0629",-1)),e("div",Ne,[w(e("input",{type:"checkbox",class:"sr-only peer","onUpdate:modelValue":s[2]||(s[2]=i=>m.formData.has_internal_sales=i)},null,512),[[te,m.formData.has_internal_sales]]),s[5]||(s[5]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])])])]),e("div",Me,[e("div",Ve,[e("div",Ae,[e("button",{class:"modal-default-button py-3 bg-gray-500 rounded",onClick:s[3]||(s[3]=i=>{n.$emit("close")})},l(n.$t("cancel")),1)]),e("div",Ie,[e("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6",onClick:s[4]||(s[4]=i=>{n.$emit("a",m.formData),m.formData=""}),disabled:!m.formData.name},l(n.$t("yes")),9,Ee)])])])])])])):N("",!0)]),_:3}))}},Se={},Be={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function He(m,n){return c(),p("svg",Be,[...n[0]||(n[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a2.25 2.25 0 00-2.25-2.25H15a3 3 0 11-6 0H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 9m18 0V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v3"},null,-1)])])}const Ue=me(Se,[["render",He]]);const qe={class:"mb-5 dark:text-white text-center"},Le={class:"py-12"},Te={class:"mx-auto sm:px-6 lg:px-8"},ze={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Re={class:"p-6 dark:bg-gray-900"},je={class:"grid grid-cols-2 md:grid-cols-5 lg:grid-cols-7 gap-2 lg:gap-1"},Oe={class:"flex items-center max-w-5xl"},Fe={class:"relative w-full"},Qe={value:"0"},Ge={class:"text-center px-4"},We={class:"px-4"},Je={className:"mb-4"},Ke={class:"px-4"},Pe={className:"mb-4"},Xe={className:"mb-4  mr-5 print:hidden"},Ye=["href"],Ze={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},et={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},tt={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},at={class:"rounded-l-lg mb-2 sm:mb-0"},ot={className:"px-1 py-2 text-base"},st={className:"px-1 py-2 text-base"},rt={className:"px-1 py-2 text-base"},lt={className:"px-1 py-2 text-base"},nt={class:"flex-1 sm:flex-none dark:bg-gray-700 dark:text-gray-200"},dt={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},it={className:"border border-white dark:border-gray-800 text-center  dark:text-gray-200 text-black px-1 py-2 ",style:{"font-weight":"bold","font-size":"16px"}},mt={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},ut={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},ct={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},gt=["onClick","title"],bt={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},ft=["onClick","title"],pt={className:"border border-white  dark:border-gray-800 text-center px-4 py-2",style:{"min-height":"42px"}},ht=["onClick"],xt=["onClick"],yt={class:"mt-3 text-center",style:{direction:"ltr"}},vt={class:"spaner"},qt={__name:"Index",setup(m){const n=oe();let s=u(!1),i=u(!1),h=u(!1);const v=u([]);let b=u({}),q=u(0);const _=u(0),k=u(0),f=u(""),L=u(0);let M=u(!1),V=1,$=u({}),C=new AbortController;const D=()=>{V=1,v.value.length=0,M.value=!M.value},O=async o=>{try{const t=await y.get("api/getIndexClients",{params:{limit:25,page:V,q:f.value,user_id:q.value,from:_.value,to:k.value},signal:C.signal});$.value=t.data,$.value.data.length<25?(v.value.push(...$.value.data),o.complete()):(v.value.push(...$.value.data),o.loaded()),V++}catch(t){console.error(t)}},F=()=>{C&&C.abort(),C=new AbortController};T([f,q,_,k],()=>{F(),A()}),T(L,o=>{console.log(o===1?"Loading data...":"Data loaded")});const A=fe(()=>{L.value=1,D()},500);function Q(o={}){b.value=o,i.value=!0}function G(o={}){b.value=o,s.value=!0}function W(o){y.post("/api/clientsStore",o).then(t=>{D(),i.value=!1}).catch(t=>{console.error(t)})}function J(o){y.post("/api/clientsEdit",o).then(t=>{D(),s.value=!1}).catch(t=>{console.error(t)})}async function K(o){try{const t=await y.post("/api/toggleInternalSales",{client_id:o.id,has_internal_sales:!o.has_internal_sales});o.has_internal_sales=t.data.has_internal_sales,n.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0628\u064A\u0639\u0627\u062A \u0627\u0644\u062F\u0627\u062E\u0644\u064A\u0629",{timeout:2e3,position:"bottom-right",rtl:!0})}catch(t){console.error("Error toggling internal sales:",t),n.error("\u0641\u0634\u0644 \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0628\u064A\u0639\u0627\u062A \u0627\u0644\u062F\u0627\u062E\u0644\u064A\u0629",{timeout:3e3,position:"bottom-right",rtl:!0})}}async function P(o){try{const t=await y.post("/api/toggleShowInDashboard",{client_id:o.id,show_in_dashboard:!o.show_in_dashboard});o.show_in_dashboard=t.data.show_in_dashboard,n.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u0639\u0631\u0636 \u0641\u064A \u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645",{timeout:2e3,position:"bottom-right",rtl:!0})}catch(t){console.error("Error toggling show in dashboard:",t),n.error("\u0641\u0634\u0644 \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u0639\u0631\u0636 \u0641\u064A \u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645",{timeout:3e3,position:"bottom-right",rtl:!0})}}function X(o={}){b.value=o,h.value=!0}function Y(o){y.post("/api/delClient",o).then(t=>{h.value=!1,D()}).catch(t=>{console.error(t)})}return(o,t)=>(c(),p(E,null,[r(d(se),{title:"Dashboard"}),r(de,null,{default:g(()=>[r(R,{show:d(i),formData:d(b),onA:t[0]||(t[0]=a=>W(a)),onClose:t[1]||(t[1]=a=>S(i)?i.value=!1:i=!1)},{header:g(()=>[...t[12]||(t[12]=[])]),_:1},8,["show","formData"]),r(ge,{show:!!d(h),formData:d(b),onA:t[2]||(t[2]=a=>Y(a)),onClose:t[3]||(t[3]=a=>S(h)?h.value=!1:h=!1)},{header:g(()=>[e("h2",qe," \u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u062A\u0627\u062C\u0631 "+l(d(b).name)+" \u061F ",1)]),_:1},8,["show","formData"]),r(R,{show:d(s),formData:d(b),onA:t[4]||(t[4]=a=>J(a)),onClose:t[5]||(t[5]=a=>S(s)?s.value=!1:s=!1)},{header:g(()=>[...t[13]||(t[13]=[])]),_:1},8,["show","formData"]),e("div",Le,[e("div",Te,[e("div",ze,[e("div",Re,[e("div",je,[e("div",null,[r(x,{for:"from",value:o.$t("search"),class:"mb-1"},null,8,["value"]),e("form",Oe,[t[15]||(t[15]=e("label",{class:"dark:text-gray-200",for:"simple-search"},null,-1)),e("div",Fe,[t[14]||(t[14]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-200 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),w(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>f.value=a),onInput:t[7]||(t[7]=(...a)=>d(A)&&d(A)(...a)),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"\u0628\u062D\u062B",required:""},null,544),[[U,f.value]])])])]),e("div",null,[r(x,{for:"from",value:"\u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0641\u0626\u0629",class:"mb-1"}),w(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>f.value=a),id:"default",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 mb-6 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500"},[e("option",Qe,l(o.$t("allOwners")),1),t[16]||(t[16]=e("option",{value:"debit"},"\u064A\u0648\u062C\u062F \u062F\u064A\u0646",-1))],512),[[re,f.value]])]),e("div",Ge,[r(x,{for:"pay",value:"\u0627\u0636\u0627\u0641\u0629",class:"mb-1"}),e("button",{className:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-red-500 rounded",onClick:t[9]||(t[9]=a=>Q())},l(o.$t("addCustomer")),1)]),e("div",We,[e("div",Je,[r(x,{for:"from",value:o.$t("from_date")},null,8,["value"]),r(z,{id:"from",type:"date",class:"mt-1 block w-full",modelValue:_.value,"onUpdate:modelValue":t[10]||(t[10]=a=>_.value=a)},null,8,["modelValue"])])]),e("div",Ke,[e("div",Pe,[r(x,{for:"to",value:o.$t("to_date")},null,8,["value"]),r(z,{id:"to",type:"date",class:"mt-1 block w-full",modelValue:k.value,"onUpdate:modelValue":t[11]||(t[11]=a=>k.value=a)},null,8,["modelValue"])])]),e("div",Xe,[r(x,{for:"pay",value:"\u0637\u0628\u0627\u0639\u0629"}),e("a",{target:"_blank",href:`api/getIndexClients?from=${_.value}&to=${k.value}&print=1&q=${f.value}`,class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-orange-500 rounded d-block",style:{width:"100%",display:"block","text-align":"center"}},[...t[17]||(t[17]=[e("span",null,"\u0637\u0628\u0627\u0639\u0629",-1)])],8,Ye)])]),e("div",Ze,[e("table",et,[e("thead",tt,[e("tr",at,[t[18]||(t[18]=e("th",{className:"px-1 py-2 text-base"},"#",-1)),e("th",ot,l(o.$t("name")),1),e("th",st,l(o.$t("phoneNumber")),1),e("th",rt,l(o.$t("debt")),1),t[19]||(t[19]=e("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u0645\u0628\u064A\u0639\u0627\u062A \u0627\u0644\u062F\u0627\u062E\u0644\u064A\u0629",-1)),t[20]||(t[20]=e("th",{className:"px-1 py-2 text-base"},"\u0639\u0631\u0636 \u0641\u064A \u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645",-1)),e("th",lt,l(o.$t("execute")),1)])]),e("tbody",nt,[(c(!0),p(E,null,le(v.value,(a,Z)=>(c(),p("tr",{key:a==null?void 0:a.id,class:B(["border-b border-white dark:bg-gray-900 dark:border-gray-900 hover:bg-gray-50 dark:hover:bg-gray-600",a.balance<=0?"bg-green-100 dark:bg-green-900":"bg-red-100 dark:bg-red-900"])},[a!=null&&a.id?(c(),p(E,{key:0},[e("td",dt,l(Z),1),e("td",it,l(a.name),1),e("td",mt,l(a.phone),1),e("td",ut,l(a.balance)+" $",1),e("td",ct,[e("button",{onClick:I=>K(a),class:B(["px-2 py-1 rounded text-sm font-semibold",a.has_internal_sales?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-700 hover:bg-gray-400"]),title:a.has_internal_sales?"\u0627\u0644\u0645\u0628\u064A\u0639\u0627\u062A \u0627\u0644\u062F\u0627\u062E\u0644\u064A\u0629 \u0645\u0641\u0639\u0644\u0629 - \u0627\u0636\u063A\u0637 \u0644\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062A\u0641\u0639\u064A\u0644":"\u0627\u0644\u0645\u0628\u064A\u0639\u0627\u062A \u0627\u0644\u062F\u0627\u062E\u0644\u064A\u0629 \u0645\u0639\u0637\u0644\u0629 - \u0627\u0636\u063A\u0637 \u0644\u0644\u062A\u0641\u0639\u064A\u0644"},l(a.has_internal_sales?"\u2713 \u0645\u0641\u0639\u0644":"\u2717 \u0645\u0639\u0637\u0644"),11,gt)]),e("td",bt,[e("button",{onClick:I=>P(a),class:B(["px-2 py-1 rounded text-sm font-semibold",a.show_in_dashboard?"bg-orange-500 text-white hover:bg-orange-600":"bg-gray-300 text-gray-700 hover:bg-gray-400"]),title:a.show_in_dashboard?"\u0627\u0644\u0639\u0631\u0636 \u0641\u064A \u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645 \u0645\u0641\u0639\u0644 - \u0627\u0636\u063A\u0637 \u0644\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062A\u0641\u0639\u064A\u0644":"\u0627\u0644\u0639\u0631\u0636 \u0641\u064A \u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645 \u0645\u0639\u0637\u0644 - \u0627\u0636\u063A\u0637 \u0644\u0644\u062A\u0641\u0639\u064A\u0644"},l(a.show_in_dashboard?"\u2713 \u0645\u0641\u0639\u0644":"\u2717 \u0645\u0639\u0637\u0644"),11,ft)]),e("td",pt,[r(d(H),{style:{display:"inline-flex"},className:"px-1 py-1  text-white mx-1 bg-blue-500 rounded d-inline-block",href:o.route("showClients",a.id)},{default:g(()=>[r(ie)]),_:1},8,["href"]),e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-slate-500 rounded",onClick:I=>G(a)},[r(ce)],8,ht),a.balance==0?(c(),p("button",{key:0,tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-orange-500 rounded",onClick:I=>X(a)},[r(ue)],8,xt)):N("",!0),r(d(H),{style:{display:"inline-flex"},className:"px-1 py-1  text-white mx-1 bg-purple-900 rounded d-inline-block",href:o.route("wallet",{id:a.id})},{default:g(()=>[r(Ue)]),_:1},8,["href"]),a.has_internal_sales?(c(),j(d(H),{key:1,style:{display:"inline-flex"},className:"px-1 py-1  text-white mx-1 bg-purple-600 rounded d-inline-block",href:`/internalSales/${a.id}`,title:"\u0627\u0644\u0645\u0628\u064A\u0639\u0627\u062A \u0627\u0644\u062F\u0627\u062E\u0644\u064A\u0629"},{default:g(()=>[...t[21]||(t[21]=[ne(" \u{1F4B0} ",-1)])]),_:1},8,["href"])):N("",!0)])],64)):N("",!0)],2))),128))])])]),e("div",yt,[e("div",vt,[r(d(be),{laravelData:v.value,onInfinite:O,identifier:d(M)},null,8,["laravelData","identifier"])])])])])])])]),_:1})],64))}};export{qt as default};
