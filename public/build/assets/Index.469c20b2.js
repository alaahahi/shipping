import{r as m,j as Q,c as q,w as C,o,g as j,q as $,H as A,b as e,t as a,f as D,L as R,e as y,k as H,a as l,h as f,F as p,v as B,n as L,i as r}from"./app.48547d98.js";import{_ as G}from"./AuthenticatedLayout.5dc45c43.js";import{M as K}from"./Modal.417b120e.js";import{a as W}from"./index.56dcb326.js";import"./_plugin-vue_export-helper.cdc0426e.js";/* empty css                                              */const X={class:"py-12"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Z={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mb-6"},ee={class:"p-6 bg-white border-b border-gray-200"},te={class:"flex items-center justify-between"},se={class:"text-2xl font-bold text-gray-900"},oe={class:"mt-1 text-sm text-gray-600"},ae={class:"flex space-x-3"},le={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg mb-6"},ne={class:"p-6"},de={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},re=["value"],ie={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},ue={class:"p-6"},ce={key:0,class:"text-center py-8"},me={key:1,class:"text-center py-8"},ge={key:2},xe={class:"space-y-4"},ve={class:"flex items-start justify-between"},be={class:"flex-1"},ye={class:"flex items-center space-x-3 mb-2"},fe={class:"text-sm text-gray-500"},pe={class:"text-sm text-gray-700 mb-2"},_e={key:0,class:"text-sm text-gray-600 mb-2"},he={class:"flex items-center text-sm text-gray-500"},ke={key:0,class:"mx-2"},we={key:1},Ce={class:"flex space-x-2"},je=["onClick"],De={key:0,class:"mt-6 flex justify-center"},Le={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},Me=["onClick","innerHTML"],Oe={class:"p-6"},Ve={key:0,class:"space-y-4"},Te={class:"grid grid-cols-2 gap-4"},Ie={class:"text-sm text-gray-900"},Ne={class:"text-sm text-gray-900"},Se={class:"text-sm text-gray-900"},Ue={key:0},$e={class:"text-sm text-gray-900"},He={key:0},Be={class:"text-sm text-gray-900 bg-gray-50 p-3 rounded"},Pe={key:1},ze={class:"bg-gray-50 p-3 rounded space-y-2"},Ee={class:"text-red-600"},Fe={class:"text-green-600"},Je={key:2,class:"grid grid-cols-2 gap-4"},Qe={class:"text-xs bg-red-50 p-3 rounded overflow-auto max-h-40"},qe={key:0},Ae={class:"text-xs bg-green-50 p-3 rounded overflow-auto max-h-40"},Re={class:"flex justify-end mt-6"},et={__name:"Index",props:{car:Object,filters:Object},setup(g){var O,V,T,I;const v=g,_=m([]),h=m(!1),b=m(!1),n=m(null),P=m([]),k=m({current_page:1,last_page:1,links:[]}),i=m({action:((O=v.filters)==null?void 0:O.action)||"",user_id:((V=v.filters)==null?void 0:V.user_id)||"",date_from:((T=v.filters)==null?void 0:T.date_from)||"",date_to:((I=v.filters)==null?void 0:I.date_to)||""}),x=async(d=1)=>{h.value=!0;try{const t={page:d,...i.value},u=await W.get(`/api/car/${v.car.id}/history`,{params:t});_.value=u.data.data,k.value={current_page:u.data.current_page,last_page:u.data.last_page,links:u.data.links||[]}}catch(t){console.error("Error fetching history:",t)}finally{h.value=!1}},z=d=>{if(d){const u=new URL(d).searchParams.get("page");x(u)}},E=d=>{n.value=d,b.value=!0},M=d=>({create:"\u0625\u0636\u0627\u0641\u0629",update:"\u062A\u062D\u062F\u064A\u062B",delete:"\u062D\u0630\u0641",restore:"\u0627\u0633\u062A\u0639\u0627\u062F\u0629"})[d]||d,F=d=>new Date(d).toLocaleDateString("ar-IQ",{year:"numeric",month:"long",day:"numeric"}),J=d=>new Date(d).toLocaleString("ar-IQ",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return Q(()=>{x()}),(d,t)=>(o(),q(G,null,{default:C(()=>{var u,N,S,U;return[j($(A),{title:"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0633\u064A\u0627\u0631\u0629"}),e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[e("div",null,[e("h1",se," \u{1F4CB} \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0633\u064A\u0627\u0631\u0629 \u0631\u0642\u0645 "+a(g.car.no),1),e("p",oe,a((u=g.car.company)==null?void 0:u.name)+" - "+a((N=g.car.name)==null?void 0:N.name)+" - "+a((S=g.car.model)==null?void 0:S.name)+" - "+a((U=g.car.color)==null?void 0:U.name),1)]),e("div",ae,[j($(R),{href:d.route("dashboard"),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"},{default:C(()=>[...t[6]||(t[6]=[D(" \u2190 \u0627\u0644\u0639\u0648\u062F\u0629 \u0644\u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645 ",-1)])]),_:1},8,["href"])])])])]),e("div",le,[e("div",ne,[e("div",de,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"\u0646\u0648\u0639 \u0627\u0644\u0639\u0645\u0644\u064A\u0629",-1)),y(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value.action=s),onChange:x,class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},[...t[7]||(t[7]=[e("option",{value:""},"\u0627\u0644\u0643\u0644",-1),e("option",{value:"create"},"\u0625\u0636\u0627\u0641\u0629",-1),e("option",{value:"update"},"\u062A\u062D\u062F\u064A\u062B",-1),e("option",{value:"delete"},"\u062D\u0630\u0641",-1)])],544),[[H,i.value.action]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645",-1)),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.value.user_id=s),onChange:x,class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},[t[9]||(t[9]=e("option",{value:""},"\u0627\u0644\u0643\u0644",-1)),(o(!0),l(p,null,f(P.value,s=>(o(),l("option",{key:s.id,value:s.id},a(s.name),9,re))),128))],544),[[H,i.value.user_id]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"\u0645\u0646 \u062A\u0627\u0631\u064A\u062E",-1)),y(e("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>i.value.date_from=s),onChange:x,class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,544),[[B,i.value.date_from]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"\u0625\u0644\u0649 \u062A\u0627\u0631\u064A\u062E",-1)),y(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>i.value.date_to=s),onChange:x,class:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,544),[[B,i.value.date_to]])])])])]),e("div",ie,[e("div",ue,[h.value?(o(),l("div",ce,[...t[13]||(t[13]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A...",-1)])])):_.value.length===0?(o(),l("div",me,[...t[14]||(t[14]=[e("div",{class:"text-gray-400 text-6xl mb-4"},"\u{1F4CB}",-1),e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"\u0644\u0627 \u062A\u0648\u062C\u062F \u062A\u063A\u064A\u064A\u0631\u0627\u062A",-1),e("p",{class:"text-gray-600"},"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u062A\u063A\u064A\u064A\u0631\u0627\u062A \u0644\u0647\u0630\u0647 \u0627\u0644\u0633\u064A\u0627\u0631\u0629",-1)])])):(o(),l("div",ge,[e("div",xe,[(o(!0),l(p,null,f(_.value,s=>{var c;return o(),l("div",{key:s.id,class:L(["border rounded-lg p-4 hover:bg-gray-50 transition-colors",{"border-green-200 bg-green-50":s.action==="create","border-blue-200 bg-blue-50":s.action==="update","border-red-200 bg-red-50":s.action==="delete"}])},[e("div",ve,[e("div",be,[e("div",ye,[e("span",{class:L(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",{"bg-green-100 text-green-800":s.action==="create","bg-blue-100 text-blue-800":s.action==="update","bg-red-100 text-red-800":s.action==="delete"}])},a(M(s.action)),3),e("time",fe,a(F(s.created_at)),1)]),e("p",pe,a(s.description),1),s.changes_summary?(o(),l("div",_e,[t[15]||(t[15]=e("strong",null,"\u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A:",-1)),D(" "+a(s.changes_summary),1)])):r("",!0),e("div",he,[e("span",null,"\u0628\u0648\u0627\u0633\u0637\u0629: "+a(((c=s.user)==null?void 0:c.name)||s.user_name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),1),s.ip_address?(o(),l("span",ke,"\u2022")):r("",!0),s.ip_address?(o(),l("span",we,"IP: "+a(s.ip_address),1)):r("",!0)])]),e("div",Ce,[e("button",{onClick:w=>E(s),class:"text-indigo-600 hover:text-indigo-900 text-sm font-medium"}," \u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644 ",8,je)])])],2)}),128))]),k.value.last_page>1?(o(),l("div",De,[e("nav",Le,[(o(!0),l(p,null,f(k.value.links,s=>(o(),l("button",{key:s.label,onClick:c=>z(s.url),class:L(["relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",{"bg-indigo-50 border-indigo-500 text-indigo-600":s.active,"pointer-events-none":!s.url}]),innerHTML:s.label},null,10,Me))),128))])])):r("",!0)]))])])])]),j(K,{show:b.value,onClose:t[5]||(t[5]=s=>b.value=!1),"max-width":"4xl"},{default:C(()=>{var s;return[e("div",Oe,[t[25]||(t[25]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"}," \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062A\u063A\u064A\u064A\u0631 ",-1)),n.value?(o(),l("div",Ve,[e("div",Te,[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700"},"\u0646\u0648\u0639 \u0627\u0644\u0639\u0645\u0644\u064A\u0629",-1)),e("span",Ie,a(M(n.value.action)),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700"},"\u0627\u0644\u062A\u0627\u0631\u064A\u062E \u0648\u0627\u0644\u0648\u0642\u062A",-1)),e("span",Ne,a(J(n.value.created_at)),1)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700"},"\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645",-1)),e("span",Se,a(((s=n.value.user)==null?void 0:s.name)||n.value.user_name||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"),1)]),n.value.ip_address?(o(),l("div",Ue,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700"},"\u0639\u0646\u0648\u0627\u0646 IP",-1)),e("span",$e,a(n.value.ip_address),1)])):r("",!0)]),n.value.description?(o(),l("div",He,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"\u0627\u0644\u0648\u0635\u0641",-1)),e("p",Be,a(n.value.description),1)])):r("",!0),n.value.changes&&Object.keys(n.value.changes).length>0?(o(),l("div",Pe,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"\u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A \u0627\u0644\u062A\u0641\u0635\u064A\u0644\u064A\u0629",-1)),e("div",ze,[(o(!0),l(p,null,f(Object.entries(n.value.changes),([c,w])=>(o(),l("div",{key:c,class:"text-sm"},[e("strong",null,a(c)+":",1),e("span",Ee,a(w.old),1),t[21]||(t[21]=D(" \u2192 ",-1)),e("span",Fe,a(w.new),1)]))),128))])])):r("",!0),n.value.old_data?(o(),l("div",Je,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"\u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0642\u062F\u064A\u0645\u0629",-1)),e("pre",Qe,a(JSON.stringify(n.value.old_data,null,2)),1)]),n.value.new_data?(o(),l("div",qe,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"\u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062C\u062F\u064A\u062F\u0629",-1)),e("pre",Ae,a(JSON.stringify(n.value.new_data,null,2)),1)])):r("",!0)])):r("",!0)])):r("",!0),e("div",Re,[e("button",{onClick:t[4]||(t[4]=c=>b.value=!1),class:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"}," \u0625\u063A\u0644\u0627\u0642 ")])])]}),_:1},8,["show"])]}),_:1}))}};export{et as default};
