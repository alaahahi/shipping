import{r as l,m as I,j as Rt,y as Wt,o as n,a as r,b as t,i as b,t as i,n as D,g as W,w as H,x as Nt,q as Gt,L as ge,f as q,T as ye,K as ve,u as pe,F as S,H as xe,h as B,e as Lt,O as Ft,k as be}from"./app.8c537d43.js";import{G as fe}from"./GuestLayout.3321aad4.js";import{M as Mt}from"./Modal.d95fae4d.js";import{_ as Kt}from"./_plugin-vue_export-helper.cdc0426e.js";import{a as w}from"./index.f8de1ef0.js";/* empty css                                              */const me=["title"],he={class:"status-icon"},we={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},_e={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},ke={key:2,class:"animate-spin",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},Ce={key:0,class:"pending-badge"},$e={class:"sync-details-header"},Se={class:"sync-details-body"},Le={class:"detail-item"},Me={class:"detail-item"},je={class:"detail-value"},Te={key:0,class:"detail-item"},Be={class:"detail-value"},Ie={key:1,class:"detail-item highlight"},Oe={class:"detail-value"},qe=["disabled"],De={key:0},Ee={key:1},ze={key:3,class:"offline-message"},Ue={class:"switch-section"},Qe={class:"switch-buttons"},Ve=["disabled"],Fe=["disabled"],Re={class:"current-location"},We={__name:"SyncIndicator",props:{position:{type:String,default:"fixed",validator:rt=>["fixed","relative","absolute"].includes(rt)},bottom:{type:String,default:"20px"},left:{type:String,default:"20px"},right:{type:String,default:"auto"},top:{type:String,default:"auto"},showSwitchButtons:{type:Boolean,default:!0}},setup(rt){const d=rt,m=l(navigator.onLine),f=l(!1),h=l(0),M=l(null),z=l(!1),j=l(window.location.href.startsWith("http://127.0.0.1")||window.location.href.startsWith("http://localhost")),A=I(()=>f.value?"syncing":m.value?h.value>0?"pending":"online":"offline"),N=I(()=>f.value?"\u062C\u0627\u0631\u064A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629...":m.value?h.value>0?`${h.value} \u0639\u0645\u0644\u064A\u0629 \u0641\u064A \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631`:"\u0645\u062A\u0635\u0644 - \u0643\u0644 \u0634\u064A\u0621 \u0645\u062D\u062F\u062B":"\u063A\u064A\u0631 \u0645\u062A\u0635\u0644 - \u0648\u0636\u0639 Offline"),lt=I(()=>f.value?"\u{1F504} \u062C\u0627\u0631\u064A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629...":h.value>0?`\u23F3 ${h.value} \u0639\u0645\u0644\u064A\u0629 \u0641\u064A \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631`:"\u2705 \u0643\u0644 \u0634\u064A\u0621 \u0645\u062D\u062F\u0651\u062B"),U=I(()=>{if(!M.value)return"\u0644\u0645 \u062A\u062A\u0645 \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629 \u0628\u0639\u062F";const v=new Date(M.value),V=new Date-v,O=Math.floor(V/6e4),F=Math.floor(V/36e5),Z=Math.floor(V/864e5);return O<1?"\u0645\u0646\u0630 \u0644\u062D\u0638\u0627\u062A":O<60?`\u0645\u0646\u0630 ${O} \u062F\u0642\u064A\u0642\u0629`:F<24?`\u0645\u0646\u0630 ${F} \u0633\u0627\u0639\u0629`:`\u0645\u0646\u0630 ${Z} \u064A\u0648\u0645`}),tt=I(()=>({position:d.position,bottom:d.position==="fixed"?d.bottom:"auto",left:d.position==="fixed"?d.left:"auto",right:d.position==="fixed"?d.right:"auto",top:d.position==="fixed"?d.top:"auto"})),_=()=>{z.value=!z.value},E=async()=>{if(!(!m.value||f.value)){f.value=!0;try{window.$api&&(await window.$api.syncNow(),M.value=Date.now(),await Q(),window.$toast&&window.$toast.success("\u062A\u0645\u062A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629 \u0628\u0646\u062C\u0627\u062D!"))}catch(v){console.error("\u0641\u0634\u0644\u062A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629:",v),window.$toast&&window.$toast.error("\u0641\u0634\u0644\u062A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629: "+v.message)}finally{f.value=!1}}},Q=async()=>{try{if(window.$api){const v=await window.$api.getSyncStatus();h.value=v.pendingCount}}catch(v){console.error("\u0641\u0634\u0644 \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629:",v)}},it=async()=>{m.value=!0,console.log("\u{1F310} \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0639\u0627\u062F"),await E()},P=()=>{m.value=!1,console.log("\u{1F4F4} \u0641\u0642\u062F\u0627\u0646 \u0627\u0644\u0627\u062A\u0635\u0627\u0644")},k=()=>{var v;if(window.switchToLocal)window.switchToLocal();else{const g=((v=window.connectionInfo)==null?void 0:v.local_url)||window.location.origin+"/";window.location.href=g}},J=()=>{var v;if(window.switchToOnline)window.switchToOnline();else{const g=((v=window.connectionInfo)==null?void 0:v.online_url)||"https://system.intellijapp.com/dashboard";window.location.href=g}};return Rt(()=>{window.addEventListener("online",it),window.addEventListener("offline",P);const v=()=>{j.value=window.location.href.startsWith("http://127.0.0.1")||window.location.href.startsWith("http://localhost")};window.addEventListener("focus",v),Q(),v();const g=setInterval(Q,3e4);Wt(()=>{window.removeEventListener("online",it),window.removeEventListener("offline",P),window.removeEventListener("focus",v),clearInterval(g)})}),(v,g)=>(n(),r("div",{class:"sync-indicator-container",style:ve(tt.value)},[t("div",{class:D(["sync-indicator",A.value]),onClick:_,title:N.value},[t("div",he,[m.value&&!f.value?(n(),r("svg",we,[...g[3]||(g[3]=[t("path",{d:"M1 9l2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9zm8 8l3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4l2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z"},null,-1)])])):m.value?f.value?(n(),r("svg",ke,[...g[5]||(g[5]=[t("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"},null,-1)])])):b("",!0):(n(),r("svg",_e,[...g[4]||(g[4]=[t("path",{d:"M23.64 7c-.45-.34-4.93-4-11.64-4-1.5 0-2.89.19-4.15.48L18.18 13.8 23.64 7zm-6.6 8.22L3.27 1.44 2 2.72l2.05 2.06C1.91 5.76.59 6.82.36 7l11.63 14.49.01.01.01-.01 3.9-4.86 3.32 3.32 1.27-1.27-3.46-3.46z"},null,-1)])]))]),h.value>0?(n(),r("div",Ce,i(h.value),1)):b("",!0)],10,me),W(ye,{name:"fade"},{default:H(()=>[z.value?(n(),r("div",{key:0,class:"sync-details",onClick:g[1]||(g[1]=Nt(()=>{},["stop"]))},[t("div",$e,[g[6]||(g[6]=t("h3",null,"\u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629",-1)),t("button",{onClick:g[0]||(g[0]=V=>z.value=!1),class:"close-btn"},"\xD7")]),t("div",Se,[t("div",Le,[g[7]||(g[7]=t("span",{class:"detail-label"},"\u0627\u0644\u0627\u062A\u0635\u0627\u0644:",-1)),t("span",{class:D(["detail-value",{"text-green":m.value,"text-red":!m.value}])},i(m.value?"\u{1F310} \u0645\u062A\u0635\u0644":"\u{1F4F4} \u063A\u064A\u0631 \u0645\u062A\u0635\u0644"),3)]),t("div",Me,[g[8]||(g[8]=t("span",{class:"detail-label"},"\u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629:",-1)),t("span",je,i(lt.value),1)]),M.value?(n(),r("div",Te,[g[9]||(g[9]=t("span",{class:"detail-label"},"\u0622\u062E\u0631 \u0645\u0632\u0627\u0645\u0646\u0629:",-1)),t("span",Be,i(U.value),1)])):b("",!0),h.value>0?(n(),r("div",Ie,[g[10]||(g[10]=t("span",{class:"detail-label"},"\u0641\u064A \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631:",-1)),t("span",Oe,i(h.value)+" \u0639\u0645\u0644\u064A\u0629",1)])):b("",!0),m.value&&h.value>0?(n(),r("button",{key:2,onClick:E,disabled:f.value,class:"sync-btn"},[f.value?(n(),r("span",Ee,"\u23F3 \u062C\u0627\u0631\u064A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629...")):(n(),r("span",De,"\u{1F504} \u0645\u0632\u0627\u0645\u0646\u0629 \u0627\u0644\u0622\u0646"))],8,qe)):b("",!0),W(Gt(ge),{href:v.route("sync.monitor"),class:"monitor-link"},{default:H(()=>[...g[11]||(g[11]=[q(" \u{1F4CA} \u0635\u0641\u062D\u0629 \u0627\u0644\u0645\u0631\u0627\u0642\u0628\u0629 \u0627\u0644\u0643\u0627\u0645\u0644\u0629 ",-1)])]),_:1},8,["href"]),m.value?b("",!0):(n(),r("div",ze,[...g[12]||(g[12]=[t("p",null,"\u26A0\uFE0F \u0623\u0646\u062A \u062A\u0639\u0645\u0644 \u0641\u064A \u0648\u0636\u0639 Offline",-1),t("p",{class:"text-sm"},"\u0633\u064A\u062A\u0645 \u062D\u0641\u0638 \u062A\u063A\u064A\u064A\u0631\u0627\u062A\u0643 \u0645\u062D\u0644\u064A\u0627\u064B \u0648\u0645\u0632\u0627\u0645\u0646\u062A\u0647\u0627 \u0639\u0646\u062F \u0639\u0648\u062F\u0629 \u0627\u0644\u0627\u062A\u0635\u0627\u0644",-1)])])),t("div",Ue,[g[14]||(g[14]=t("div",{class:"switch-header"},[t("span",null,"\u{1F504} \u0627\u0644\u062A\u0628\u062F\u064A\u0644 \u0628\u064A\u0646 \u0627\u0644\u0633\u064A\u0631\u0641\u0631\u0627\u062A")],-1)),t("div",Qe,[t("button",{onClick:k,class:D(["switch-btn",{active:j.value,disabled:j.value}]),disabled:j.value}," \u{1F4BB} Local ",10,Ve),t("button",{onClick:J,class:D(["switch-btn",{active:!j.value,disabled:!j.value}]),disabled:!j.value}," \u{1F310} Online ",10,Fe)]),t("div",Re,[g[13]||(g[13]=t("span",{class:"location-label"},"\u0627\u0644\u0645\u0648\u0642\u0639 \u0627\u0644\u062D\u0627\u0644\u064A:",-1)),t("span",{class:D(["location-value",j.value?"local":"online"])},i(j.value?"\u{1F4BB} Local":"\u{1F310} Online"),3)])])])])):b("",!0)]),_:1}),z.value?(n(),r("div",{key:0,class:"overlay",onClick:g[2]||(g[2]=V=>z.value=!1)})):b("",!0)],4))}},Ne=Kt(We,[["__scopeId","data-v-c3f083bc"]]);const Ge={class:"flex justify-between items-center"},Ke={class:"flex gap-2"},He=["disabled"],Ae={key:0},Pe={key:1},Je=["disabled"],Ze={key:0},Xe={key:1},Ye={class:"py-6"},ts={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},es={class:"mb-6 bg-white dark:bg-gray-800 shadow-sm rounded-lg p-6"},ss={class:"flex justify-between items-center mb-4"},as=["disabled"],os={key:0},ns={key:1},rs={key:0,class:"text-center py-8"},ls={class:"mb-4 p-3 rounded-lg bg-gray-100 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600"},is={class:"flex items-center justify-between gap-4 flex-wrap"},ds={class:"flex items-center gap-2"},us=["disabled"],cs={key:0,class:"animate-spin"},gs={key:1},ys=["title"],vs={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},ps={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},xs={class:"space-y-2 text-sm"},bs={class:"flex justify-between"},fs={class:"font-mono text-gray-900 dark:text-gray-100"},ms={class:"flex justify-between"},hs={class:"font-mono text-gray-900 dark:text-gray-100"},ws={class:"flex justify-between"},_s={class:"font-mono text-gray-900 dark:text-gray-100"},ks={class:"bg-blue-50 dark:bg-blue-900 p-4 rounded-lg"},Cs={class:"space-y-2 text-sm"},$s={class:"flex justify-between"},Ss={class:"font-bold text-blue-900 dark:text-blue-100"},Ls={class:"flex justify-between"},Ms={class:"font-bold text-blue-900 dark:text-blue-100 text-xs"},js={class:"flex justify-between"},Ts={class:"bg-amber-50 dark:bg-amber-900 p-4 rounded-lg"},Bs={class:"space-y-2 text-sm"},Is={class:"flex justify-between"},Os={class:"font-bold text-amber-900 dark:text-amber-100"},qs={class:"bg-purple-50 dark:bg-purple-900 p-4 rounded-lg"},Ds={class:"space-y-2"},Es=["disabled"],zs={key:0,class:"mb-6 bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-500 p-4 rounded"},Us={class:"mb-6 bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden"},Qs={class:"p-6 border-b border-gray-200 dark:border-gray-700"},Vs={class:"flex justify-between items-center"},Fs={class:"text-lg font-semibold dark:text-gray-200"},Rs={class:"overflow-x-auto"},Ws={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Ns={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Gs={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-200"},Ks={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Hs={class:"px-6 py-4 whitespace-nowrap"},As={key:0},Ps={key:0,class:"p-4 border-t border-gray-200 dark:border-gray-600 text-center"},Js={class:"mb-6 bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden"},Zs={class:"p-6 border-b border-gray-200 dark:border-gray-700"},Xs={class:"flex justify-between items-center"},Ys={class:"text-lg font-semibold dark:text-gray-200"},ta=["disabled"],ea={key:0},sa={key:1},aa={class:"overflow-x-auto"},oa={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},na={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ra={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-200"},la={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},ia={key:0},da={class:"mb-6 bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden"},ua={class:"border-b border-gray-200 dark:border-gray-700"},ca={class:"flex"},ga={key:0,class:"p-6"},ya={class:"flex justify-between items-center mb-6"},va={class:"flex gap-2"},pa=["disabled"],xa={key:0},ba={key:1},fa={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},ma={class:"bg-orange-50 dark:bg-orange-900 p-4 rounded-lg"},ha={class:"text-2xl font-bold text-orange-600"},wa={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},_a={class:"text-2xl font-bold text-gray-600"},ka={class:"mb-4 flex items-center justify-between"},Ca={class:"flex items-center"},$a={key:0,class:"text-center py-12"},Sa={key:1,class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden"},La={class:"overflow-x-auto"},Ma={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ja={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ta={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-200"},Ba={class:"flex items-center"},Ia={key:0,class:"mr-2 px-2 py-1 text-xs bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 rounded-full"},Oa={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 font-mono text-xs"},qa={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Da={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ea=["onClick","disabled"],za={key:0},Ua={key:1},Qa={key:1,class:"text-gray-400 dark:text-gray-500 text-sm"},Va={key:0},Fa={key:2,class:"mt-6 bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-500 p-4 rounded-lg"},Ra={class:"flex items-start"},Wa={class:"mr-3 flex-1"},Na={key:0,class:"mb-3"},Ga={class:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-2"},Ka={class:"list-disc list-inside text-sm text-yellow-700 dark:text-yellow-300 space-y-1"},Ha={key:1,class:"mb-3"},Aa={class:"text-sm text-yellow-700 dark:text-yellow-300"},Pa={class:"flex gap-2 mt-4"},Ja={key:3,class:"mt-6 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg"},Za={class:"p-4"},Xa={class:"text-xs font-mono bg-gray-900 text-green-400 p-4 rounded overflow-x-auto max-h-64 overflow-y-auto"},Ya={class:"mt-6 bg-white dark:bg-gray-800 shadow-sm rounded-lg p-6"},to={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},eo={class:"border dark:border-gray-700 rounded p-4"},so={class:"text-2xl font-bold dark:text-gray-200"},ao={key:0,class:"border dark:border-gray-700 rounded p-4"},oo={class:"text-sm dark:text-gray-300"},no={key:0,class:"text-sm text-amber-600 dark:text-amber-400 mt-2"},ro={class:"mt-6 bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden"},lo={class:"p-6 border-b border-gray-200 dark:border-gray-700"},io={class:"flex justify-between items-center"},uo={class:"flex gap-2"},co=["disabled"],go={key:0},yo={key:1},vo={key:0,class:"p-8 text-center"},po={key:1,class:"p-8 text-center"},xo={key:2,class:"overflow-x-auto"},bo={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},fo={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},mo={class:"px-6 py-4 whitespace-nowrap text-sm dark:text-gray-300"},ho={class:"px-6 py-4 whitespace-nowrap text-sm dark:text-gray-300"},wo={class:"px-6 py-4 whitespace-nowrap text-sm dark:text-gray-300"},_o={class:"px-6 py-4 whitespace-nowrap text-sm"},ko=["onClick","disabled"],Co=["onClick"],$o=["onClick"],So={class:"p-6"},Lo={class:"bg-gray-100 dark:bg-gray-900 p-4 rounded overflow-auto max-h-96 text-sm dark:text-gray-300"},Mo={class:"mt-4 flex justify-end"},jo={class:"p-6"},To={class:"bg-red-50 dark:bg-red-900 border-l-4 border-red-500 p-4 mb-4"},Bo={class:"font-medium dark:text-gray-200"},Io={class:"text-sm mt-2 dark:text-gray-300"},Oo={class:"bg-gray-100 dark:bg-gray-900 p-4 rounded overflow-auto max-h-64 text-xs dark:text-gray-300"},qo={class:"mt-4 flex justify-end gap-2"},Do={class:"p-6"},Eo={class:"text-lg font-semibold mb-4 dark:text-gray-200"},zo={key:0,class:"text-center py-8"},Uo={key:1,class:"bg-red-50 dark:bg-red-900 border-l-4 border-red-500 p-4 mb-4"},Qo={class:"text-red-800 dark:text-red-200"},Vo={key:2},Fo={class:"mb-4 flex justify-between items-center"},Ro={class:"text-sm text-gray-600 dark:text-gray-400"},Wo={class:"font-semibold"},No={class:"text-sm text-gray-600 dark:text-gray-400"},Go={class:"font-semibold"},Ko={key:0,class:"mb-2 p-2 bg-yellow-50 dark:bg-yellow-900 rounded text-xs"},Ho={key:1,class:"overflow-x-auto max-h-96 border border-gray-200 dark:border-gray-700 rounded"},Ao={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700 text-sm"},Po={class:"bg-gray-50 dark:bg-gray-700 sticky top-0"},Jo={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Zo={key:0},Xo=["colspan"],Yo={key:2,class:"p-8 text-center text-gray-500 dark:text-gray-400"},tn={class:"text-xs mt-2"},en={key:3,class:"mt-4 flex justify-between items-center"},sn={class:"text-sm text-gray-600 dark:text-gray-400"},an={class:"flex gap-2"},on=["disabled"],nn=["disabled"],rn={class:"mt-4 flex justify-end"},ln={class:"p-6 border-b border-gray-200 dark:border-gray-700"},dn={class:"flex justify-between items-center"},un={class:"p-6 overflow-y-auto max-h-96"},cn={class:"mb-6"},gn=["value"],yn={key:0,class:"mb-6"},vn={class:"grid grid-cols-2 md:grid-cols-3 gap-3 max-h-60 overflow-y-auto"},pn=["value"],xn={class:"text-sm dark:text-gray-200"},bn={key:1,class:"bg-blue-50 dark:bg-blue-900 p-4 rounded-lg"},fn={class:"text-sm text-blue-800 dark:text-blue-200"},mn={class:"text-xs text-blue-600 dark:text-blue-300 mt-1"},hn={class:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-3"},wn=["disabled"],_n={__name:"SyncMonitor",setup(rt){const d=pe(),m=l([]),f=l({online:navigator.onLine,syncing:!1}),h=l({pendingCount:0,lastSync:null});l({cars:0,contracts:0,transactions:0});const M=l({exists:!1,pending_count:0,items:[],by_table:{}}),z={environmentLabel:"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641",tip:"\u2014",host:"-",port:"",protocol:"-",origin:"-",secure:!1,networkType:"\u063A\u064A\u0631 \u0645\u062A\u0627\u062D",effectiveType:"\u063A\u064A\u0631 \u0645\u062A\u0627\u062D",downlink:null,rtt:null,apiBaseUrl:"-",lastUpdated:null,isLocal:!1},j=l(Et()),A=l(!1),N=l(!1),lt=l(new Set);l([]);const U=l(!1),tt=l([]),_=l([]),E=l(null),Q=l("all"),it=l(1),P=l(10);let k=null;const J=l({show:!1,data:null}),v=l({show:!1,item:null,title:"",message:"",stack:""}),g=l([]),V=l(!1),O=l([]),F=l(!1);l(!1);const Z=l("auto"),Ht=l("mysql"),dt=l([]),et=l(!1),bt=l(!1),ft=l("migrations"),mt=l([]),st=l(!1),ut=l(null),G=l(""),$=l(null),ht=l(!1),wt=l({total_executed:0,total_pending:0});l(!1),l(!1),l(!1),l(!1),l({});const ct=l([]),at=l({}),ot=l(!1),X=l({ok:null,last_run:null,error:null,pull_synced:0,push_synced:0}),Y=l(!1),gt=l(!1);l(null),l(null),l(null),l(null);const yt=l({data:[],stats:null,error:null}),jt=l(!1),At=l({connection:"mysql",is_fallback:!1}),c=l({show:!1,tableName:"",columns:[],data:[],total:0,limit:50,offset:0,connection:"",error:null}),_t=l(!1);I(()=>({total:m.value.length,synced:m.value.filter(s=>s.synced).length,pending:m.value.filter(s=>!s.synced&&s.retries<3).length,failed:m.value.filter(s=>s.retries>=3).length})),I(()=>{let s=m.value;Q.value==="pending"?s=s.filter(o=>o.status==="pending"||!o.synced&&o.retries<3):Q.value==="synced"?s=s.filter(o=>o.status==="synced"||o.synced):Q.value==="failed"&&(s=s.filter(o=>o.status==="failed"||o.retries>=3));const e=(it.value-1)*P.value,a=e+P.value;return s.slice(e,a)}),I(()=>({all:"",pending:"\u0641\u064A \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631",synced:"\u062A\u0645\u062A \u0645\u0632\u0627\u0645\u0646\u062A\u0647\u0627",failed:"\u0641\u0634\u0644\u062A"})[Q.value]||""),I(()=>Math.ceil(m.value.length/P.value));const Pt=I(()=>{if(!h.value.lastSync)return"\u0644\u0645 \u062A\u062A\u0645 \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629 \u0628\u0639\u062F";const s=new Date(h.value.lastSync),a=new Date-s,o=Math.floor(a/6e4),y=Math.floor(a/36e5),x=Math.floor(a/864e5);return o<1?"\u0645\u0646\u0630 \u0644\u062D\u0638\u0627\u062A":o<60?`\u0645\u0646\u0630 ${o} \u062F\u0642\u064A\u0642\u0629`:y<24?`\u0645\u0646\u0630 ${y} \u0633\u0627\u0639\u0629`:`\u0645\u0646\u0630 ${x} \u064A\u0648\u0645`}),vt=async()=>{A.value=!0;try{if(f.value.online=navigator.onLine,K(),window.$db){const s=await window.$db.getAll("sync_queue");m.value=s.sort((e,a)=>a.timestamp-e.timestamp),h.value.pendingCount=s.filter(e=>!e.synced).length}try{const s=await w.get("/api/sync-monitor/sync-queue-status",{withCredentials:!0});M.value=s.data}catch{M.value={exists:!1,pending_count:0,items:[],by_table:{}}}if(window.$api){const s=await window.$api.getSyncStatus();h.value.pendingCount=s.pendingCount}await nt(),await Ut(),await xt(),await kt(),await pt(),await Dt(),await Ct(),d.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A",{timeout:2e3})}catch(s){console.error("\u0641\u0634\u0644 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A:",s),d.error("\u0641\u0634\u0644 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A")}finally{A.value=!1}},Tt=async()=>{var s,e,a,o,y,x;if(!f.value.online){d.warning("\u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629 - \u063A\u064A\u0631 \u0645\u062A\u0635\u0644 \u0628\u0627\u0644\u0625\u0646\u062A\u0631\u0646\u062A");return}N.value=!0,f.value.syncing=!0;try{d.info("\u{1F504} \u0628\u062F\u0621 \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629...",{timeout:3e3}),d.info("\u{1F4E5} \u062C\u0644\u0628 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0645\u0646 \u0627\u0644\u0633\u064A\u0631\u0641\u0631...",{timeout:3e3});const u=await w.post("/api/sync-monitor/sync",{direction:"down",tables:null,force_full_sync:!1},{withCredentials:!0});let C=0;u.data.success?(C=(e=(s=u.data.results)==null?void 0:s.total_synced)!=null?e:0,h.value.lastSync=Date.now()):d.warning("\u062A\u062D\u0630\u064A\u0631: \u0641\u0634\u0644 \u0627\u0644\u0633\u062D\u0628 - "+(u.data.error||"")),d.info("\u{1F4E4} \u0631\u0641\u0639 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u062D\u0644\u064A\u0629 \u0644\u0644\u0633\u064A\u0631\u0641\u0631...",{timeout:3e3});const T=await w.post("/api/sync-monitor/sync",{direction:"up",tables:null,safe_mode:!0,create_backup:!0,force_full_sync:!1},{withCredentials:!0});let p=0;T.data.success?p=(o=(a=T.data.results)==null?void 0:a.total_synced)!=null?o:0:d.warning("\u062A\u062D\u0630\u064A\u0631: \u0641\u0634\u0644 \u0627\u0644\u0631\u0641\u0639 - "+(T.data.error||"")),await nt(),await kt();let L=`\u2705 \u062A\u0645\u062A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629 \u0628\u0646\u062C\u0627\u062D!
`;L+=`\u{1F4E5} \u0633\u062D\u0628 \u0645\u0646 \u0627\u0644\u0633\u064A\u0631\u0641\u0631: ${C} \u0633\u062C\u0644
`,L+=`\u{1F4E4} \u0631\u0641\u0639 \u0644\u0644\u0633\u064A\u0631\u0641\u0631: ${p} \u0633\u062C\u0644`,d.success(L,{timeout:4e3})}catch(u){console.error("\u0641\u0634\u0644\u062A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629:",u),d.error("\u274C \u0641\u0634\u0644\u062A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629: "+(((x=(y=u.response)==null?void 0:y.data)==null?void 0:x.error)||u.message))}finally{N.value=!1,f.value.syncing=!1}},Jt=async s=>{if(!f.value.online){d.warning("\u0644\u0627 \u064A\u0645\u0643\u0646 \u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 - \u063A\u064A\u0631 \u0645\u062A\u0635\u0644");return}lt.value.add(s.id);try{d.info(`\u{1F504} \u0625\u0639\u0627\u062F\u0629 \u0645\u062D\u0627\u0648\u0644\u0629 ${Xt(s.storeName)}...`),window.$db&&(await window.$db.syncItem(s),s.synced=!0,s.retries=(s.retries||0)+1,await window.$db.save("sync_queue",s),d.success("\u2705 \u062A\u0645\u062A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629 \u0628\u0646\u062C\u0627\u062D!"),await vt())}catch(e){console.error("\u0641\u0634\u0644\u062A \u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629:",e),s.retries=(s.retries||0)+1,s.error={message:e.message,timestamp:Date.now()},window.$db&&await window.$db.save("sync_queue",s),d.error("\u274C \u0641\u0634\u0644\u062A \u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629"),await vt()}finally{lt.value.delete(s.id)}},Bt=async()=>{if(!!confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0643\u0644 \u0627\u0644\u0639\u0645\u0644\u064A\u0627\u062A\u061F \u0633\u064A\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0639\u0645\u0644\u064A\u0627\u062A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629 \u0641\u0642\u0637."))try{if(window.$db){const s=m.value.filter(e=>e.synced);for(const e of s)await window.$db.delete("sync_queue",e.id);d.success(`\u062A\u0645 \u062D\u0630\u0641 ${s.length} \u0639\u0645\u0644\u064A\u0629`),await vt()}}catch(s){console.error("\u0641\u0634\u0644 \u0627\u0644\u0645\u0633\u062D:",s),d.error("\u0641\u0634\u0644 \u0645\u0633\u062D \u0627\u0644\u0639\u0645\u0644\u064A\u0627\u062A")}},Zt=async s=>{v.value.show=!1,await Jt(s)},Xt=s=>({cars:"\u{1F697} \u0633\u064A\u0627\u0631\u0629",contracts:"\u{1F4C4} \u0639\u0642\u062F",transactions:"\u{1F4B0} \u0645\u0639\u0627\u0645\u0644\u0629",sync_queue:"\u{1F504} \u0645\u0632\u0627\u0645\u0646\u0629"})[s]||s,It=()=>{f.value.online=!0,K(),d.success("\u{1F310} \u0639\u0627\u062F \u0627\u0644\u0627\u062A\u0635\u0627\u0644!")},Ot=()=>{f.value.online=!1,K(),d.warning("\u{1F4F4} \u0641\u0642\u062F\u0627\u0646 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 - \u0648\u0636\u0639 Offline")},nt=async()=>{var s,e;V.value=!0;try{const a={};Z.value!=="auto"&&(a.force_connection=Z.value);const o=await w.get("/api/sync-monitor/tables",{params:a,withCredentials:!0});g.value=o.data.tables||[],At.value={connection:o.data.connection||"mysql",is_fallback:o.data.is_fallback||!1},Ht.value=o.data.connection||"mysql",d.success("\u062A\u0645 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3})}catch(a){console.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062C\u062F\u0627\u0648\u0644:",a),d.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062C\u062F\u0627\u0648\u0644: "+(((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.error)||a.message))}finally{V.value=!1}},qt=async(s,e=0,a=null)=>{var o,y,x,u;_t.value=!0,c.value.error=null;try{const C={limit:c.value.limit,offset:e},T=a||c.value.tableConnection;T?C.force_connection=T:Z.value!=="auto"&&(C.force_connection=Z.value);const p=await w.get(`/api/sync-monitor/table/${s}`,{params:C,withCredentials:!0});console.log("Table details response:",{table:s,connection:T,columns:p.data.columns,columns_type:typeof p.data.columns,columns_is_array:Array.isArray(p.data.columns),data_count:((o=p.data.data)==null?void 0:o.length)||0,total:p.data.total,first_row:((y=p.data.data)==null?void 0:y[0])||null,response_data:p.data});let L=[];Array.isArray(p.data.columns)?L=p.data.columns:p.data.columns&&typeof p.data.columns=="object"&&(L=Object.values(p.data.columns));let R=[];if(Array.isArray(p.data.data)?R=p.data.data:p.data.data&&typeof p.data.data=="object"&&(R=Object.values(p.data.data)),L.length===0&&R.length>0){const St=R[0];St&&typeof St=="object"&&(L=Object.keys(St),console.log("Extracted columns from data:",L))}console.log("Final columns and data:",{columns_count:L.length,columns:L,data_count:R.length,first_row_keys:R.length>0?Object.keys(R[0]):[]}),c.value.columns=L,c.value.data=R,c.value.total=p.data.total||0,c.value.offset=p.data.offset||0,c.value.connection=p.data.connection||"",console.log("Table details modal updated:",{columns:c.value.columns.length,data:c.value.data.length,total:c.value.total})}catch(C){console.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062C\u062F\u0648\u0644:",C),c.value.error=((u=(x=C.response)==null?void 0:x.data)==null?void 0:u.error)||C.message||"\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A",d.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062C\u062F\u0648\u0644")}finally{_t.value=!1}},Yt=s=>s==null?"-":typeof s=="boolean"?s?"\u2713":"\u2717":typeof s=="object"?JSON.stringify(s):typeof s=="string"&&s.length>50?s.substring(0,50)+"...":String(s),Dt=async()=>{var s,e,a,o;jt.value=!0,yt.value.error=null;try{const y=await w.get("/api/sync-monitor/metadata",{withCredentials:!0});yt.value.data=y.data.metadata||[],yt.value.stats=y.data.stats||null,d.success("\u062A\u0645 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629",{timeout:2e3})}catch(y){console.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629:",y),yt.value.error=((e=(s=y.response)==null?void 0:s.data)==null?void 0:e.error)||y.message||"\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A",d.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629: "+(((o=(a=y.response)==null?void 0:a.data)==null?void 0:o.error)||y.message))}finally{jt.value=!1}},pt=async()=>{var s,e;et.value=!0;try{const a=await w.get("/api/sync-monitor/backups",{withCredentials:!0});dt.value=a.data.backups||[],d.success("\u062A\u0645 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0646\u0633\u062E \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629",{timeout:2e3})}catch(a){console.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0646\u0633\u062E \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629:",a),d.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0646\u0633\u062E \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629: "+(((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.error)||a.message))}finally{et.value=!1}},te=async s=>{var e,a;if(!!confirm(`\u26A0\uFE0F \u062A\u062D\u0630\u064A\u0631: \u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0627\u0633\u062A\u0639\u0627\u062F\u0629 \u0627\u0644\u0646\u0633\u062E\u0629 \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629 "${s}"\u061F

\u0647\u0630\u0627 \u0633\u064A\u0633\u062A\u0628\u062F\u0644 \u062C\u0645\u064A\u0639 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062D\u0627\u0644\u064A\u0629 \u0641\u064A \u0642\u0627\u0639\u062F\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A!`)){bt.value=!0;try{const o=await w.post("/api/sync-monitor/restore-backup",{backup_file:s},{withCredentials:!0});o.data.success?(d.success("\u2705 \u062A\u0645\u062A \u0627\u0633\u062A\u0639\u0627\u062F\u0629 \u0627\u0644\u0646\u0633\u062E\u0629 \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629 \u0628\u0646\u062C\u0627\u062D",{timeout:3e3}),await pt(),await nt()):d.error("\u0641\u0634\u0644\u062A \u0627\u0644\u0627\u0633\u062A\u0639\u0627\u062F\u0629: "+(o.data.error||"\u062E\u0637\u0623 \u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"))}catch(o){console.error("\u0641\u0634\u0644\u062A \u0627\u0644\u0627\u0633\u062A\u0639\u0627\u062F\u0629:",o),d.error("\u0641\u0634\u0644\u062A \u0627\u0644\u0627\u0633\u062A\u0639\u0627\u062F\u0629: "+(((a=(e=o.response)==null?void 0:e.data)==null?void 0:a.error)||o.message))}finally{bt.value=!1}}},ee=s=>{window.open(`/api/sync-monitor/download-backup?file=${encodeURIComponent(s)}`,"_blank")},se=async s=>{var e,a;if(!!confirm(`\u26A0\uFE0F \u062A\u062D\u0630\u064A\u0631: \u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u0646\u0633\u062E\u0629 \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629 "${s}"\u061F

\u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621 \u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646\u0647!`))try{const o=await w.delete("/api/sync-monitor/backup/delete",{params:{file:s},withCredentials:!0});o.data.success?(d.success("\u2705 \u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0646\u0633\u062E\u0629 \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629 \u0628\u0646\u062C\u0627\u062D",{timeout:3e3}),await pt()):d.error("\u0641\u0634\u0644 \u0627\u0644\u062D\u0630\u0641: "+(o.data.error||"\u062E\u0637\u0623 \u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"))}catch(o){console.error("\u0641\u0634\u0644 \u0627\u0644\u062D\u0630\u0641:",o),d.error("\u0641\u0634\u0644 \u0627\u0644\u062D\u0630\u0641: "+(((a=(e=o.response)==null?void 0:e.data)==null?void 0:a.error)||o.message))}},ae=s=>{if(!s)return"0 B";const e=1024,a=["B","KB","MB","GB"],o=Math.floor(Math.log(s)/Math.log(e));return Math.round(s/Math.pow(e,o)*100)/100+" "+a[o]},oe=s=>s?new Date(s).toLocaleString("ar-EG"):"-";Rt(()=>{K(),window.addEventListener("online",It),window.addEventListener("offline",Ot),k=zt(),k!=null&&k.addEventListener?k.addEventListener("change",K):k&&(k.onchange=K)}),Wt(()=>{window.removeEventListener("online",It),window.removeEventListener("offline",Ot),k!=null&&k.removeEventListener?k.removeEventListener("change",K):k&&(k.onchange=null)});const K=()=>{j.value=Et()};function Et(){if(typeof window>"u")return{...z};const{protocol:s,hostname:e,port:a,origin:o}=window.location,y=(e||"").toLowerCase(),x=["localhost","127.0.0.1"].includes(y)||y.startsWith("192.168.")||y.startsWith("10.")||y.endsWith(".local"),u=zt(),C=typeof(u==null?void 0:u.downlink)=="number"?Number(u.downlink.toFixed(1)):null,T=typeof(u==null?void 0:u.rtt)=="number"?Math.round(u.rtt):null,p=ne(o);return{environmentLabel:x?"\u{1F5A5}\uFE0F \u0628\u064A\u0626\u0629 \u0645\u062D\u0644\u064A\u0629 (Local)":"\u2601\uFE0F \u0627\u062A\u0635\u0627\u0644 \u062E\u0627\u062F\u0645/\u0633\u064A\u0631\u0641\u0631",tip:x?"\u0623\u0646\u062A \u062A\u0639\u0645\u0644 \u0639\u0644\u0649 \u0646\u0633\u062E\u0629 \u0645\u062D\u0644\u064A\u0629\u060C \u062A\u0630\u0643\u0651\u0631 \u0645\u0632\u0627\u0645\u0646\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0642\u0628\u0644 \u0646\u0634\u0631\u0647\u0627.":"\u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0645\u0628\u0627\u0634\u0631 \u0628\u0627\u0644\u0633\u064A\u0631\u0641\u0631\u060C \u062A\u0623\u0643\u062F \u0645\u0646 \u0627\u0633\u062A\u0642\u0631\u0627\u0631 \u0627\u0644\u0634\u0628\u0643\u0629 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629.",host:e||"-",port:a||(s==="https:"?"443":"80"),protocol:s?s.replace(":","").toUpperCase():"-",origin:o||"-",secure:s==="https:",networkType:(u==null?void 0:u.type)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641",effectiveType:(u==null?void 0:u.effectiveType)||"\u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641",downlink:C,rtt:T,apiBaseUrl:p,lastUpdated:new Date().toLocaleTimeString("ar-SA"),isLocal:x}}function ne(s="-"){var e,a,o,y,x;return typeof window>"u"?s:(a=(e=window==null?void 0:window.axios)==null?void 0:e.defaults)!=null&&a.baseURL?window.axios.defaults.baseURL:(o=window==null?void 0:window.Ziggy)!=null&&o.url?window.Ziggy.url:(y=window==null?void 0:window.Laravel)!=null&&y.baseUrl?window.Laravel.baseUrl:((x=window.location)==null?void 0:x.origin)||s||"-"}function zt(){return typeof navigator>"u"?null:navigator.connection||navigator.mozConnection||navigator.webkitConnection||null}const Ut=async()=>{F.value=!0;try{const s=await w.get("/api/sync-monitor/tables-comparison",{withCredentials:!0});O.value=s.data.mysql_only||[]}catch(s){console.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0645\u0642\u0627\u0631\u0646\u0629 \u0627\u0644\u062C\u062F\u0627\u0648\u0644:",s),O.value=[]}finally{F.value=!1}},Qt=(s,e)=>{ct.value.unshift({type:s,message:e,timestamp:new Date().toISOString()}),ct.value.length>50&&(ct.value=ct.value.slice(0,50))},kt=async()=>{ot.value=!0;try{const e=(await w.get("/api/sync-monitor/tables",{withCredentials:!0})).data.tables||[],a=e.reduce((y,x)=>y+(x.count||0),0);let o="\u063A\u064A\u0631 \u0645\u062D\u062F\u062F";try{const x=require("fs").statSync("database/database.sqlite");o=le(x.size)}catch{o="\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"}at.value={type:"SQLite",version:"3.x",path:"database/database.sqlite",total_tables:e.length,total_records:a,size:o},Qt("info","\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0642\u0627\u0639\u062F\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"),await Ct()}catch(s){console.error("\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0642\u0627\u0639\u062F\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A:",s),Qt("error","\u0641\u0634\u0644 \u062A\u062D\u0645\u064A\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0642\u0627\u0639\u062F\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A"),at.value={type:"SQLite",version:"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F",path:"database/database.sqlite",total_tables:g.value.length,total_records:"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F",size:"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"}}finally{ot.value=!1}},Ct=async()=>{try{const s=await w.get("/api/sync-monitor/auto-sync-status",{withCredentials:!0});X.value=s.data}catch{X.value={ok:null,last_run:null,error:"\u0641\u0634\u0644 \u062C\u0644\u0628 \u0627\u0644\u062D\u0627\u0644\u0629"}}},re=async()=>{var s,e;if(!Y.value){Y.value=!0;try{const a=await w.post("/api/sync-monitor/run-schedule",{},{withCredentials:!0});a.data.success?(d.success("\u062A\u0645 \u062A\u0634\u063A\u064A\u0644 \u0627\u0644\u0645\u0647\u0627\u0645 \u0627\u0644\u0645\u062C\u062F\u0648\u0644\u0629"),await Ct()):d.warning(a.data.message||"\u0627\u0646\u062A\u0647\u0649 \u0645\u0639 \u0623\u062E\u0637\u0627\u0621")}catch(a){d.error(((e=(s=a.response)==null?void 0:s.data)==null?void 0:e.error)||a.message||"\u0641\u0634\u0644 \u062A\u0634\u063A\u064A\u0644 \u0627\u0644\u0645\u0647\u0627\u0645 \u0627\u0644\u0645\u062C\u062F\u0648\u0644\u0629")}finally{Y.value=!1}}},$t=I(()=>{const s=X.value;if(s.running)return{text:"\u062C\u0627\u0631\u064A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629...",class:"text-blue-600 dark:text-blue-400",icon:"\u{1F504}"};if(s.ok===null&&!s.last_run&&!s.error)return{text:"\u0644\u0645 \u062A\u064F\u0634\u063A\u0651\u0644 \u0628\u0639\u062F",class:"text-amber-600",icon:"\u26A0\uFE0F"};if(s.ok===!0){const e=s.last_run?new Date(s.last_run):null;let a="\u2014";if(e){const y=Date.now()-e,x=Math.floor(y/6e4),u=Math.floor(y/36e5);a=x<60?`\u0645\u0646\u0630 ${x} \u062F\u0642\u064A\u0642\u0629`:`\u0645\u0646\u0630 ${u} \u0633\u0627\u0639\u0629`}const o=s.pull_synced||s.push_synced?` (\u0633\u062D\u0628: ${s.pull_synced||0} | \u0631\u0641\u0639: ${s.push_synced||0})`:"";return{text:`\u062A\u0639\u0645\u0644 \u0628\u0634\u0643\u0644 \u062C\u064A\u062F | \u0622\u062E\u0631 \u062A\u0634\u063A\u064A\u0644: ${a}${o}`,class:"text-green-600",icon:"\u2705"}}return{text:s.error||"\u0641\u0634\u0644",class:"text-red-600",icon:"\u274C"}}),le=s=>{if(s===0)return"0 Bytes";const e=1024,a=["Bytes","KB","MB","GB","TB"],o=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,o)).toFixed(2))+" "+a[o]},ie=async s=>{try{E.value=s;const e=await w.get(`/api/sync-monitor/backup-content?file=${encodeURIComponent(s)}`,{withCredentials:!0});e.data.success?(tt.value=e.data.tables||[],_.value=[]):d.error("\u0641\u0634\u0644 \u0641\u064A \u0642\u0631\u0627\u0621\u0629 \u0645\u062D\u062A\u0648\u0649 \u0627\u0644\u0646\u0633\u062E\u0629 \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629")}catch(e){console.error("\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0646\u0633\u062E\u0629 \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629:",e),d.error("\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0646\u0633\u062E\u0629 \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629")}},de=async()=>{var e,a;if(_.value.length===0){d.warning("\u064A\u0631\u062C\u0649 \u062A\u062D\u062F\u064A\u062F \u062C\u062F\u0648\u0644 \u0648\u0627\u062D\u062F \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644");return}const s=`\u0647\u0644 \u062A\u0631\u064A\u062F \u0627\u0633\u062A\u0639\u0627\u062F\u0629 \u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0645\u062D\u062F\u062F\u0629 \u0645\u0646 \u0627\u0644\u0646\u0633\u062E\u0629 \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629\uFF1F

\u{1F4E6} \u0627\u0644\u0645\u0644\u0641: ${E.value}
\u{1F4CB} \u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0645\u062D\u062F\u062F\u0629 (${_.value.length}):
${_.value.join(", ")}

\u26A0\uFE0F \u0633\u064A\u062A\u0645:
- \u0627\u0633\u062A\u0628\u062F\u0627\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062D\u0627\u0644\u064A\u0629 \u0628\u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0645\u0646 \u0627\u0644\u0646\u0633\u062E\u0629 \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629
- \u0645\u0639\u0627\u0644\u062C\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u062A\u0644\u0642\u0627\u0626\u064A\u0627\u064B (\u0623\u0631\u0642\u0627\u0645 + \u0646\u0635\u0648\u0635)

\u0647\u0644 \u062A\u0631\u064A\u062F \u0627\u0644\u0645\u062A\u0627\u0628\u0639\u0629\u061F`;if(!!confirm(s))try{const o=await w.post("/api/sync-monitor/restore-selected",{backup_file:E.value,tables:_.value.join(",")},{withCredentials:!0});o.data.success?(d.success(`\u2705 \u062A\u0645\u062A \u0627\u0633\u062A\u0639\u0627\u062F\u0629 ${_.value.length} \u062C\u062F\u0648\u0644 \u0628\u0646\u062C\u0627\u062D!`),U.value=!1,_.value=[],await nt(),await Dt()):d.error(`\u274C \u0641\u0634\u0644\u062A \u0627\u0644\u0627\u0633\u062A\u0639\u0627\u062F\u0629: ${o.data.error||"\u062E\u0637\u0623 \u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641"}`)}catch(o){console.error("\u0641\u0634\u0644\u062A \u0627\u0633\u062A\u0639\u0627\u062F\u0629 \u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0645\u062D\u062F\u062F\u0629:",o),d.error(`\u0641\u0634\u0644\u062A \u0627\u0644\u0627\u0633\u062A\u0639\u0627\u062F\u0629: ${((a=(e=o.response)==null?void 0:e.data)==null?void 0:a.error)||o.message}`)}};async function xt(){st.value=!0;try{const s=await w.get("/api/sync-monitor/migrations",{params:{show_executed:ht.value},withCredentials:!0});mt.value=s.data.migrations||[],wt.value={total_executed:s.data.total_executed||0,total_pending:s.data.total_pending||0}}catch(s){console.error("Error loading migrations:",s),d.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646\u0632",{timeout:3e3,position:"bottom-right",rtl:!0})}finally{st.value=!1}}async function ue(s){try{const e=await w.post("/api/sync-monitor/check-migration",{migration_name:s},{withCredentials:!0});return e.data.success&&e.data.has_data?{safe:!1,warning:!0,tables:e.data.tables_with_data,total_records:e.data.total_records,affected_tables:e.data.affected_tables}:{safe:!0}}catch(e){return console.error("Error checking migration safety:",e),{safe:!0}}}async function Vt(s,e=!1){var a,o,y,x;if(!e){const u=await ue(s);if(!u.safe&&u.warning){const C=u.tables.map(p=>`- ${p.name}: ${p.count} \u0633\u062C\u0644`).join(`
`),T=`\u26A0\uFE0F \u062A\u062D\u0630\u064A\u0631: \u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u0641\u064A \u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0645\u062A\u0623\u062B\u0631\u0629!

\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0633\u062C\u0644\u0627\u062A: ${u.total_records}

\u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0645\u062A\u0623\u062B\u0631\u0629:
${C}

\u062A\u0646\u0641\u064A\u0630 \u0647\u0630\u0627 \u0627\u0644\u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646 \u0642\u062F \u064A\u062D\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A!

\u0647\u0644 \u062A\u0631\u064A\u062F \u0627\u0644\u0645\u062A\u0627\u0628\u0639\u0629 \u0639\u0644\u0649 \u0645\u0633\u0624\u0648\u0644\u064A\u062A\u0643 \u0627\u0644\u062E\u0627\u0635\u0629\u061F`;if(!confirm(T)){$.value={migration:s,tables:u.tables,total_records:u.total_records,affected_tables:u.affected_tables};return}}}ut.value=s,G.value="",$.value=null;try{d.info("\u062C\u0627\u0631\u064A \u062A\u0646\u0641\u064A\u0630 \u0627\u0644\u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646...",{timeout:2e3,position:"bottom-right",rtl:!0});const u=await w.post("/api/sync-monitor/run-migration",{migration_name:s,force:e},{withCredentials:!0});u.data.success?(d.success("\u062A\u0645 \u062A\u0646\u0641\u064A\u0630 \u0627\u0644\u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646 \u0628\u0646\u062C\u0627\u062D",{timeout:3e3,position:"bottom-right",rtl:!0}),G.value=u.data.output||"",await xt()):u.data.warning?($.value={migration:s,table:u.data.table,record_count:u.data.record_count,message:u.data.message},d.warning(u.data.error||"\u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u0641\u064A \u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0645\u062A\u0623\u062B\u0631\u0629",{timeout:5e3,position:"bottom-right",rtl:!0})):(d.error(u.data.error||"\u0641\u0634\u0644 \u062A\u0646\u0641\u064A\u0630 \u0627\u0644\u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646",{timeout:3e3,position:"bottom-right",rtl:!0}),G.value=u.data.output||u.data.error||"")}catch(u){console.error("Error running migration:",u),(o=(a=u.response)==null?void 0:a.data)!=null&&o.warning?($.value={migration:s,table:u.response.data.table,record_count:u.response.data.record_count,message:u.response.data.message},d.warning(u.response.data.error||"\u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u0641\u064A \u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0645\u062A\u0623\u062B\u0631\u0629",{timeout:5e3,position:"bottom-right",rtl:!0})):(d.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u0646\u0641\u064A\u0630 \u0627\u0644\u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646",{timeout:3e3,position:"bottom-right",rtl:!0}),G.value=((x=(y=u.response)==null?void 0:y.data)==null?void 0:x.error)||u.message||"")}finally{ut.value=null}}function ce(s){Vt(s,!0)}return(s,e)=>(n(),r(S,null,[W(Gt(xe),{title:"\u0645\u0631\u0627\u0642\u0628\u0629 \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629"}),W(fe,null,{header:H(()=>[t("div",Ge,[e[23]||(e[23]=t("h2",{class:"font-semibold text-xl dark:text-gray-200 text-gray-800"}," \u{1F504} \u0645\u0631\u0627\u0642\u0628\u0629 \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629 \u0648\u0627\u0644\u0640 Offline Mode ",-1)),t("div",Ke,[t("button",{onClick:vt,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",disabled:A.value},[A.value?(n(),r("span",Pe,"\u23F3 \u062C\u0627\u0631\u064A...")):(n(),r("span",Ae,"\u{1F504} \u062A\u062D\u062F\u064A\u062B"))],8,He),t("button",{onClick:Tt,class:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",disabled:!f.value.online||N.value,title:"\u0623\u0648\u0644\u0627\u064B: \u0633\u062D\u0628 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0645\u0646 \u0627\u0644\u0633\u064A\u0631\u0641\u0631\u060C \u062B\u0627\u0646\u064A\u0627\u064B: \u0631\u0641\u0639 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u062D\u0644\u064A\u0629 \u0644\u0644\u0633\u064A\u0631\u0641\u0631"},[N.value?(n(),r("span",Xe,"\u23F3 \u062C\u0627\u0631\u064A \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629...")):(n(),r("span",Ze,"\u{1F504} \u0645\u0632\u0627\u0645\u0646\u0629 \u0627\u0644\u0643\u0644"))],8,Je),t("button",{onClick:Bt,class:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600"}," \u{1F5D1}\uFE0F \u0645\u0633\u062D \u0627\u0644\u0643\u0644 ")])])]),default:H(()=>[t("div",Ye,[t("div",ts,[t("div",es,[t("div",ss,[e[24]||(e[24]=t("div",null,[t("h3",{class:"text-lg font-semibold dark:text-gray-200"},"\u{1F5C4}\uFE0F \u0642\u0627\u0639\u062F\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0648\u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629"),t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0634\u0627\u0645\u0644\u0629 \u0639\u0646 \u0642\u0627\u0639\u062F\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0648\u0627\u0644\u062D\u0627\u0644\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629")],-1)),t("button",{onClick:kt,disabled:ot.value,class:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 disabled:opacity-50"},[ot.value?(n(),r("span",ns,"\u23F3 \u062C\u0627\u0631\u064A...")):(n(),r("span",os,"\u{1F504} \u062A\u062D\u062F\u064A\u062B"))],8,as)]),ot.value?(n(),r("div",rs,[...e[25]||(e[25]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"},null,-1),t("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0642\u0627\u0639\u062F\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A...",-1)])])):(n(),r(S,{key:1},[t("div",ls,[t("div",is,[t("div",ds,[e[26]||(e[26]=t("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"\u23F1\uFE0F \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629 \u0627\u0644\u062A\u0644\u0642\u0627\u0626\u064A\u0629:",-1)),t("span",{class:D(["text-sm font-semibold",$t.value.class])},i($t.value.icon)+" "+i($t.value.text),3)]),t("button",{type:"button",disabled:Y.value,class:"inline-flex items-center gap-1 px-3 py-1.5 text-sm font-medium rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60 disabled:cursor-not-allowed",onClick:re},[Y.value?(n(),r("span",cs,"\u23F3")):(n(),r("span",gs,"\u25B6")),q(" "+i(Y.value?"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u0634\u063A\u064A\u0644...":"\u062A\u0634\u063A\u064A\u0644 \u0627\u0644\u0645\u0647\u0627\u0645 \u0627\u0644\u0645\u062C\u062F\u0648\u0644\u0629"),1)],8,us)]),X.value.error?(n(),r("p",{key:0,class:"mt-1 text-xs text-red-600 dark:text-red-400 truncate",title:X.value.error},i(X.value.error),9,ys)):b("",!0)]),t("div",vs,[t("div",ps,[e[30]||(e[30]=t("h4",{class:"text-md font-semibold mb-3 text-gray-900 dark:text-gray-100"},"\u{1F4CA} \u0642\u0627\u0639\u062F\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A",-1)),t("div",xs,[t("div",bs,[e[27]||(e[27]=t("span",{class:"text-gray-600 dark:text-gray-400"},"\u0627\u0644\u0646\u0648\u0639:",-1)),t("span",fs,i(at.value.type||"SQLite"),1)]),t("div",ms,[e[28]||(e[28]=t("span",{class:"text-gray-600 dark:text-gray-400"},"\u0627\u0644\u062D\u062C\u0645:",-1)),t("span",hs,i(at.value.size||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F"),1)]),t("div",ws,[e[29]||(e[29]=t("span",{class:"text-gray-600 dark:text-gray-400"},"\u0627\u0644\u062C\u062F\u0627\u0648\u0644:",-1)),t("span",_s,i(at.value.total_tables||g.value.length),1)])])]),t("div",ks,[e[34]||(e[34]=t("h4",{class:"text-md font-semibold mb-3 text-blue-900 dark:text-blue-100"},"\u{1F504} \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629",-1)),t("div",Cs,[t("div",$s,[e[31]||(e[31]=t("span",{class:"text-blue-700 dark:text-blue-300"},"\u0641\u064A \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631:",-1)),t("span",Ss,i(h.value.pendingCount),1)]),t("div",Ls,[e[32]||(e[32]=t("span",{class:"text-blue-700 dark:text-blue-300"},"\u0622\u062E\u0631 \u0645\u0632\u0627\u0645\u0646\u0629:",-1)),t("span",Ms,i(Pt.value),1)]),t("div",js,[e[33]||(e[33]=t("span",{class:"text-blue-700 dark:text-blue-300"},"\u0627\u0644\u062D\u0627\u0644\u0629:",-1)),t("span",{class:D(["font-bold",f.value.online?"text-green-600":"text-red-600"])},i(f.value.online?"\u0645\u062A\u0635\u0644":"\u063A\u064A\u0631 \u0645\u062A\u0635\u0644"),3)])])]),t("div",Ts,[e[36]||(e[36]=t("h4",{class:"text-md font-semibold mb-3 text-amber-900 dark:text-amber-100"},"\u26A0\uFE0F \u0641\u064A MySQL \u0641\u0642\u0637",-1)),t("div",Bs,[t("div",Is,[e[35]||(e[35]=t("span",{class:"text-amber-700 dark:text-amber-300"},"\u0639\u062F\u062F \u0627\u0644\u062C\u062F\u0627\u0648\u0644:",-1)),t("span",Os,i(O.value.length),1)])])]),t("div",qs,[e[37]||(e[37]=t("h4",{class:"text-md font-semibold mb-3 text-purple-900 dark:text-purple-100"},"\u26A1 \u0625\u062C\u0631\u0627\u0621\u0627\u062A \u0633\u0631\u064A\u0639\u0629",-1)),t("div",Ds,[t("button",{onClick:Tt,disabled:!f.value.online||N.value,class:"w-full px-3 py-2 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50",title:"\u0623\u0648\u0644\u0627\u064B: \u0633\u062D\u0628 \u0645\u0646 \u0627\u0644\u0633\u064A\u0631\u0641\u0631\u060C \u062B\u0627\u0646\u064A\u0627\u064B: \u0631\u0641\u0639 \u0627\u0644\u0645\u062D\u0644\u064A"}," \u{1F504} \u0645\u0632\u0627\u0645\u0646\u0629 \u0627\u0644\u0643\u0644 ",8,Es),t("button",{onClick:Bt,class:"w-full px-3 py-2 bg-red-600 text-white text-xs rounded hover:bg-red-700"}," \u{1F5D1}\uFE0F \u0645\u0633\u062D \u0627\u0644\u0643\u0644 ")])])])],64))]),f.value.online?b("",!0):(n(),r("div",zs,[...e[38]||(e[38]=[t("div",{class:"flex items-center"},[t("div",{class:"flex-shrink-0"},[t("span",{class:"text-3xl"},"\u26A0\uFE0F")]),t("div",{class:"mr-3"},[t("p",{class:"text-lg font-medium text-yellow-800 dark:text-yellow-200"}," \u0623\u0646\u062A \u062D\u0627\u0644\u064A\u0627\u064B \u0641\u064A \u0648\u0636\u0639 Offline "),t("p",{class:"text-sm text-yellow-700 dark:text-yellow-300"}," \u0627\u0644\u062A\u063A\u064A\u064A\u0631\u0627\u062A \u0627\u0644\u062A\u064A \u062A\u062C\u0631\u064A\u0647\u0627 \u0633\u064A\u062A\u0645 \u062D\u0641\u0638\u0647\u0627 \u0645\u062D\u0644\u064A\u0627\u064B \u0648\u0645\u0632\u0627\u0645\u0646\u062A\u0647\u0627 \u062A\u0644\u0642\u0627\u0626\u064A\u0627\u064B \u0639\u0646\u062F \u0639\u0648\u062F\u0629 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 ")])],-1)])])),t("div",Us,[t("div",Qs,[t("div",Vs,[t("h3",Fs," \u{1F4CB} \u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629 ("+i(g.value.length)+") ",1),t("button",{onClick:nt,class:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700"}," \u{1F504} \u062A\u062D\u062F\u064A\u062B ")])]),t("div",Rs,[t("table",Ws,[e[40]||(e[40]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"\u0627\u0644\u062C\u062F\u0648\u0644"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"\u0627\u0644\u0633\u062C\u0644\u0627\u062A"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"\u0627\u0644\u0645\u0635\u062F\u0631"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A")])],-1)),t("tbody",Ns,[(n(!0),r(S,null,B(g.value.slice(0,gt.value?g.value.length:15),a=>(n(),r("tr",{key:a.name,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",Gs,i(a.name),1),t("td",Ks,i(a.count.toLocaleString()),1),t("td",Hs,[t("span",{class:D(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",a.connection==="sync_sqlite"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"])},i(a.connection==="sync_sqlite"?"SQLite \u0645\u062D\u0644\u064A":"MySQL \u062E\u0627\u062F\u0645"),3)])]))),128)),g.value.length===0?(n(),r("tr",As,[...e[39]||(e[39]=[t("td",{colspan:"4",class:"px-6 py-4 text-center text-gray-500 dark:text-gray-400"}," \u0644\u0627 \u062A\u0648\u062C\u062F \u062C\u062F\u0627\u0648\u0644 \u0645\u062A\u0627\u062D\u0629 ",-1)])])):b("",!0)])])]),g.value.length>15?(n(),r("div",Ps,[t("button",{onClick:e[0]||(e[0]=a=>gt.value=!gt.value),class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400"},i(gt.value?"\u0625\u062E\u0641\u0627\u0621 \u0627\u0644\u062C\u062F\u0627\u0648\u0644":"\u0639\u0631\u0636 \u062C\u0645\u064A\u0639 \u0627\u0644\u062C\u062F\u0627\u0648\u0644")+" ("+i(g.value.length)+") ",1)])):b("",!0)]),t("div",Js,[t("div",Zs,[t("div",Xs,[t("h3",Ys," \u26A0\uFE0F \u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0645\u0648\u062C\u0648\u062F\u0629 \u0641\u064A MySQL \u0648\u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F\u0629 \u0641\u064A SQLite ("+i(O.value.length)+") ",1),t("button",{onClick:Ut,disabled:F.value,class:"px-4 py-2 bg-amber-600 text-white rounded hover:bg-amber-700 disabled:opacity-50"},[F.value?(n(),r("span",sa,"\u23F3 \u062C\u0627\u0631\u064A...")):(n(),r("span",ea,"\u{1F504} \u062A\u062D\u062F\u064A\u062B"))],8,ta)]),e[41]||(e[41]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"}," \u0647\u0630\u0647 \u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0645\u0648\u062C\u0648\u062F\u0629 \u0641\u064A MySQL \u0648\u0644\u0627 \u062A\u0648\u062C\u062F \u0641\u064A SQLite \u0627\u0644\u0645\u062D\u0644\u064A ",-1))]),t("div",aa,[t("table",oa,[e[43]||(e[43]=t("thead",{class:"bg-amber-50 dark:bg-amber-900/30"},[t("tr",null,[t("th",{class:"px-6 py-3 text-right text-xs font-medium text-amber-800 dark:text-amber-200 uppercase"},"\u0627\u0644\u062C\u062F\u0648\u0644"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-amber-800 dark:text-amber-200 uppercase"},"\u0639\u062F\u062F \u0627\u0644\u0633\u062C\u0644\u0627\u062A \u0641\u064A MySQL")])],-1)),t("tbody",na,[(n(!0),r(S,null,B(O.value,a=>(n(),r("tr",{key:a.name,class:"hover:bg-amber-50/50 dark:hover:bg-amber-900/10"},[t("td",ra,i(a.name),1),t("td",la,i((a.count||0).toLocaleString()),1)]))),128)),O.value.length===0&&!F.value?(n(),r("tr",ia,[...e[42]||(e[42]=[t("td",{colspan:"2",class:"px-6 py-8 text-center text-gray-500 dark:text-gray-400"}," \u0644\u0627 \u062A\u0648\u062C\u062F \u062C\u062F\u0627\u0648\u0644 - \u062C\u0645\u064A\u0639 \u062C\u062F\u0627\u0648\u0644 MySQL \u0645\u0648\u062C\u0648\u062F\u0629 \u0641\u064A SQLite ",-1)])])):b("",!0)])])])]),t("div",da,[t("div",ua,[t("div",ca,[t("button",{onClick:e[1]||(e[1]=a=>ft.value="migrations"),class:D(["px-6 py-3 text-sm font-medium border-b-2 transition-colors",ft.value==="migrations"?"border-orange-500 text-orange-600 dark:text-orange-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"])}," \u{1F4E6} \u0627\u0644\u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646\u0632 ",2)])]),ft.value==="migrations"?(n(),r("div",ga,[t("div",ya,[e[44]||(e[44]=t("div",null,[t("h3",{class:"text-xl font-semibold dark:text-gray-200 mb-2"}," \u{1F4E6} \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646\u0632 "),t("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," \u062A\u0646\u0641\u064A\u0630 \u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646 \u0645\u062D\u062F\u062F \u0645\u0646 \u0642\u0627\u0639\u062F\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A ")],-1)),t("div",va,[t("button",{onClick:xt,disabled:st.value,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},[st.value?(n(),r("span",ba,"\u23F3 \u062C\u0627\u0631\u064A...")):(n(),r("span",xa,"\u{1F504} \u062A\u062D\u062F\u064A\u062B"))],8,pa)])]),t("div",fa,[t("div",ma,[t("div",ha,i(wt.value.total_pending||0),1),e[45]||(e[45]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"\u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646\u0632 \u0642\u064A\u062F \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631",-1))]),t("div",wa,[t("div",_a,i(wt.value.total_executed||0),1),e[46]||(e[46]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"\u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646\u0632 \u0645\u0646\u0641\u0630\u0629",-1))])]),t("div",ka,[t("div",Ca,[Lt(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=a=>ht.value=a),onChange:xt,id:"showExecuted",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,544),[[Ft,ht.value]]),e[47]||(e[47]=t("label",{for:"showExecuted",class:"mr-2 text-sm text-gray-700 dark:text-gray-300"}," \u0639\u0631\u0636 \u0627\u0644\u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646\u0632 \u0627\u0644\u0645\u0646\u0641\u0630\u0629 ",-1))])]),st.value?(n(),r("div",$a,[...e[48]||(e[48]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto"},null,-1),t("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646\u0632...",-1)])])):(n(),r("div",Sa,[t("div",La,[t("table",Ma,[e[50]||(e[50]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"\u0627\u0633\u0645 \u0627\u0644\u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"\u0627\u0633\u0645 \u0627\u0644\u0645\u0644\u0641"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A")])],-1)),t("tbody",ja,[(n(!0),r(S,null,B(mt.value,a=>(n(),r("tr",{key:a.file,class:D(["hover:bg-gray-50 dark:hover:bg-gray-700",{"opacity-60":a.executed}])},[t("td",Ta,[t("div",Ba,[q(i(a.name)+" ",1),a.executed?(n(),r("span",Ia," \u2713 \u0645\u0646\u0641\u0630 ")):b("",!0)])]),t("td",Oa,i(a.file),1),t("td",qa,i(a.date),1),t("td",Da,[a.executed?(n(),r("span",Qa," \u062A\u0645 \u0627\u0644\u062A\u0646\u0641\u064A\u0630 ")):(n(),r("button",{key:0,onClick:o=>Vt(a.name),disabled:ut.value===a.name,class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},[ut.value!==a.name?(n(),r("span",za,"\u25B6\uFE0F \u062A\u0646\u0641\u064A\u0630")):(n(),r("span",Ua,"\u23F3 \u062C\u0627\u0631\u064A..."))],8,Ea))])],2))),128)),mt.value.length===0?(n(),r("tr",Va,[...e[49]||(e[49]=[t("td",{colspan:"4",class:"px-6 py-8 text-center text-gray-500 dark:text-gray-400"},[t("div",{class:"text-5xl mb-2"},"\u{1F4ED}"),t("p",{class:"text-lg"},"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646\u0632")],-1)])])):b("",!0)])])])])),$.value?(n(),r("div",Fa,[t("div",Ra,[e[54]||(e[54]=t("div",{class:"flex-shrink-0"},[t("span",{class:"text-2xl"},"\u26A0\uFE0F")],-1)),t("div",Wa,[e[52]||(e[52]=t("h4",{class:"text-lg font-semibold text-yellow-800 dark:text-yellow-200 mb-2"}," \u062A\u062D\u0630\u064A\u0631: \u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u0641\u064A \u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0645\u062A\u0623\u062B\u0631\u0629 ",-1)),e[53]||(e[53]=t("p",{class:"text-sm text-yellow-700 dark:text-yellow-300 mb-3"}," \u062A\u0646\u0641\u064A\u0630 \u0647\u0630\u0627 \u0627\u0644\u0645\u0627\u064A\u062C\u0631\u064A\u0634\u0646 \u0642\u062F \u064A\u062D\u0630\u0641 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0648\u062C\u0648\u062F\u0629! ",-1)),$.value.tables?(n(),r("div",Na,[t("p",Ga," \u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0645\u062A\u0623\u062B\u0631\u0629 ("+i($.value.total_records)+" \u0633\u062C\u0644): ",1),t("ul",Ka,[(n(!0),r(S,null,B($.value.tables,a=>(n(),r("li",{key:a.name},i(a.name)+": "+i(a.count)+" \u0633\u062C\u0644 ",1))),128))])])):$.value.table?(n(),r("div",Ha,[t("p",Aa,[e[51]||(e[51]=q(" \u062C\u062F\u0648\u0644 ",-1)),t("strong",null,i($.value.table),1),q(": "+i($.value.record_count)+" \u0633\u062C\u0644 ",1)])])):b("",!0),t("div",Pa,[t("button",{onClick:e[3]||(e[3]=a=>ce($.value.migration)),class:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm font-medium"}," \u26A0\uFE0F \u062A\u0646\u0641\u064A\u0630 \u0631\u063A\u0645 \u0627\u0644\u062A\u062D\u0630\u064A\u0631 (\u062D\u0630\u0641 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A) "),t("button",{onClick:e[4]||(e[4]=a=>$.value=null),class:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm"}," \u0625\u0644\u063A\u0627\u0621 ")])])])])):b("",!0),G.value?(n(),r("div",Ja,[e[55]||(e[55]=t("div",{class:"p-4 border-b border-gray-200 dark:border-gray-600"},[t("h4",{class:"text-lg font-semibold dark:text-gray-200"},"\u{1F4CB} \u0646\u062A\u064A\u062C\u0629 \u0627\u0644\u062A\u0646\u0641\u064A\u0630:")],-1)),t("div",Za,[t("pre",Xa,i(G.value),1),t("button",{onClick:e[5]||(e[5]=a=>G.value=""),class:"mt-4 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm"}," \u0625\u063A\u0644\u0627\u0642 ")])])):b("",!0)])):b("",!0)]),t("div",Ya,[e[58]||(e[58]=t("h3",{class:"text-lg font-semibold mb-4 dark:text-gray-200"},"\u{1F4CB} \u0627\u0644\u062A\u0639\u062F\u064A\u0644\u0627\u062A \u0627\u0644\u0645\u0639\u0644\u0642\u0629 \u0644\u0644\u0645\u0632\u0627\u0645\u0646\u0629",-1)),e[59]||(e[59]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-3"},[q("\u062C\u062F\u0648\u0644 "),t("code",{class:"px-1 bg-gray-100 dark:bg-gray-700 rounded"},"sync_queue"),q(" \u064A\u062E\u0632\u0646 \u0625\u062F\u0631\u0627\u062C/\u062A\u062D\u062F\u064A\u062B/\u062D\u0630\u0641 \u0645\u0646 \u0627\u0644\u0633\u064A\u0627\u0631\u0627\u062A \u0648\u0627\u0644\u0639\u0642\u0648\u062F \u0644\u064A\u064F\u0631\u0641\u0639 \u0644\u0644\u0633\u064A\u0631\u0641\u0631 \u0639\u0646\u062F \u062A\u0634\u063A\u064A\u0644 \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629")],-1)),t("div",to,[t("div",eo,[e[56]||(e[56]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"\u0639\u062F\u062F \u0627\u0644\u062A\u0639\u062F\u064A\u0644\u0627\u062A \u0627\u0644\u0645\u0639\u0644\u0642\u0629",-1)),t("p",so,i(M.value.pending_count),1)]),Object.keys(M.value.by_table||{}).length?(n(),r("div",ao,[e[57]||(e[57]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},"\u062A\u0641\u0635\u064A\u0644 \u062D\u0633\u0628 \u0627\u0644\u062C\u062F\u0648\u0644",-1)),t("div",oo,[(n(!0),r(S,null,B(M.value.by_table,(a,o)=>(n(),r("span",{key:o,class:"inline-block mr-2 mb-1"},[q(i(o)+": ",1),t("strong",null,i(a),1)]))),128))])])):b("",!0)]),M.value.exists?b("",!0):(n(),r("p",no,"\u062C\u062F\u0648\u0644 sync_queue \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F \u0623\u0648 \u063A\u064A\u0631 \u0645\u062A\u0627\u062D"))]),t("div",ro,[t("div",lo,[t("div",io,[e[60]||(e[60]=t("h3",{class:"text-lg font-semibold dark:text-gray-200"}," \u{1F4BE} \u0627\u0644\u0646\u0633\u062E \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629 ",-1)),t("div",uo,[t("button",{onClick:e[6]||(e[6]=a=>U.value=!0),class:"px-4 py-2 bg-emerald-600 text-white rounded hover:bg-emerald-700 text-sm",title:"\u0627\u0633\u062A\u0639\u0627\u062F\u0629 \u062C\u062F\u0627\u0648\u0644 \u0645\u062D\u062F\u062F\u0629 \u0645\u0646 \u0627\u0644\u0646\u0633\u062E\u0629 \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629"}," \u{1F4E6} \u0627\u0633\u062A\u0639\u0627\u062F\u0629 \u0645\u062D\u062F\u062F\u0629 "),t("button",{onClick:pt,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm",disabled:et.value},[et.value?(n(),r("span",yo,"\u23F3 \u062C\u0627\u0631\u064A...")):(n(),r("span",go,"\u{1F504} \u062A\u062D\u062F\u064A\u062B"))],8,co)])])]),et.value?(n(),r("div",vo,[...e[61]||(e[61]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),t("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0646\u0633\u062E \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629...",-1)])])):dt.value.length===0?(n(),r("div",po,[...e[62]||(e[62]=[t("div",{class:"text-5xl mb-2"},"\u{1F4E6}",-1),t("p",{class:"text-gray-600 dark:text-gray-400"},"\u0644\u0627 \u062A\u0648\u062C\u062F \u0646\u0633\u062E \u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629",-1)])])):(n(),r("div",xo,[t("table",bo,[e[63]||(e[63]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"\u0627\u0633\u0645 \u0627\u0644\u0645\u0644\u0641"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"\u0627\u0644\u062D\u062C\u0645"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A")])],-1)),t("tbody",fo,[(n(!0),r(S,null,B(dt.value,a=>(n(),r("tr",{key:a.name,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",mo,i(a.name),1),t("td",ho,i(ae(a.size)),1),t("td",wo,i(oe(a.date)),1),t("td",_o,[t("button",{onClick:o=>te(a.name),class:"text-red-600 hover:text-red-900 dark:text-red-400 mr-3",disabled:bt.value}," \u{1F504} \u0627\u0633\u062A\u0639\u0627\u062F\u0629 ",8,ko),t("button",{onClick:o=>ee(a.name),class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 mr-3"}," \u{1F4E5} \u062A\u062D\u0645\u064A\u0644 ",8,Co),t("button",{onClick:o=>se(a.name),class:"text-red-600 hover:text-red-900 dark:text-red-400",title:"\u062D\u0630\u0641 \u0627\u0644\u0646\u0633\u062E\u0629 \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629"}," \u{1F5D1}\uFE0F \u062D\u0630\u0641 ",8,$o)])]))),128))])])]))])])]),W(Mt,{show:J.value.show,onClose:e[8]||(e[8]=a=>J.value.show=!1)},{default:H(()=>[t("div",So,[e[64]||(e[64]=t("h3",{class:"text-lg font-semibold mb-4 dark:text-gray-200"},"\u{1F4C4} \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A",-1)),t("pre",Lo,i(JSON.stringify(J.value.data,null,2)),1),t("div",Mo,[t("button",{onClick:e[7]||(e[7]=a=>J.value.show=!1),class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," \u0625\u063A\u0644\u0627\u0642 ")])])]),_:1},8,["show"]),W(Mt,{show:v.value.show,onClose:e[11]||(e[11]=a=>v.value.show=!1)},{default:H(()=>[t("div",jo,[e[65]||(e[65]=t("h3",{class:"text-lg font-semibold mb-4 text-red-600 dark:text-red-400"},"\u274C \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062E\u0637\u0623",-1)),t("div",To,[t("p",Bo,i(v.value.title),1),t("p",Io,i(v.value.message),1)]),t("pre",Oo,i(v.value.stack),1),t("div",qo,[t("button",{onClick:e[9]||(e[9]=a=>Zt(v.value.item)),class:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"}," \u{1F504} \u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 "),t("button",{onClick:e[10]||(e[10]=a=>v.value.show=!1),class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," \u0625\u063A\u0644\u0627\u0642 ")])])]),_:1},8,["show"]),W(Mt,{show:c.value.show,onClose:e[15]||(e[15]=a=>c.value.show=!1)},{default:H(()=>{var a;return[t("div",Do,[t("h3",Eo," \u{1F4CB} \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u062C\u062F\u0648\u0644: "+i(c.value.tableName),1),_t.value?(n(),r("div",zo,[...e[66]||(e[66]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),t("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A...",-1)])])):c.value.error?(n(),r("div",Uo,[t("p",Qo,i(c.value.error),1)])):(n(),r("div",Vo,[t("div",Fo,[t("div",Ro,[e[67]||(e[67]=q(" \u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0633\u062C\u0644\u0627\u062A: ",-1)),t("span",Wo,i(((a=c.value.total)==null?void 0:a.toLocaleString())||0),1)]),t("div",No,[e[68]||(e[68]=q(" \u0627\u0644\u0627\u062A\u0635\u0627\u0644: ",-1)),t("span",Go,i(c.value.connection||"-"),1)])]),c.value.columns.length===0&&c.value.data.length>0?(n(),r("div",Ko," \u26A0\uFE0F \u0627\u0644\u0623\u0639\u0645\u062F\u0629 \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F\u0629\u060C \u064A\u062A\u0645 \u0627\u0633\u062A\u062E\u0631\u0627\u062C\u0647\u0627 \u0645\u0646 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A... ")):b("",!0),c.value.columns.length>0?(n(),r("div",Ho,[t("table",Ao,[t("thead",Po,[t("tr",null,[(n(!0),r(S,null,B(c.value.columns,o=>(n(),r("th",{key:o,class:"px-4 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase border-r border-gray-200 dark:border-gray-600"},i(o),1))),128))])]),t("tbody",Jo,[c.value.data.length===0?(n(),r("tr",Zo,[t("td",{colspan:c.value.columns.length||1,class:"px-4 py-8 text-center text-gray-500 dark:text-gray-400"}," \u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A ",8,Xo)])):b("",!0),(n(!0),r(S,null,B(c.value.data,(o,y)=>(n(),r("tr",{key:y,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[(n(!0),r(S,null,B(c.value.columns,x=>(n(),r("td",{key:`${y}-${x}`,class:"px-4 py-2 text-xs dark:text-gray-300 border-r border-gray-100 dark:border-gray-700 whitespace-nowrap"},i(Yt(o[x])),1))),128))]))),128))])])])):(n(),r("div",Yo,[e[69]||(e[69]=t("div",{class:"text-5xl mb-2"},"\u{1F4CB}",-1)),e[70]||(e[70]=t("p",null,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0623\u0639\u0645\u062F\u0629 \u0645\u062A\u0627\u062D\u0629 \u0644\u0644\u0639\u0631\u0636",-1)),t("p",tn,"\u0639\u062F\u062F \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A: "+i(c.value.data.length),1)])),c.value.total>c.value.limit?(n(),r("div",en,[t("div",sn," \u0639\u0631\u0636 "+i(c.value.offset+1)+" \u0625\u0644\u0649 "+i(Math.min(c.value.offset+c.value.limit,c.value.total))+" \u0645\u0646 "+i(c.value.total),1),t("div",an,[t("button",{onClick:e[12]||(e[12]=o=>qt(c.value.tableName,c.value.offset-c.value.limit,c.value.tableConnection)),disabled:c.value.offset===0,class:"px-3 py-1 border rounded disabled:opacity-50 dark:text-gray-200 dark:border-gray-600"}," \u0627\u0644\u0633\u0627\u0628\u0642 ",8,on),t("button",{onClick:e[13]||(e[13]=o=>qt(c.value.tableName,c.value.offset+c.value.limit,c.value.tableConnection)),disabled:c.value.offset+c.value.limit>=c.value.total,class:"px-3 py-1 border rounded disabled:opacity-50 dark:text-gray-200 dark:border-gray-600"}," \u0627\u0644\u062A\u0627\u0644\u064A ",8,nn)])])):b("",!0)])),t("div",rn,[t("button",{onClick:e[14]||(e[14]=o=>c.value.show=!1),class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," \u0625\u063A\u0644\u0627\u0642 ")])])]}),_:1},8,["show"]),W(Ne),U.value?(n(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e[22]||(e[22]=a=>U.value=!1)},[t("div",{class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[80vh] overflow-hidden",onClick:e[21]||(e[21]=Nt(()=>{},["stop"]))},[t("div",ln,[t("div",dn,[e[72]||(e[72]=t("h3",{class:"text-lg font-semibold dark:text-gray-200"},"\u{1F4E6} \u0627\u0633\u062A\u0639\u0627\u062F\u0629 \u062C\u062F\u0627\u0648\u0644 \u0645\u062D\u062F\u062F\u0629 \u0645\u0646 \u0627\u0644\u0646\u0633\u062E\u0629 \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629",-1)),t("button",{onClick:e[16]||(e[16]=a=>U.value=!1),class:"text-gray-400 hover:text-gray-600"},[...e[71]||(e[71]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),t("div",un,[t("div",cn,[e[74]||(e[74]=t("label",{class:"block text-sm font-medium mb-2 dark:text-gray-200"},"\u0627\u062E\u062A\u0631 \u0645\u0644\u0641 \u0627\u0644\u0646\u0633\u062E\u0629 \u0627\u0644\u0627\u062D\u062A\u064A\u0627\u0637\u064A\u0629:",-1)),Lt(t("select",{"onUpdate:modelValue":e[17]||(e[17]=a=>E.value=a),onChange:e[18]||(e[18]=a=>ie(E.value)),class:"w-full p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200"},[e[73]||(e[73]=t("option",{value:"null"},"\u0627\u062E\u062A\u0631 \u0645\u0644\u0641...",-1)),(n(!0),r(S,null,B(dt.value,a=>(n(),r("option",{key:a.name,value:a.name},i(a.name)+" ("+i(a.date)+") ",9,gn))),128))],544),[[be,E.value]])]),tt.value.length>0?(n(),r("div",yn,[e[75]||(e[75]=t("h4",{class:"text-md font-medium mb-3 dark:text-gray-200"},"\u0627\u062E\u062A\u0631 \u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0645\u0631\u0627\u062F \u0627\u0633\u062A\u0639\u0627\u062F\u062A\u0647\u0627:",-1)),t("div",vn,[(n(!0),r(S,null,B(tt.value,a=>(n(),r("label",{key:a,class:"flex items-center space-x-2 p-2 border rounded hover:bg-gray-50 dark:hover:bg-gray-700 dark:border-gray-600"},[Lt(t("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[19]||(e[19]=o=>_.value=o),class:"rounded border-gray-300 dark:border-gray-600 dark:bg-gray-700"},null,8,pn),[[Ft,_.value]]),t("span",xn,i(a),1)]))),128))])])):b("",!0),_.value.length>0?(n(),r("div",bn,[e[76]||(e[76]=t("h5",{class:"font-medium text-blue-900 dark:text-blue-100 mb-2"},"\u0627\u0644\u062C\u062F\u0627\u0648\u0644 \u0627\u0644\u0645\u062D\u062F\u062F\u0629 \u0644\u0644\u0627\u0633\u062A\u0639\u0627\u062F\u0629:",-1)),t("p",fn,i(_.value.join(", ")),1),t("p",mn,"\u0639\u062F\u062F \u0627\u0644\u062C\u062F\u0627\u0648\u0644: "+i(_.value.length),1)])):b("",!0)]),t("div",hn,[t("button",{onClick:e[20]||(e[20]=a=>U.value=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200"}," \u0625\u0644\u063A\u0627\u0621 "),t("button",{onClick:de,disabled:_.value.length===0,class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"}," \u{1F504} \u0627\u0633\u062A\u0639\u0627\u062F\u0629 \u0627\u0644\u0645\u062D\u062F\u062F ",8,wn)])])])):b("",!0)]),_:1})],64))}},Tn=Kt(_n,[["__scopeId","data-v-13edd01c"]]);export{Tn as default};
