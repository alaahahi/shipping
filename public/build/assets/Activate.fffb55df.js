import{u as j,p as C,r as _,j as V,c as $,w as k,o as c,g as i,q as n,H as B,b as e,t as w,a as g,i as F,x as T,n as N}from"./app.8c537d43.js";import{G as S}from"./GuestLayout.3321aad4.js";import{_ as q}from"./InputError.3286be47.js";import{_ as D}from"./InputLabel.3887da5b.js";import{_ as E}from"./PrimaryButton.5ddf69ad.js";import{_ as G}from"./TextInput.94901cd4.js";import{a as H}from"./index.f8de1ef0.js";import"./_plugin-vue_export-helper.cdc0426e.js";const M={class:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8"},O={class:"max-w-2xl w-full space-y-8"},z={class:"bg-white dark:bg-gray-800 shadow-xl rounded-lg p-8"},A={class:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},I={class:"space-y-2"},L={class:"flex items-center justify-between"},U={class:"flex items-center gap-2"},J={class:"text-sm font-mono bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded"},K={class:"flex items-center justify-between"},P={class:"flex items-center gap-2"},Q={class:"text-sm font-mono bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded max-w-xs truncate"},R={key:0,class:"mb-6 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg"},W={class:"flex items-center justify-between"},X={key:0},Y={key:1},Z=["href"],le={__name:"Activate",props:{license:Object,server:Object},setup(u){var p,y,f,v;const l=j(),d=u,a=C({license_key:"",domain:((p=d.server)==null?void 0:p.domain)||"",fingerprint:((y=d.server)==null?void 0:y.fingerprint)||""}),r=_(!1),o=_({domain:((f=d.server)==null?void 0:f.domain)||"",fingerprint:((v=d.server)==null?void 0:v.fingerprint)||""});V(async()=>{if(!o.value.domain||!o.value.fingerprint)try{const s=await H.get("/api/license/server-info");s.data.success&&(o.value={domain:s.data.domain,fingerprint:s.data.fingerprint},a.domain=s.data.domain,a.fingerprint=s.data.fingerprint)}catch(s){console.error("Failed to get server info:",s)}});const h=async()=>{r.value=!0,a.post(route("license.activate.post"),{onSuccess:s=>{l.success("\u062A\u0645 \u062A\u0641\u0639\u064A\u0644 \u0627\u0644\u062A\u0631\u062E\u064A\u0635 \u0628\u0646\u062C\u0627\u062D!"),setTimeout(()=>{window.location.href=route("dashboard")},1500)},onError:s=>{l.error(s.license_key||s.message||"\u0641\u0634\u0644 \u062A\u0641\u0639\u064A\u0644 \u0627\u0644\u062A\u0631\u062E\u064A\u0635"),r.value=!1},onFinish:()=>{r.value=!1}})},x=s=>{navigator.clipboard.writeText(s).then(()=>{l.success("\u062A\u0645 \u0627\u0644\u0646\u0633\u062E!")}).catch(()=>{l.error("\u0641\u0634\u0644 \u0627\u0644\u0646\u0633\u062E")})};return(s,t)=>(c(),$(S,null,{default:k(()=>{var b;return[i(n(B),{title:"\u062A\u0641\u0639\u064A\u0644 \u0627\u0644\u062A\u0631\u062E\u064A\u0635"}),e("div",M,[e("div",O,[t[9]||(t[9]=e("div",null,[e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white"}," \u{1F511} \u062A\u0641\u0639\u064A\u0644 \u0627\u0644\u0645\u0646\u062A\u062C "),e("p",{class:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400"}," \u0623\u062F\u062E\u0644 \u0645\u0641\u062A\u0627\u062D \u0627\u0644\u062A\u0631\u062E\u064A\u0635 \u0644\u062A\u0641\u0639\u064A\u0644 \u0627\u0644\u0645\u0646\u062A\u062C ")],-1)),e("div",z,[e("div",A,[t[5]||(t[5]=e("h3",{class:"text-lg font-semibold mb-3 text-gray-900 dark:text-white"}," \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0633\u064A\u0631\u0641\u0631 ",-1)),e("div",I,[e("div",L,[t[3]||(t[3]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Domain:",-1)),e("div",U,[e("code",J,w(o.value.domain),1),e("button",{onClick:t[0]||(t[0]=m=>x(o.value.domain)),class:"text-blue-500 hover:text-blue-700 text-sm",title:"\u0646\u0633\u062E"}," \u{1F4CB} ")])]),e("div",K,[t[4]||(t[4]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Fingerprint:",-1)),e("div",P,[e("code",Q,w(o.value.fingerprint),1),e("button",{onClick:t[1]||(t[1]=m=>x(o.value.fingerprint)),class:"text-blue-500 hover:text-blue-700 text-sm",title:"\u0646\u0633\u062E"}," \u{1F4CB} ")])])])]),(b=u.license)!=null&&b.activated?(c(),g("div",R,[...t[6]||(t[6]=[e("div",{class:"flex items-center"},[e("span",{class:"text-yellow-600 dark:text-yellow-400"},"\u26A0\uFE0F"),e("p",{class:"ml-2 text-sm text-yellow-800 dark:text-yellow-300"}," \u064A\u0648\u062C\u062F \u062A\u0631\u062E\u064A\u0635 \u0645\u0641\u0639\u0644 \u062D\u0627\u0644\u064A\u0627\u064B. \u0625\u062F\u062E\u0627\u0644 \u0645\u0641\u062A\u0627\u062D \u062C\u062F\u064A\u062F \u0633\u064A\u0633\u062A\u0628\u062F\u0644 \u0627\u0644\u062A\u0631\u062E\u064A\u0635 \u0627\u0644\u062D\u0627\u0644\u064A. ")],-1)])])):F("",!0),e("form",{onSubmit:T(h,["prevent"]),class:"space-y-6"},[e("div",null,[i(D,{for:"license_key",value:"\u0645\u0641\u062A\u0627\u062D \u0627\u0644\u062A\u0631\u062E\u064A\u0635"}),i(G,{id:"license_key",type:"text",class:"mt-1 block w-full font-mono text-sm",modelValue:n(a).license_key,"onUpdate:modelValue":t[2]||(t[2]=m=>n(a).license_key=m),placeholder:"\u0623\u062F\u062E\u0644 \u0645\u0641\u062A\u0627\u062D \u0627\u0644\u062A\u0631\u062E\u064A\u0635 \u0647\u0646\u0627...",required:"",autofocus:"",disabled:r.value},null,8,["modelValue","disabled"]),i(q,{class:"mt-2",message:n(a).errors.license_key},null,8,["message"]),t[7]||(t[7]=e("p",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," \u{1F4A1} \u0627\u062D\u0635\u0644 \u0639\u0644\u0649 \u0645\u0641\u062A\u0627\u062D \u0627\u0644\u062A\u0631\u062E\u064A\u0635 \u0645\u0646 \u0627\u0644\u0645\u0637\u0648\u0631 \u0623\u0648 \u0627\u0644\u0645\u0633\u0624\u0648\u0644 ",-1))]),e("div",W,[i(E,{class:N({"opacity-25":n(a).processing||r.value}),disabled:n(a).processing||r.value},{default:k(()=>[r.value?(c(),g("span",X,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u0641\u0639\u064A\u0644...")):(c(),g("span",Y,"\u062A\u0641\u0639\u064A\u0644 \u0627\u0644\u0622\u0646"))]),_:1},8,["class","disabled"]),e("a",{href:s.route("license.status"),class:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}," \u0639\u0631\u0636 \u062D\u0627\u0644\u0629 \u0627\u0644\u062A\u0631\u062E\u064A\u0635 ",8,Z)])],32),t[8]||(t[8]=e("div",{class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},[e("p",{class:"text-xs text-gray-500 dark:text-gray-400 text-center"}," \u{1F4A1} \u0644\u0644\u0645\u0633\u0627\u0639\u062F\u0629\u060C \u064A\u0631\u062C\u0649 \u0627\u0644\u062A\u0648\u0627\u0635\u0644 \u0645\u0639 \u0627\u0644\u062F\u0639\u0645 \u0627\u0644\u0641\u0646\u064A ")],-1))])])])]}),_:1}))}};export{le as default};
