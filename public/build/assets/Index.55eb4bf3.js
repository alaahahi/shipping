import{u as H,r as x,m as O,j as R,a as n,g as j,q as F,w as S,F as $,o as d,H as A,b as e,t as o,n as B,h as L,c as G,i as y,x as p,L as J,e as _,v as P,k as K}from"./app.8c537d43.js";import{_ as Q}from"./AuthenticatedLayout.e6ff6356.js";import{a as f}from"./index.f8de1ef0.js";import"./_plugin-vue_export-helper.cdc0426e.js";const W={class:"py-6 sm:py-12"},X={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Y={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},Z={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 border border-gray-200 dark:border-gray-700"},tt={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},et={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 border border-gray-200 dark:border-gray-700"},rt={class:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1"},st={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 border border-gray-200 dark:border-gray-700"},ot={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 border border-gray-200 dark:border-gray-700"},at={class:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1"},dt={key:0,class:"text-center py-12"},nt={key:1,class:"space-y-4"},lt={class:"p-6"},it={class:"flex items-center justify-between mb-6 pb-4 border-b border-gray-200 dark:border-gray-700"},gt={class:"flex-1"},ut={class:"text-2xl font-bold text-gray-900 dark:text-white mb-2",style:{"text-decoration":"underline","text-underline-offset":"4px"}},ct={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},xt={class:"text-left ml-6 px-4 py-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},yt={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},pt={class:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4"},mt={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},bt={class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4"},ft={class:"text-2xl font-bold text-gray-900 dark:text-white"},kt={class:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4"},vt={class:"text-2xl font-bold text-green-600 dark:text-green-400"},_t={class:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4"},ht={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},wt=["onClick"],Ct=["onClick"],St={key:0,class:"text-center py-12 text-gray-500 dark:text-gray-400"},$t={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6"},Bt={class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},Pt={class:"space-y-4"},Dt={class:"flex gap-2 mt-6"},Mt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6"},Vt={class:"flex items-center justify-between mb-4"},jt={class:"text-lg font-bold text-gray-900 dark:text-white"},Ft={key:0,class:"space-y-3"},Lt={class:"flex items-start justify-between"},Ut={class:"flex-1"},It={class:"flex items-center gap-4 mb-2"},Tt={class:"text-sm font-medium text-gray-900 dark:text-white"},qt={class:"text-sm text-gray-500 dark:text-gray-400"},zt={class:"text-lg font-bold text-green-600 dark:text-green-400 mb-1"},Nt={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},Et={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Ht={class:"flex gap-2"},Ot=["onClick"],Rt=["onClick"],At={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Xt={__name:"Index",setup(Gt){const l=H(),k=x([]),h=x(!1),g=x(null),m=x(!1),v=x(!1),U=x(null),i=x({consignee_id:null,trip_id:null,amount:"",currency:"dollar",notes:"",payment_date:new Date().toISOString().split("T")[0]}),w=async()=>{h.value=!0;try{const s=await f.get("/api/consignee-balances");s.data.success?k.value=s.data.balances:l.error(s.data.message||"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062C\u0644\u0628 \u0627\u0644\u0623\u0631\u0635\u062F\u0629")}catch(s){console.error(s),l.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062C\u0644\u0628 \u0627\u0644\u0623\u0631\u0635\u062F\u0629")}finally{h.value=!1}},c=(s,t="dollar")=>s?parseFloat(s).toLocaleString("en-US",{maximumFractionDigits:0})+" "+(t==="dollar"?"$":"\u062F\u064A\u0646\u0627\u0631"):"0",I=s=>s?new Date(s).toLocaleDateString("en-US"):"",D=s=>s>0?"text-red-600 dark:text-red-400":s<0?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400",T=s=>{var a;g.value=s;const t=s.primary_consignee_id||((a=s.consignee_ids)==null?void 0:a[0])||s.consignee_id;if(!t){l.error("\u0644\u0627 \u064A\u0645\u0643\u0646 \u0625\u0636\u0627\u0641\u0629 \u062F\u0641\u0639\u0629: \u0644\u0627 \u064A\u0648\u062C\u062F \u0632\u0628\u0648\u0646 \u0645\u0631\u062A\u0628\u0637 \u0628\u0647\u0630\u0647 \u0627\u0644\u0634\u0631\u0643\u0629");return}i.value={consignee_id:t,trip_id:null,amount:"",currency:"dollar",notes:"",payment_date:new Date().toISOString().split("T")[0]},m.value=!0},q=async()=>{var s,t;if(!i.value.amount||parseFloat(i.value.amount)<=0){l.error("\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0645\u0628\u0644\u063A \u0635\u062D\u064A\u062D");return}try{const a=await f.post("/api/consignee-balances/payments",i.value);a.data.success?(l.success("\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D"),m.value=!1,await w()):l.error(a.data.message||"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u062F\u0641\u0639\u0629")}catch(a){console.error(a);const u=((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u062F\u0641\u0639\u0629";l.error(u)}},z=async s=>{if(!!confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u062F\u0641\u0639\u0629\u061F"))try{const t=await f.delete(`/api/consignee-balances/payments/${s}`);t.data.success?(l.success("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D"),await w()):l.error(t.data.message||"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629")}catch(t){console.error(t),l.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629")}},N=async s=>{var a;g.value=s;const t=s.primary_consignee_id||((a=s.consignee_ids)==null?void 0:a[0])||s.consignee_id;if(!t){l.error("\u0644\u0627 \u064A\u0645\u0643\u0646 \u0639\u0631\u0636 \u0627\u0644\u062F\u0641\u0639\u0627\u062A: \u0644\u0627 \u064A\u0648\u062C\u062F \u0632\u0628\u0648\u0646 \u0645\u0631\u062A\u0628\u0637 \u0628\u0647\u0630\u0647 \u0627\u0644\u0634\u0631\u0643\u0629");return}try{const u=await f.get(`/api/consignee-balances/${t}/payments`);u.data.success&&(g.value.payments=u.data.payments,v.value=!0)}catch(u){console.error(u),l.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062C\u0644\u0628 \u0627\u0644\u062F\u0641\u0639\u0627\u062A")}},E=async s=>{try{const t=await f.get(`/api/consignee-balances/payments/${s}/receipt`);t.data.success&&(U.value=t.data.payment,window.print())}catch(t){console.error(t),l.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0648\u0635\u0644")}},b=O(()=>{const s={totalShippingCost:0,totalPaid:0,totalBalance:0,totalCars:0};return k.value.forEach(t=>{s.totalShippingCost+=t.total_shipping_cost||0,s.totalPaid+=t.total_paid_dollar||0,s.totalBalance+=t.balance_dollar||0,s.totalCars+=t.total_cars||0}),s});return R(()=>{w()}),(s,t)=>(d(),n($,null,[j(F(A),{title:"\u0623\u0631\u0635\u062F\u0629 \u0627\u0644\u0632\u0628\u0627\u0626\u0646"}),j(Q,null,{header:S(()=>[...t[9]||(t[9]=[e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," \u0623\u0631\u0635\u062F\u0629 \u0627\u0644\u0632\u0628\u0627\u0626\u0646 (Consignees) ",-1)])]),default:S(()=>{var a,u,M,V;return[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0633\u062A\u062D\u0642",-1)),e("p",tt,o(c(b.value.totalShippingCost)),1)]),e("div",et,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062F\u0641\u0639\u0627\u062A",-1)),e("p",rt,o(c(b.value.totalPaid)),1)]),e("div",st,[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u0645\u0633\u062A\u062D\u0642",-1)),e("p",{class:B(["text-2xl font-bold mt-1",D(b.value.totalBalance)])},o(c(b.value.totalBalance)),3)]),e("div",ot,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0633\u064A\u0627\u0631\u0627\u062A",-1)),e("p",at,o(b.value.totalCars),1)])]),h.value?(d(),n("div",dt,[...t[14]||(t[14]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),e("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644...",-1)])])):(d(),n("div",nt,[(d(!0),n($,null,L(k.value,r=>(d(),G(F(J),{key:r.company_id||r.consignee_id,href:s.route("consigneeBalances.show",r.company_id||r.consignee_id),class:B(["block bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 border-l-4",[r.balance_dollar>0?"border-red-500":r.balance_dollar<0?"border-green-500":"border-gray-400"]])},{default:S(()=>[e("div",lt,[e("div",it,[e("div",gt,[e("h3",ut,o(r.company_name||r.consignee_name||r.name||"\u0634\u0631\u0643\u0629 \u063A\u064A\u0631 \u0645\u0639\u0631\u0648\u0641\u0629"),1),r.company_phone||r.consignee_phone||r.phone?(d(),n("p",ct," \u{1F4DE} "+o(r.company_phone||r.consignee_phone||r.phone),1)):y("",!0)]),e("div",xt,[t[15]||(t[15]=e("p",{class:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"},"\u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u0645\u0633\u062A\u062D\u0642",-1)),e("p",{class:B(["text-3xl font-bold",D(r.balance_dollar)])},o(c(r.balance_dollar)),3)])]),e("div",yt,[e("div",pt,[t[16]||(t[16]=e("p",{class:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1"},"\u0639\u062F\u062F \u0627\u0644\u0633\u064A\u0627\u0631\u0627\u062A",-1)),e("p",mt,o(r.total_cars),1)]),e("div",bt,[t[17]||(t[17]=e("p",{class:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1"},"\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0645\u0633\u062A\u062D\u0642",-1)),e("p",ft,o(c(r.total_shipping_cost)),1)]),e("div",kt,[t[18]||(t[18]=e("p",{class:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1"},"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062F\u0641\u0639\u0627\u062A",-1)),e("p",vt,o(c(r.total_paid_dollar)),1)]),e("div",_t,[t[19]||(t[19]=e("p",{class:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1"},"\u0639\u062F\u062F \u0627\u0644\u062F\u0641\u0639\u0627\u062A",-1)),e("p",ht,o(r.payments_count||0),1)])]),e("div",{class:"flex gap-3",onClick:t[0]||(t[0]=p(()=>{},["stop"]))},[e("button",{onClick:p(C=>T(r),["stop","prevent"]),class:"flex-1 px-5 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors shadow-sm"}," \u2795 \u0625\u0636\u0627\u0641\u0629 \u062F\u0641\u0639\u0629 ",8,wt),e("button",{onClick:p(C=>N(r),["stop","prevent"]),class:"flex-1 px-5 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"}," \u{1F441}\uFE0F \u0639\u0631\u0636 \u0627\u0644\u062F\u0641\u0639\u0627\u062A ",8,Ct)])])]),_:2},1032,["href","class"]))),128)),k.value.length===0?(d(),n("div",St," \u0644\u0627 \u062A\u0648\u062C\u062F \u0623\u0631\u0635\u062F\u0629 \u0644\u0644\u0639\u0631\u0636 ")):y("",!0)]))])]),m.value?(d(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t[6]||(t[6]=p(r=>m.value=!1,["self"]))},[e("div",$t,[e("h3",Bt," \u0625\u0636\u0627\u0641\u0629 \u062F\u0641\u0639\u0629 - "+o((a=g.value)==null?void 0:a.consignee_name),1),e("form",{onSubmit:p(q,["prevent"])},[e("div",Pt,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," \u0627\u0644\u0645\u0628\u0644\u063A ",-1)),_(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>i.value.amount=r),type:"number",step:"0.01",min:"0.01",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"0.00"},null,512),[[P,i.value.amount,void 0,{number:!0}]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," \u0627\u0644\u0639\u0645\u0644\u0629 ",-1)),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>i.value.currency=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"},[...t[21]||(t[21]=[e("option",{value:"dollar"},"\u062F\u0648\u0644\u0627\u0631 ($)",-1),e("option",{value:"dinar"},"\u062F\u064A\u0646\u0627\u0631",-1)])],512),[[K,i.value.currency]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062F\u0641\u0639\u0629 ",-1)),_(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>i.value.payment_date=r),type:"date",required:"",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white"},null,512),[[P,i.value.payment_date]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," \u0645\u0644\u0627\u062D\u0638\u0627\u062A (\u0627\u062E\u062A\u064A\u0627\u0631\u064A) ",-1)),_(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=r=>i.value.notes=r),rows:"3",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629..."},null,512),[[P,i.value.notes]])])]),e("div",Dt,[t[25]||(t[25]=e("button",{type:"submit",class:"flex-1 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700"}," \u062D\u0641\u0638 ",-1)),e("button",{type:"button",onClick:t[5]||(t[5]=r=>m.value=!1),class:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600"}," \u0625\u0644\u063A\u0627\u0621 ")])],32)])])):y("",!0),v.value?(d(),n("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t[8]||(t[8]=p(r=>v.value=!1,["self"]))},[e("div",Mt,[e("div",Vt,[e("h3",jt," \u062F\u0641\u0639\u0627\u062A "+o(((u=g.value)==null?void 0:u.company_name)||((M=g.value)==null?void 0:M.consignee_name)||"\u0627\u0644\u0634\u0631\u0643\u0629"),1),e("button",{onClick:t[7]||(t[7]=r=>v.value=!1),class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}," \u2715 ")]),((V=g.value)==null?void 0:V.payments)&&g.value.payments.length>0?(d(),n("div",Ft,[(d(!0),n($,null,L(g.value.payments,r=>(d(),n("div",{key:r.id,class:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600"},[e("div",Lt,[e("div",Ut,[e("div",It,[e("span",Tt," \u0631\u0642\u0645 \u0627\u0644\u0648\u0635\u0644: "+o(r.receipt_number),1),e("span",qt,o(I(r.payment_date)),1)]),e("p",zt,o(c(r.amount,r.currency)),1),r.notes?(d(),n("p",Nt,o(r.notes),1)):y("",!0),r.trip?(d(),n("p",Et," \u0627\u0644\u0631\u062D\u0644\u0629: "+o(r.trip.ship_name)+" - "+o(r.trip.voy_no),1)):y("",!0)]),e("div",Ht,[e("button",{onClick:C=>E(r.id),class:"px-3 py-1 text-xs font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 rounded hover:bg-blue-100 dark:hover:bg-blue-900/30"}," \u0637\u0628\u0627\u0639\u0629 ",8,Ot),e("button",{onClick:C=>z(r.id),class:"px-3 py-1 text-xs font-medium text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20 rounded hover:bg-red-100 dark:hover:bg-red-900/30"}," \u062D\u0630\u0641 ",8,Rt)])])]))),128))])):(d(),n("div",At," \u0644\u0627 \u062A\u0648\u062C\u062F \u062F\u0641\u0639\u0627\u062A "))])])):y("",!0)]}),_:1})],64))}};export{Xt as default};
