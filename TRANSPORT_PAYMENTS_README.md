# ๐ ูุธุงู ุฏูุนุงุช ุงูููู ุงูุฏุงุฎูู

## โ ูุง ุชู ุฅูุฌุงุฒู

### **ุงูุชุบููุฑ ุงูุฑุฆูุณู:**
ุจุฏูุงู ูู ุฅุฏุฎุงู **ูุจูุบ ูุงุญุฏ ููู** ููููู ุงูุฏุงุฎููุ ุงูุขู ููููู:
- โ ุฅุฏุฎุงู ุฏูุนุงุช ูุชุนุฏุฏุฉ
- โ ูู ุฏูุนุฉ ููุง: **ุงููุจูุบ + ุงุณู ุงูุณุงุฆู + ุฑูู CMR + ุงูุชุงุฑูุฎ**
- โ **ุงููุฌููุน ููุญุณุจ ุชููุงุฆูุงู** ูู ุฌููุน ุงูุฏูุนุงุช
- โ ุงูุชูุฒูุน ุงูุชููุงุฆู ุนูู ุงูุณูุงุฑุงุช
- โ ุงูุญุณุงุจ ุงูููุงุฆู: **ุงูุชุฎููุต + ูุฌููุน ุงูููู**

---

## ๐ฆ ุงููููุงุช ุงูุฌุฏูุฏุฉ

### **ูุงุนุฏุฉ ุงูุจูุงูุงุช:**
```
โ database/migrations/2026_01_18_130135_create_internal_transport_payments_table.php
โ sql_transport_payments_system.sql (ููุณูุฑูุฑ)
```

### **Backend:**
```
โ app/Models/InternalTransportPayment.php (Model ุฌุฏูุฏ)
โ app/Models/TripCompany.php (ูุญุฏุซ)
โ app/Http/Controllers/CompanyBalanceController.php (ูุญุฏุซ)
โ routes/api.php (ูุญุฏุซ)
```

### **Frontend:**
```
โ resources/js/Pages/CompanyBalances/Show.vue (ูุญุฏุซ ุจุงููุงูู)
```

---

## ๐ฏ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. **ุฅุถุงูุฉ ุฏูุนุฉ ููู:**
```
- ุงููุจูุบ (ุฏููุงุฑ)
- ุงุณู ุงูุณุงุฆู
- ุฑูู CMR (ุงุฎุชูุงุฑู)
- ุชุงุฑูุฎ ุงูุฏูุนุฉ (ุงูุชุฑุงุถู: ุงูููู)
- ููุงุญุธุงุช (ุงุฎุชูุงุฑู)
```

### 2. **ุนุฑุถ ุงูุฏูุนุงุช:**
```
- ูุงุฆูุฉ ุฌููุน ุงูุฏูุนุงุช
- ุชูุงุตูู ูู ุฏูุนุฉ
- ุงููุฌููุน ุงูููู
- ุงูููู ููู ุณูุงุฑุฉ
- ุนุฏุฏ ุงูุฏูุนุงุช
```

### 3. **ุฅุฏุงุฑุฉ ุงูุฏูุนุงุช:**
```
- ุฅุถุงูุฉ ุฏูุนุฉ ุฌุฏูุฏุฉ
- ุชุนุฏูู ุฏูุนุฉ ููุฌูุฏุฉ
- ุญุฐู ุฏูุนุฉ
- ุชุญุฏูุซ ุชููุงุฆู ูููุฌููุน
```

### 4. **ุงูุญุณุงุจุงุช ุงูุชููุงุฆูุฉ:**
```
ูุฌููุน ุงูููู = SUM(ุฌููุน ุงูุฏูุนุงุช)
ุงูููู ููู ุณูุงุฑุฉ = ูุฌููุน ุงูููู รท ุนุฏุฏ ุงูุณูุงุฑุงุช
ุงูุฅุฌูุงูู = ุงูุชุฎููุต + ูุฌููุน ุงูููู
```

---

## ๐งฎ ูุซุงู ุนููู

### **ุงูุณููุงุฑูู:**
```
ุงูุดุฑูุฉ: ุงูููู ุงูุณุฑูุน
ุงูุฑุญูุฉ: NOOR 91
ุนุฏุฏ ุงูุณูุงุฑุงุช: 50
ุงูุชุฎููุต: 40 ุฏููุงุฑ/ุณูุงุฑุฉ
```

### **ุงูุฏูุนุงุช:**
```
1. 500 ุฏููุงุฑ - ุฃุญูุฏ ูุญูุฏ - CMR-001 - 2026-01-10
2. 300 ุฏููุงุฑ - ุฎุงูุฏ ุนูู - CMR-002 - 2026-01-12
3. 700 ุฏููุงุฑ - ูุญูุฏ ุญุณู - CMR-003 - 2026-01-15
```

### **ุงูุญุณุงุจุงุช:**
```
ูุฌููุน ุงูููู: 500 + 300 + 700 = 1,500 ุฏููุงุฑ
ุงูููู ููู ุณูุงุฑุฉ: 1,500 รท 50 = 30 ุฏููุงุฑ

ุงูุชุฎููุต: 40 ร 50 = 2,000 ุฏููุงุฑ

ุงูุฅุฌูุงูู ุงูููู: 2,000 + 1,500 = 3,500 ุฏููุงุฑ โ
```

---

## ๐ ุงูุชุซุจูุช

### **1. ุนูู ุงูุณูุฑูุฑ (SQL):**
```bash
mysql -u root -p your_database < sql_transport_payments_system.sql
```

### **2. ูุญููุงู (Laravel):**
```bash
php artisan migrate
```

### **3. ุงูุชุญุฏูุซ:**
```bash
php artisan route:cache
npm run build
```

---

## ๐ฑ ุงูุงุณุชุฎุฏุงู

### **1. ุงูุชุญ ุตูุญุฉ ุงูุดุฑูุฉ:**
```
http://your-domain.com/company-balances/{companyId}
```

### **2. ุงุฐูุจ ููุดุญูุฉ ุงููุทููุจุฉ:**
```
- ุณุชุฌุฏ ูุณู "ุฏูุนุงุช ุงูููู ุงูุฏุงุฎูู"
```

### **3. ุฅุถุงูุฉ ุฏูุนุฉ:**
```
- ุงููุฑ "+ ุฅุถุงูุฉ ุฏูุนุฉ"
- ุฃุฏุฎู ุงูุจูุงูุงุช:
  * ุงููุจูุบ: 500
  * ุงุณู ุงูุณุงุฆู: ุฃุญูุฏ ูุญูุฏ
  * ุฑูู CMR: CMR-001
  * ุงูุชุงุฑูุฎ: (ุงูุชุฑุงุถู ุงูููู)
  * ููุงุญุธุงุช: (ุงุฎุชูุงุฑู)
- ุงููุฑ "ุฅุถุงูุฉ"
```

### **4. ุงููุชูุฌุฉ:**
```
โ ุงูุฏูุนุฉ ุชูุถุงู ูููุงุฆูุฉ
โ ุงููุฌููุน ููุญุฏุซ ุชููุงุฆูุงู
โ ุงูููู ููู ุณูุงุฑุฉ ููุญุณุจ
โ ุงูุฅุฌูุงูู ุงูููู ููุญุฏุซ
```

---

## ๐ง API Endpoints

### **1. ุฅุถุงูุฉ ุฏูุนุฉ:**
```http
POST /api/company-shipments/{shipmentId}/transport-payments

Body:
{
  "amount": 500,
  "driver_name": "ุฃุญูุฏ ูุญูุฏ",
  "cmr_number": "CMR-001",
  "payment_date": "2026-01-18",
  "notes": "ููุงุญุธุงุช ุงุฎุชูุงุฑูุฉ"
}
```

### **2. ุชุญุฏูุซ ุฏูุนุฉ:**
```http
PUT /api/transport-payments/{paymentId}

Body:
{
  "amount": 600,
  "driver_name": "ุฃุญูุฏ ูุญูุฏ ุงููุญุฏุซ",
  "cmr_number": "CMR-001-UPDATED",
  "payment_date": "2026-01-19",
  "notes": "ุชุญุฏูุซ"
}
```

### **3. ุญุฐู ุฏูุนุฉ:**
```http
DELETE /api/transport-payments/{paymentId}
```

---

## ๐จ ุงููุงุฌูุฉ

### **ูุณู ุฏูุนุงุช ุงูููู:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุฏูุนุงุช ุงูููู ุงูุฏุงุฎูู   [+ ุฅุถุงูุฉ]   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ ุฃุญูุฏ ูุญูุฏ                       โ โ
โ โ CMR: CMR-001 | 2026-01-10       โ โ
โ โ                        500.00 $ โ โ
โ โ [ุชุนุฏูู] | [ุญุฐู]                โ โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                     โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ ุฎุงูุฏ ุนูู                        โ โ
โ โ CMR: CMR-002 | 2026-01-12       โ โ
โ โ                        300.00 $ โ โ
โ โ [ุชุนุฏูู] | [ุญุฐู]                โ โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุงููุฌููุน ุงูููู:      1,500.00 $     โ
โ ููู ุณูุงุฑุฉ:             30.00 $     โ
โ ุนุฏุฏ ุงูุฏูุนุงุช:                  3    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### **Modal ุฅุถุงูุฉ/ุชุนุฏูู ุฏูุนุฉ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุฅุถุงูุฉ ุฏูุนุฉ ููู ุฌุฏูุฏุฉ               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุงููุจูุบ (ุฏููุงุฑ) *                    โ
โ [________________]                  โ
โ                                     โ
โ ุงุณู ุงูุณุงุฆู *                        โ
โ [________________]                  โ
โ                                     โ
โ ุฑูู CMR                             โ
โ [________________]                  โ
โ                                     โ
โ ุชุงุฑูุฎ ุงูุฏูุนุฉ *                      โ
โ [2026-01-18______]                  โ
โ                                     โ
โ ููุงุญุธุงุช                            โ
โ [________________]                  โ
โ                                     โ
โ [ุฅุถุงูุฉ]  [ุฅูุบุงุก]                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐พ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### **ุงูุฌุฏูู ุงูุฌุฏูุฏ:**
```sql
internal_transport_payments:
  - id
  - trip_company_id (FK โ trip_companies)
  - amount (ุงููุจูุบ)
  - driver_name (ุงุณู ุงูุณุงุฆู)
  - cmr_number (ุฑูู CMR)
  - payment_date (ุงูุชุงุฑูุฎ)
  - notes (ููุงุญุธุงุช)
  - owner_id
  - created_at
  - updated_at
```

### **ุงูุนูุงูุงุช:**
```
TripCompany hasMany InternalTransportPayment
InternalTransportPayment belongsTo TripCompany
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### **1. ุชุญูู ูู ุงูุฌุฏูู:**
```sql
DESCRIBE internal_transport_payments;
```

### **2. ุฅุถุงูุฉ ุฏูุนุฉ ุชุฌุฑูุจูุฉ:**
```sql
INSERT INTO internal_transport_payments 
(trip_company_id, amount, driver_name, cmr_number, payment_date, owner_id, created_at, updated_at)
VALUES 
(1, 500.00, 'ุฃุญูุฏ ูุญูุฏ', 'CMR-001', '2026-01-18', 1, NOW(), NOW());
```

### **3. ุญุณุงุจ ุงููุฌููุน:**
```sql
SELECT 
    trip_company_id,
    COUNT(*) AS payments_count,
    SUM(amount) AS total_transport
FROM internal_transport_payments
WHERE trip_company_id = 1
GROUP BY trip_company_id;
```

---

## ๐ก ููุงุญุธุงุช ูููุฉ

### **1. CMR Number:**
```
- ุฑูู ูุซููุฉ ุงูููู ุงูุฏูููุฉ
- ุงุฎุชูุงุฑู (ูููู ุชุฑูู ูุงุฑุบุงู)
- ููุณุชุฎุฏู ููุชุชุจุน ูุงููุฑุฌุนูุฉ
```

### **2. ุงูุชุงุฑูุฎ ุงูุงูุชุฑุงุถู:**
```
- ุนูุฏ ูุชุญ Modalุ ุงูุชุงุฑูุฎ ูููู ุงูููู ุชููุงุฆูุงู
- ูููู ุชุบููุฑู ุญุณุจ ุงูุญุงุฌุฉ
```

### **3. ุงูุญุฐู:**
```
- ุนูุฏ ุญุฐู trip_companyุ ุชูุญุฐู ุฌููุน ุฏูุนุงุชูุง ุชููุงุฆูุงู (CASCADE)
- ุนูุฏ ุญุฐู ุฏูุนุฉุ ููุญุฏุซ ุงููุฌููุน ุชููุงุฆูุงู
```

### **4. ุงูุญุณุงุจุงุช:**
```
- ุฌููุน ุงูุญุณุงุจุงุช ุชููุงุฆูุฉ
- ูุง ุญุงุฌุฉ ูุญุณุงุจุงุช ูุฏููุฉ
- ุงูุชุญุฏูุซ ููุฑู
```

---

## ๐ ุงูููุงุฆุฏ

### **ูุจู:**
```
โ ูุจูุบ ูุงุญุฏ ููุท
โ ูุง ุชูุงุตูู ุนู ุงูุณุงุฆููู
โ ูุง ุชูุงุฑูุฎ ูููุตูุฉ
โ ุตุนูุจุฉ ุงูุชุชุจุน
```

### **ุจุนุฏ:**
```
โ ุฏูุนุงุช ูุชุนุฏุฏุฉ
โ ุชูุงุตูู ูุงููุฉ ููู ุฏูุนุฉ
โ ุชูุงุฑูุฎ ูููุตูุฉ
โ ุณูููุฉ ุงูุชุชุจุน ูุงููุฑุงุฌุนุฉ
โ ุฑูู CMR ููู ุฏูุนุฉ
โ ููุงุญุธุงุช ุฅุถุงููุฉ
โ ุญุณุงุจุงุช ุชููุงุฆูุฉ
```

---

## ๐ ุงูุฏุนู

### **ูููุณุงุนุฏุฉ:**
1. ุฑุงุฌุน ูุฐุง ุงูููู
2. ุงูุชุญ `sql_transport_payments_system.sql`
3. ุชุญูู ูู console ููุฃุฎุทุงุก

### **ุงููููุงุช ุงููููุฉ:**
```
๐ TRANSPORT_PAYMENTS_README.md (ูุฐุง ุงูููู)
๐ sql_transport_payments_system.sql (SQL ููุณูุฑูุฑ)
๐ COMPANY_SYSTEM_README.md (ุงูุฏููู ุงูุฃุณุงุณู)
```

---

## โ ุงูุญุงูุฉ

```
โ ูุงุนุฏุฉ ุงูุจูุงูุงุช: ุฌุงูุฒุฉ
โ Backend: ูุงูู
โ Frontend: ูุญุฏุซ
โ API: ุชุนูู
โ ุงูุญุณุงุจุงุช: ุชููุงุฆูุฉ
โ ุงูุงุฎุชุจุงุฑ: ูุงุฌุญ
```

---

**ุชุงุฑูุฎ**: 2026-01-18  
**ุงูุฅุตุฏุงุฑ**: 2.1.0  
**ุงูุญุงูุฉ**: ๐ข ุฌุงูุฒ ููุงุณุชุฎุฏุงู  

---

**๐ ูุธุงู ุฏูุนุงุช ุงูููู ุฌุงูุฒ 100%!**

**ุงุจุฏุฃ ุจุฅุถุงูุฉ ุฏูุนุงุช ุงูููู ุงูุขู! ๐**
