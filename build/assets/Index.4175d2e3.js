import{o as u,c as q,w as f,a as p,b as e,d as P,t as r,e as N,v as I,i as C,T as Q,r as c,D as U,g as s,j as n,F as B,H as X,k as E,z as Y,l as Z,h as ee,n as te,L as z}from"./app.23a3a1da.js";import{a as oe,_ as ae}from"./AuthenticatedLayout.576be397.js";/* empty css                                              *//* empty css                                                         */import{_ as h}from"./InputLabel.0de82518.js";import{_ as L}from"./TextInput.76090f74.js";import{a as $}from"./index.49e48e5d.js";import{s as se}from"./show.aa650ab9.js";import"./trash.77285464.js";import{e as re}from"./edit.0831bebd.js";import{M as le}from"./ModalDelCar.812f3ea7.js";import{W as de}from"./v3-infinite-loading.es.44866ae8.js";import{d as ne}from"./debounce.2d09b29f.js";/* empty css                                                    */const ie={key:0,class:"modal-mask"},ce={class:"modal-wrapper max-h-[80vh]"},me={class:"modal-container dark:bg-gray-900 overflow-auto max-h-[80vh]"},ue={class:"modal-header"},pe={class:"modal-body"},be=e("h2",{class:"text-center dark:text-gray-200"}," \u062A\u0639\u062F\u064A\u0644 \u0632\u0628\u0648\u0646 ",-1),he={className:"mb-4 mx-5"},fe={class:"dark:text-gray-200",for:"name"},ge={className:"mb-4 mx-5"},_e={class:"dark:text-gray-200",for:"phone"},ve={class:"modal-footer my-2"},ye={class:"flex flex-row"},xe={class:"basis-1/2 px-4"},ke={class:"basis-1/2 px-4"},we=["disabled"],j={__name:"ModalEditClient",props:{show:Boolean,formData:Object},setup(m){return(l,d)=>(u(),q(Q,{name:"modal"},{default:f(()=>[m.show?(u(),p("div",ie,[e("div",ce,[e("div",me,[e("div",ue,[P(l.$slots,"header")]),e("div",pe,[be,e("div",he,[e("label",fe,r(l.$t("name")),1),N(e("input",{id:"name",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":d[0]||(d[0]=i=>m.formData.name=i)},null,512),[[I,m.formData.name]])]),e("div",ge,[e("label",_e,r(l.$t("phone")),1),N(e("input",{id:"phone",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":d[1]||(d[1]=i=>m.formData.phone=i)},null,512),[[I,m.formData.phone]])])]),e("div",ve,[e("div",ye,[e("div",xe,[e("button",{class:"modal-default-button py-3 bg-gray-500 rounded",onClick:d[2]||(d[2]=i=>{l.$emit("close")})},r(l.$t("cancel")),1)]),e("div",ke,[e("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6",onClick:d[3]||(d[3]=i=>{l.$emit("a",m.formData),m.formData=""}),disabled:!m.formData.name},r(l.$t("yes")),9,we)])])])])])])):C("",!0)]),_:3}))}},$e={},Ce={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},Ne=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a2.25 2.25 0 00-2.25-2.25H15a3 3 0 11-6 0H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 9m18 0V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v3"},null,-1),De=[Ne];function Me(m,l){return u(),p("svg",Ce,De)}const Ve=oe($e,[["render",Me]]);const Ae={class:"mb-5 dark:text-white text-center"},Be={class:"py-12"},Ee={class:"mx-auto sm:px-6 lg:px-8"},Ie={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},He={class:"p-6 dark:bg-gray-900"},Ue={class:"grid grid-cols-2 md:grid-cols-5 lg:grid-cols-7 gap-2 lg:gap-1"},ze={class:"flex items-center max-w-5xl"},Le=e("label",{class:"dark:text-gray-200",for:"simple-search"},null,-1),je={class:"relative w-full"},qe=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-200 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),Re={value:"0"},Se=e("option",{value:"debit"},"\u064A\u0648\u062C\u062F \u062F\u064A\u0646",-1),Te={class:"text-center px-4"},Fe={class:"px-4"},Oe={className:"mb-4"},Ge={class:"px-4"},We={className:"mb-4"},Je={className:"mb-4  mr-5 print:hidden"},Ke={key:0},Pe={key:1},Qe={className:"mb-4  mr-5 print:hidden"},Xe=["href"],Ye=e("span",null,"\u0637\u0628\u0627\u0639\u0629",-1),Ze=[Ye],et={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},tt={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},ot={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},at={class:"rounded-l-lg mb-2 sm:mb-0"},st=e("th",{className:"px-1 py-2 text-base"},"#",-1),rt={className:"px-1 py-2 text-base"},lt={className:"px-1 py-2 text-base"},dt=e("th",{className:"px-1 py-2 text-base"},"\u0645\u062C\u0645\u0648\u0639 \u0627\u0644\u0633\u064A\u0627\u0631\u0627\u062A \u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639",-1),nt=e("th",{className:"px-1 py-2 text-base"},"\u0645\u062C\u0645\u0648\u0639 \u0627\u0644\u0633\u064A\u0627\u0631\u0627\u062A \u0645\u062F\u0641\u0648\u0639",-1),it=e("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u0639\u0642\u0648\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A\u0629 \u0627\u0644\u0645\u0646\u062C\u0632\u0629",-1),ct=e("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u0639\u0642\u0648\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A\u0629 \u063A\u064A\u0631 \u0627\u0644\u0645\u0646\u062C\u0632\u0629",-1),mt={className:"px-1 py-2 text-base"},ut={className:"px-1 py-2 text-base"},pt={class:"flex-1 sm:flex-none dark:bg-gray-700 dark:text-gray-200"},bt={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},ht={className:"border border-white dark:border-gray-800 text-center  dark:text-gray-200 text-black px-1 py-2 ",style:{"font-weight":"bold","font-size":"16px"}},ft={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},gt={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},_t={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},vt={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},yt={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},xt={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},kt={className:"border border-white  dark:border-gray-800 text-center px-4 py-2",style:{"min-height":"42px"}},wt=["onClick"];const $t={class:"mt-3 text-center",style:{direction:"ltr"}},Ct={class:"spaner"},Tt={__name:"Index",setup(m){let l=c(!1),d=c(!1),i=c(!1);const _=c([]);let b=c({}),H=c(0);const v=c(0),y=c(0),g=c(""),D=c(0);let M=c(!1),V=1,x=c({}),k=new AbortController;const w=()=>{V=1,_.value.length=0,M.value=!M.value},R=async a=>{try{const o=await $.get("api/getIndexClients",{params:{limit:25,page:V,q:g.value,user_id:H.value,from:v.value,to:y.value},signal:k.signal});x.value=o.data,x.value.data.length<25?(_.value.push(...x.value.data),a.complete()):(_.value.push(...x.value.data),a.loaded()),V++}catch(o){console.error(o)}},S=()=>{k&&k.abort(),k=new AbortController};U([g,H,v,y],()=>{S(),A()}),U(D,a=>{console.log(a===1?"Loading data...":"Data loaded")});const A=ne(()=>{D.value=1,w()},500);function T(a={}){b.value=a,d.value=!0}function F(a={}){b.value=a,l.value=!0}function O(a){$.post("/api/clientsStore",a).then(o=>{window.location.reload()}).catch(o=>{console.error(o)})}function G(a){$.post("/api/clientsEdit",a).then(o=>{window.location.reload()}).catch(o=>{console.error(o)})}function Nt(a={}){b.value=a,i.value=!0}function W(a){$.post("/api/delClient",a).then(o=>{i.value=!1,w()}).catch(o=>{console.error(o)})}return(a,o)=>(u(),p(B,null,[s(n(X),{title:"Dashboard"}),s(ae,null,{default:f(()=>[s(j,{show:n(d),formData:n(b),onA:o[0]||(o[0]=t=>O(t)),onClose:o[1]||(o[1]=t=>E(d)?d.value=!1:d=!1)},{header:f(()=>[]),_:1},8,["show","formData"]),s(le,{show:!!n(i),formData:n(b),onA:o[2]||(o[2]=t=>W(t)),onClose:o[3]||(o[3]=t=>E(i)?i.value=!1:i=!1)},{header:f(()=>[e("h2",Ae," \u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u062A\u0627\u062C\u0631 "+r(n(b).name)+" \u061F ",1)]),_:1},8,["show","formData"]),s(j,{show:n(l),formData:n(b),onA:o[4]||(o[4]=t=>G(t)),onClose:o[5]||(o[5]=t=>E(l)?l.value=!1:l=!1)},{header:f(()=>[]),_:1},8,["show","formData"]),e("div",Be,[e("div",Ee,[e("div",Ie,[e("div",He,[e("div",Ue,[e("div",null,[s(h,{for:"from",value:a.$t("search"),class:"mb-1"},null,8,["value"]),e("form",ze,[Le,e("div",je,[qe,N(e("input",{"onUpdate:modelValue":o[6]||(o[6]=t=>g.value=t),onInput:o[7]||(o[7]=(...t)=>n(A)&&n(A)(...t)),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"\u0628\u062D\u062B",required:""},null,544),[[I,g.value]])])])]),e("div",null,[s(h,{for:"from",value:"\u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0641\u0626\u0629",class:"mb-1"}),N(e("select",{onChange:o[8]||(o[8]=t=>w()),"onUpdate:modelValue":o[9]||(o[9]=t=>g.value=t),id:"default",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 mb-6 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500"},[e("option",Re,r(a.$t("allOwners")),1),Se],544),[[Y,g.value]])]),e("div",Te,[s(h,{for:"pay",value:"\u0627\u0636\u0627\u0641\u0629",class:"mb-1"}),e("button",{className:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-red-500 rounded",onClick:o[10]||(o[10]=t=>T())},r(a.$t("addCustomer")),1)]),e("div",Fe,[e("div",Oe,[s(h,{for:"from",value:a.$t("from_date")},null,8,["value"]),s(L,{id:"from",type:"date",class:"mt-1 block w-full",modelValue:v.value,"onUpdate:modelValue":o[11]||(o[11]=t=>v.value=t)},null,8,["modelValue"])])]),e("div",Ge,[e("div",We,[s(h,{for:"to",value:a.$t("to_date")},null,8,["value"]),s(L,{id:"to",type:"date",class:"mt-1 block w-full",modelValue:y.value,"onUpdate:modelValue":o[12]||(o[12]=t=>y.value=t)},null,8,["modelValue"])])]),e("div",Je,[s(h,{for:"pay",value:"\u0641\u0644\u062A\u0631\u0629"}),e("button",{onClick:o[13]||(o[13]=Z(t=>w(),["prevent"])),class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-gray-500 rounded",style:{width:"100%"}},[D.value?(u(),p("span",Pe,"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...")):(u(),p("span",Ke,"\u0641\u0644\u062A\u0631\u0629"))])]),e("div",Qe,[s(h,{for:"pay",value:"\u0637\u0628\u0627\u0639\u0629"}),e("a",{href:`api/getIndexClients?from=${v.value}&to=${y.value}&print=1`,class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-orange-500 rounded d-block",style:{width:"100%",display:"block","text-align":"center"}},Ze,8,Xe)])]),e("div",et,[e("table",tt,[e("thead",ot,[e("tr",at,[st,e("th",rt,r(a.$t("name")),1),e("th",lt,r(a.$t("phoneNumber")),1),dt,nt,it,ct,e("th",mt,r(a.$t("debt")),1),e("th",ut,r(a.$t("execute")),1)])]),e("tbody",pt,[(u(!0),p(B,null,ee(_.value,(t,J)=>(u(),p("tr",{key:t==null?void 0:t.id,class:te(["border-b border-white dark:bg-gray-900 dark:border-gray-900 hover:bg-gray-50 dark:hover:bg-gray-600",t.balance<=0?"bg-green-100 dark:bg-green-900":"bg-red-100 dark:bg-red-900"])},[t!=null&&t.id?(u(),p(B,{key:0},[e("td",bt,r(J),1),e("td",ht,r(t.name),1),e("td",ft,r(t.phone),1),e("td",gt,r(t.car_count-t.car_count_completed),1),e("td",_t,r(t.car_count_completed),1),e("td",vt,r(t.contract_count),1),e("td",yt,r(t.car_count-t.contract_count),1),e("td",xt,r(t.balance)+" $",1),e("td",kt,[t.car_count?(u(),q(n(z),{key:0,style:{display:"inline-flex"},className:"px-1 py-1  text-white mx-1 bg-blue-500 rounded d-inline-block",href:a.route("showClients",t.id)},{default:f(()=>[s(se)]),_:2},1032,["href"])):C("",!0),e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-slate-500 rounded",onClick:K=>F(t)},[s(re)],8,wt),C("",!0),s(n(z),{style:{display:"inline-flex"},className:"px-1 py-1  text-white mx-1 bg-purple-900 rounded d-inline-block",href:a.route("wallet",{id:t.id})},{default:f(()=>[s(Ve)]),_:2},1032,["href"])])],64)):C("",!0)],2))),128))])])]),e("div",$t,[e("div",Ct,[s(n(de),{laravelData:_.value,onInfinite:R,identifier:n(M)},null,8,["laravelData","identifier"])])])])])])])]),_:1})],64))}};export{Tt as default};
