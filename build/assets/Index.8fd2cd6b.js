import{r as p,o as d,c as ot,w as T,a as l,b as t,d as Dt,n as M,t as n,e as P,v as rt,f as F,g,F as H,h as K,i as f,T as Ct,j as me,k as Gt,u as be,l as Ot,m as Rt,p as ye,q as c,H as ge,s as V,x as xe,L as kt}from"./app.9fcc9735.js";import{_ as fe}from"./AuthenticatedLayout.114c809a.js";/* empty css                                              */import{M as ve,_ as he,a as ke,b as $e,c as we,i as _e}from"./imags.edf7f734.js";import{_ as Ne,a as De}from"./ModalAddExpenses.41f51894.js";import{_ as st}from"./InputLabel.0de34fb1.js";import{_ as pt}from"./TextInput.b13df08f.js";import{p as at}from"./print.c5b505f3.js";/* empty css                                                            */import{a as D}from"./index.96226b3d.js";import{t as Ce}from"./trash.387aaca0.js";import{e as Te}from"./edit.d6827001.js";import{W as Ae}from"./v3-infinite-loading.es.866a2cbd.js";import{d as Ee}from"./debounce.7ca385af.js";import{f as Ue}from"./datetime.47733478.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./Uploader.232aec6c.js";/* empty css                                                                 *//* empty css                                                         */const Me={key:0,class:"modal-mask"},Ie={class:"modal-wrapper max-h-[80vh]"},Be={class:"modal-container dark:bg-gray-900 overflow-auto max-h-[80vh]"},Se={class:"modal-header"},Ve={class:"modal-body"},Ge={class:"text-sm font-medium text-center text-gray-500 border-b border-gray-200 dark:text-gray-400 dark:border-gray-700"},Oe={class:"flex flex-wrap -mb-px"},Re={key:0},je={className:"mb-4 mx-5"},Fe={class:"dark:text-gray-200",for:"expens_amount"},He={className:"mb-4 mx-5"},Le={class:"dark:text-gray-200",for:"expenses_id"},We={className:"mb-4 mx-5"},Ze={class:"dark:text-gray-200",for:"expens_amount"},qe=["value"],Pe={className:"mb-4 mx-5"},Ye={class:"dark:text-gray-200",for:"note"},ze={key:1},Ke={class:"relative overflow-x-auto shadow-md sm:rounded-lg mt-4 mb-5"},Xe={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},Je={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},Qe={class:"bg-rose-500 text-gray-100 rounded-l-lg mb-2 sm:mb-0"},ts={className:"px-1 py-2 text-base"},es={scope:"col",class:"px-1 py-2 text-base print:hidden",style:{width:"250px"}},ss={class:"text-center px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},as={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},rs=["href"],os={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},ds={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},ns={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},ls={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},is={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},us={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},ps=["href"],cs={class:"modal-footer my-2"},ms={class:"flex flex-row"},bs={class:"basis-1/2 px-4"},ys={class:"basis-1/2 px-4"},gs=["disabled"],xs={__name:"ModalAddGenExpenses",props:{show:Boolean,company:Array,color:Array,carModel:Array,name:Array,client:Array,user:Array,expenses:Array,GenExpenses:Array,formData:Object},setup(m){const B=p("add"),w=v=>{B.value=v};return(v,u)=>(d(),ot(Ct,{name:"modal"},{default:T(()=>{var E;return[m.show?(d(),l("div",Me,[t("div",Ie,[t("div",Be,[t("div",Se,[Dt(v.$slots,"header")]),t("div",Ve,[t("div",Ge,[t("ul",Oe,[t("li",{class:"mr-2",onClick:u[0]||(u[0]=x=>w("add"))},[t("button",{class:M(["inline-block p-4 border-b-2 border-transparent rounded-t-lg",B.value=="add"?"dark:text-blue-500 dark:border-blue-500":"hover:text-gray-600 hover:border-gray-300"])}," \u0627\u0636\u0627\u0641\u0629 ",2)]),t("li",{class:"mr-2",onClick:u[1]||(u[1]=x=>w("record"))},[t("button",{class:M(["inline-block p-4 border-b-2 border-transparent rounded-t-lg",B.value=="record"?"dark:text-blue-500 dark:border-blue-500":"hover:text-gray-600 hover:border-gray-300"])}," \u0627\u0644\u0633\u062C\u0644 ",2)])])]),B.value=="add"?(d(),l("div",Re,[t("div",null,[u[7]||(u[7]=t("h1",{class:"text-center dark:text-gray-200 mt-4"}," \u0627\u0636\u0627\u0641\u0629 \u062F\u0641\u0639\u0629",-1)),t("div",je,[t("label",Fe,n(v.$t("amount")),1),P(t("input",{id:"expens_amount",type:"number",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":u[2]||(u[2]=x=>m.formData.amount=x)},null,512),[[rt,m.formData.amount]])]),t("div",He,[t("label",Le,n(v.$t("factor")),1),P(t("input",{id:"note_expens",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":u[3]||(u[3]=x=>m.formData.factor=x)},null,512),[[rt,m.formData.factor]])]),t("div",We,[t("label",Ze,n(v.$t("result")),1),t("input",{id:"expens_amount",type:"number",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900",value:(m.formData.amount/m.formData.factor).toFixed(1)},null,8,qe)]),t("div",Pe,[t("label",Ye,n(v.$t("note")),1),P(t("input",{id:"note",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":u[4]||(u[4]=x=>m.formData.note=x)},null,512),[[rt,m.formData.note]])])])])):(d(),l("div",ze,[u[17]||(u[17]=t("h1",{class:"text-center dark:text-gray-200 mt-4"}," \u0633\u062C\u0644 \u0627\u0644\u062D\u0648\u0644\u0627\u062A",-1)),t("div",Ke,[t("table",Xe,[t("thead",Je,[t("tr",Qe,[u[8]||(u[8]=t("th",{className:"px-1 py-2 text-base"},"\u0631\u0642\u0645 \u0627\u0644\u0648\u0635\u0644",-1)),t("th",ts,n(v.$t("date")),1),u[9]||(u[9]=t("th",{className:"px-1 py-2 text-base"},"\u0633\u0639\u0631 \u0627\u0644\u0635\u0631\u0641",-1)),u[10]||(u[10]=t("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u0645\u0628\u0644\u063A \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631",-1)),u[11]||(u[11]=t("th",{className:"px-1 py-2 text-base"},"\u0645\u0644\u0627\u062D\u0638\u0629",-1)),t("th",es,n(v.$t("execute")),1)])]),t("tbody",null,[t("tr",ss,[u[13]||(u[13]=t("td",null,null,-1)),u[14]||(u[14]=t("td",null,null,-1)),u[15]||(u[15]=t("td",null,null,-1)),u[16]||(u[16]=t("td",null,null,-1)),t("td",as,[t("a",{target:"_blank",style:{display:"inline-flex"},href:`/api/getIndexAccountsSelas?user_id=${(E=m.GenExpenses[0])==null?void 0:E.user_id}&print=5`,tabIndex:"1",class:"px-4 py-1 text-white m-1 bg-blue-500 rounded"},[u[12]||(u[12]=F(" \u062C\u0645\u064A\u0639 \u0627\u0644\u062F\u0641\u0639\u0627\u062A ",-1)),g(at)],8,rs)])]),(d(!0),l(H,null,K(m.GenExpenses,x=>{var k;return d(),l("tr",{key:x.id,class:"text-center"},[t("td",os,n(x.id),1),t("td",ds,n((k=x==null?void 0:x.created_at)==null?void 0:k.slice(0,19).replace("T"," ")),1),t("td",ns,n(x.factor),1),t("td",ls,n(x.amount),1),t("td",is,n(x.reason),1),t("td",us,[t("a",{target:"_blank",style:{display:"inline-flex"},href:`/api/getIndexAccountsSelas?user_id=${x.user_id}&print=3&transactions_id=${x.transaction_id}`,tabIndex:"1",class:"px-4 py-1 text-white m-1 bg-green-500 rounded"},[g(at)],8,ps)])])}),128))])])])]))]),t("div",cs,[t("div",ms,[t("div",bs,[t("button",{class:"modal-default-button py-3 bg-gray-500 rounded",onClick:u[5]||(u[5]=x=>{v.$emit("close"),B.value="add"})},n(v.$t("cancel")),1)]),t("div",ys,[t("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6",onClick:u[6]||(u[6]=x=>{v.$emit("a",m.formData),m.formData=""}),disabled:!m.formData.amount},n(v.$t("yes")),9,gs)])])])])])])):f("",!0)]}),_:3}))}};const fs={key:0,class:"modal-mask"},vs={class:"modal-wrapper max-h-[80vh]"},hs={class:"modal-container dark:bg-gray-900 overflow-auto max-h-[80vh]"},ks={class:"modal-header"},$s={class:"modal-body"},ws={class:"text-sm font-medium text-center text-gray-500 border-b border-gray-200 dark:text-gray-400 dark:border-gray-700"},_s={class:"flex flex-wrap -mb-px"},Ns={key:0},Ds={className:"mb-4 mx-5"},Cs={key:0,className:"mb-4 mx-5"},Ts=["value"],As={className:"mb-4 mx-5"},Es={className:"mb-4 mx-5"},Us={class:"dark:text-gray-200",for:"note"},Ms={key:1},Is={class:"relative overflow-x-auto shadow-md sm:rounded-lg mt-4 mb-5"},Bs={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},Ss={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},Vs={class:"bg-rose-500 text-gray-100 rounded-l-lg mb-2 sm:mb-0"},Gs={className:"px-1 py-2 text-base"},Os={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Rs={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},js={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Fs={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Hs={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Ls={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Ws={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Zs={class:"modal-footer my-2"},qs={class:"flex flex-row"},Ps={class:"basis-1/2 px-4"},Ys={class:"basis-1/2 px-4"},zs=["disabled"],Ks={__name:"ModalAddExpensesToMainBransh",props:{show:Boolean,user:Array,allTransfers:Array,formData:Object},emits:["a","close"],setup(m,{emit:B}){const w=p("add"),v=_=>{w.value=_},u=m,E=B,x=p("local"),k=p([]),A=p(null);me(()=>{O()});function O(){D.get("/api/connected-systems").then(_=>{k.value=_.data}).catch(_=>{console.error("Error loading connected systems:",_)})}function L(){if(x.value==="external"){const _={amount:u.formData.amount,sender_note:u.formData.note||"",note:u.formData.note||"",external_system_id:A.value};D.post("/api/send-external-transfer",_).then(i=>{alert("\u062A\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u062A\u062D\u0648\u064A\u0644 \u0627\u0644\u062E\u0627\u0631\u062C\u064A \u0628\u0646\u062C\u0627\u062D"),x.value="local",A.value=null,E("close")}).catch(i=>{var b,S;console.error("Error sending external transfer:",i),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u062A\u062D\u0648\u064A\u0644 \u0627\u0644\u062E\u0627\u0631\u062C\u064A: "+(((S=(b=i.response)==null?void 0:b.data)==null?void 0:S.error)||i.message))})}else E("a",u.formData)}return(_,i)=>(d(),ot(Ct,{name:"modal"},{default:T(()=>[m.show?(d(),l("div",fs,[t("div",vs,[t("div",hs,[t("div",ks,[Dt(_.$slots,"header")]),t("div",$s,[t("div",ws,[t("ul",_s,[t("li",{class:"mr-2",onClick:i[0]||(i[0]=b=>v("add"))},[t("button",{class:M(["inline-block p-4 border-b-2 border-transparent rounded-t-lg",w.value=="add"?"dark:text-blue-500 dark:border-blue-500":"hover:text-gray-600 hover:border-gray-300"])}," \u0627\u0636\u0627\u0641\u0629 ",2)]),t("li",{class:"mr-2",onClick:i[1]||(i[1]=b=>v("record"))},[t("button",{class:M(["inline-block p-4 border-b-2 border-transparent rounded-t-lg",w.value=="record"?"dark:text-blue-500 dark:border-blue-500":"hover:text-gray-600 hover:border-gray-300"])}," \u0627\u0644\u0633\u062C\u0644 ",2)])])]),w.value=="add"?(d(),l("div",Ns,[t("div",null,[i[13]||(i[13]=t("h1",{class:"text-center dark:text-gray-200 mt-4"}," \u0627\u0636\u0627\u0641\u0629 \u062F\u0641\u0639\u0629",-1)),t("div",Ds,[i[9]||(i[9]=t("label",{class:"dark:text-gray-200",for:"transfer_type"},"\u0646\u0648\u0639 \u0627\u0644\u062A\u062D\u0648\u064A\u0644",-1)),P(t("select",{id:"transfer_type","onUpdate:modelValue":i[2]||(i[2]=b=>x.value=b),class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900",onChange:i[3]||(i[3]=b=>A.value=null)},[...i[8]||(i[8]=[t("option",{value:"local"},"\u062A\u062D\u0648\u064A\u0644 \u0645\u062D\u0644\u064A",-1),t("option",{value:"external"},"\u062A\u062D\u0648\u064A\u0644 \u062E\u0627\u0631\u062C\u064A",-1)])],544),[[Gt,x.value]])]),x.value==="external"?(d(),l("div",Cs,[i[11]||(i[11]=t("label",{class:"dark:text-gray-200",for:"external_system"},"\u0627\u062E\u062A\u0631 \u0627\u0644\u0646\u0638\u0627\u0645 \u0627\u0644\u0645\u0633\u062A\u0642\u0628\u0644",-1)),P(t("select",{id:"external_system","onUpdate:modelValue":i[4]||(i[4]=b=>A.value=b),class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900"},[i[10]||(i[10]=t("option",{value:""},"-- \u0627\u062E\u062A\u0631 \u0627\u0644\u0646\u0638\u0627\u0645 --",-1)),(d(!0),l(H,null,K(k.value,b=>(d(),l("option",{key:b.id,value:b.id},n(b.name)+" ("+n(b.domain)+") ",9,Ts))),128))],512),[[Gt,A.value]])])):f("",!0),t("div",As,[i[12]||(i[12]=t("label",{class:"dark:text-gray-200",for:"expens_amount"},"\u0627\u0644\u0645\u0628\u0644\u063A \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631",-1)),P(t("input",{id:"expens_amount",type:"number",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":i[5]||(i[5]=b=>m.formData.amount=b)},null,512),[[rt,m.formData.amount]])]),t("div",Es,[t("label",Us,n(_.$t("note")),1),P(t("input",{id:"note",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":i[6]||(i[6]=b=>m.formData.note=b)},null,512),[[rt,m.formData.note]])])])])):(d(),l("div",Ms,[i[20]||(i[20]=t("h1",{class:"text-center dark:text-gray-200 mt-4"}," \u0633\u062C\u0644 \u0627\u0644\u062D\u0648\u0644\u0627\u062A",-1)),t("div",Is,[t("table",Bs,[t("thead",Ss,[t("tr",Vs,[i[14]||(i[14]=t("th",{className:"px-1 py-2 text-base"},"\u0631\u0642\u0645 \u0627\u0644\u0648\u0635\u0644",-1)),t("th",Gs,n(_.$t("date")),1),i[15]||(i[15]=t("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u0645\u0628\u0644\u063A \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631",-1)),i[16]||(i[16]=t("th",{className:"px-1 py-2 text-base"},"\u0623\u062C\u0648\u0631 \u0627\u0644\u062D\u0648\u0644\u0627\u062A",-1)),i[17]||(i[17]=t("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u0645\u0628\u0644\u063A \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631 \u0627\u0644\u0635\u0627\u0641\u064A",-1)),i[18]||(i[18]=t("th",{className:"px-1 py-2 text-base"},"\u0645\u0644\u0627\u062D\u0638\u0629",-1)),i[19]||(i[19]=t("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u062D\u0627\u0644\u0629",-1))])]),t("tbody",null,[(d(!0),l(H,null,K(m.allTransfers,b=>{var S;return d(),l("tr",{key:b.id,class:"text-center"},[t("td",Os,n(b.id),1),t("td",Rs,n((S=b==null?void 0:b.created_at)==null?void 0:S.slice(0,19).replace("T"," ")),1),t("td",js,n(b.amount),1),t("td",Fs,n(b.fee),1),t("td",Hs,n(b.amount-b.fee),1),t("td",Ls,n(b.note),1),t("td",Ws,n(b.stauts),1)])}),128))])])])]))]),t("div",Zs,[t("div",qs,[t("div",Ps,[t("button",{class:"modal-default-button py-3 bg-gray-500 rounded",onClick:i[7]||(i[7]=b=>{_.$emit("close"),w.value="add"})},n(_.$t("cancel")),1)]),t("div",Ys,[t("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6",onClick:L,disabled:!m.formData.amount||x.value==="external"&&!A.value},n(_.$t("yes")),9,zs)])])])])])])):f("",!0)]),_:3}))}};const Xs={key:0,class:"modal-mask"},Js={class:"modal-wrapper max-h-[80vh]"},Qs={class:"modal-container dark:bg-gray-900 overflow-auto max-h-[80vh]"},ta={class:"modal-header"},ea={class:"modal-body"},sa={class:"text-sm font-medium text-center text-gray-500 border-b border-gray-200 dark:text-gray-400 dark:border-gray-700"},aa={class:"flex flex-wrap -mb-px"},ra={key:0},oa={key:0,id:"alert-additional-content-4 my-3",class:"p-4 mb-4 text-yellow-800 border border-yellow-300 rounded-lg bg-yellow-50 dark:bg-gray-800 dark:text-yellow-300 dark:border-yellow-800",role:"alert"},da={class:"flex items-center"},na={class:"text-lg font-medium"},la={class:"mt-2 mb-4 text-sm px-4"},ia=["onUpdate:modelValue"],ua=["onUpdate:modelValue"],pa={class:"flex items-center py-3"},ca={class:"text-lg font-medium"},ma={class:"flex mt-5"},ba=["onClick"],ya=["onClick","disabled"],ga={key:1},xa={class:"flex justify-between items-center mt-4 mb-2"},fa={class:"relative overflow-x-auto shadow-md sm:rounded-lg mt-4 mb-5"},va={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},ha={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},ka={class:"bg-rose-500 text-gray-100 rounded-l-lg mb-2 sm:mb-0"},$a={className:"px-1 py-2 text-base"},wa={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},_a={key:0,class:"ml-2 text-xs text-blue-600 dark:text-blue-300",title:"\u062A\u062D\u0648\u064A\u0644 \u062E\u0627\u0631\u062C\u064A"},Na={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Da={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Ca={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Ta={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Aa={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Ea={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Ua={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Ma={key:0,class:"px-2 py-1 text-xs font-semibold text-blue-700 bg-blue-100 dark:bg-blue-800 dark:text-blue-200 rounded"},Ia={key:1,class:"px-2 py-1 text-xs font-semibold text-gray-700 bg-gray-100 dark:bg-gray-800 dark:text-gray-200 rounded"},Ba={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Sa={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Va=["onClick"],Ga={key:0,class:"text-center"},Oa={key:2},Ra={class:"flex justify-between items-center mt-4 mb-2"},ja={class:"relative overflow-x-auto shadow-md sm:rounded-lg mt-4 mb-5"},Fa={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},Ha={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},La={class:"bg-gray-600 text-gray-100 rounded-l-lg mb-2 sm:mb-0"},Wa={className:"px-1 py-2 text-base"},Za={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},qa={key:0,class:"ml-2 text-xs text-blue-600 dark:text-blue-300",title:"\u062A\u062D\u0648\u064A\u0644 \u062E\u0627\u0631\u062C\u064A"},Pa={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Ya={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},za={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Ka={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Xa={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Ja={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Qa={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},tr={key:0,class:"px-2 py-1 text-xs font-semibold text-blue-700 bg-blue-100 dark:bg-blue-800 dark:text-blue-200 rounded"},er={key:1,class:"px-2 py-1 text-xs font-semibold text-gray-700 bg-gray-100 dark:bg-gray-800 dark:text-gray-200 rounded"},sr={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},ar={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},rr=["onClick"],or={key:0,class:"text-center"},dr={class:"modal-footer my-2"},nr={class:"flex flex-row"},lr={class:"basis-1/2 px-4"},ir={class:"basis-1/2 px-4"},ur={__name:"ModalExpensesFromOtherBransh",props:{show:Boolean,user:Array,allTransfers:Array,formData:Object},emits:["close","refresh"],setup(m,{emit:B}){const w=be(),v=p("add"),u=y=>{v.value=y},E=m,x=B,k=p([...E.allTransfers]);Ot(()=>E.allTransfers,y=>{k.value=[...y]},{deep:!0,immediate:!0}),Ot(()=>E.show,async y=>{var a,o,h,N,ct,mt,bt;if(y)try{const Y=window.location.origin;console.log("\u{1F50D} [DEBUG] ModalExpensesFromOtherBransh - Checking pending transfers from connected systems",{currentDomain:Y,timestamp:new Date().toISOString()});const nt=(await D.get("/api/all-connected-systems")).data.filter(U=>U.is_active);console.log("\u{1F4E1} [DEBUG] Connected systems found",{count:nt.length,systems:nt.map(U=>({id:U.id,name:U.name,domain:U.domain}))});let lt=0;const yt=[];for(const U of nt)try{const G=`${U.domain}/api/get-pending-transfers`;console.log("\u{1F504} [DEBUG] Calling external system",{systemName:U.name,systemDomain:U.domain,apiUrl:G,receiverDomain:Y});const R=await D.post(G,{receiver_system_domain:Y},{headers:{"API-Key":U.api_key,"Content-Type":"application/json"}});console.log("\u2705 [DEBUG] Response from external system",{systemName:U.name,status:R.status,transfersCount:((o=(a=R.data)==null?void 0:a.transfers)==null?void 0:o.length)||0}),R.data.success&&R.data.transfers&&R.data.transfers.length>0&&(lt+=R.data.transfers.length)}catch(G){console.error("\u274C [DEBUG] Error calling external system",{systemName:U.name,systemDomain:U.domain,error:G.message,response:(h=G.response)==null?void 0:h.data}),yt.push({system:U.name,error:((ct=(N=G.response)==null?void 0:N.data)==null?void 0:ct.error)||G.message})}lt>0?(w.success(`\u062A\u0645 \u0627\u0633\u062A\u0642\u0628\u0627\u0644 ${lt} \u062A\u062D\u0648\u064A\u0644 \u0645\u0639\u0644\u0642`,{timeout:3e3,position:"bottom-right",rtl:!0}),x("refresh")):console.log("\u2139\uFE0F [DEBUG] No transfers received from any system",{errors:yt})}catch(Y){console.error("\u274C [DEBUG] Error checking pending transfers:",{message:Y.message,response:(mt=Y.response)==null?void 0:mt.data,status:(bt=Y.response)==null?void 0:bt.status})}});const A=Rt(()=>k.value.filter(y=>!y.is_archived)),O=Rt(()=>k.value.filter(y=>y.is_archived));function L(y){D.post("/api/confirmTransfers",y).then(a=>{const o=k.value.findIndex(h=>h.id===y.id);o!==-1&&(k.value[o]=a.data)}).catch(a=>{console.error("Error confirming transfer:",a),alert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062A\u062D\u0648\u064A\u0644")})}function _(y){D.post("/api/cancelTransfers",y).then(a=>{k.value=k.value.filter(o=>o.id!==y.id)}).catch(a=>{console.error("Error canceling transfer:",a)})}async function i(y){try{const a=await D.post("/api/archiveTransfer",{id:y.id}),o=k.value.findIndex(h=>h.id===y.id);if(o!==-1){const h=a.data.transfer||{...k.value[o],is_archived:!0};k.value.splice(o,1,h),w.success("\u062A\u0645 \u0623\u0631\u0634\u0641\u0629 \u0627\u0644\u062A\u062D\u0648\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})}}catch(a){console.error("Error archiving transfer:",a),w.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0623\u0631\u0634\u0641\u0629 \u0627\u0644\u062A\u062D\u0648\u064A\u0644",{timeout:3e3,position:"bottom-right",rtl:!0})}}async function b(y){try{const a=await D.post("/api/unarchiveTransfer",{id:y.id}),o=k.value.findIndex(h=>h.id===y.id);if(o!==-1){const h=a.data.transfer||{...k.value[o],is_archived:!1};k.value.splice(o,1,h),w.success("\u062A\u0645 \u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u062A\u062D\u0648\u064A\u0644 \u0644\u0644\u0633\u062C\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})}}catch(a){console.error("Error unarchiving transfer:",a),w.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u062A\u062D\u0648\u064A\u0644 \u0644\u0644\u0633\u062C\u0644",{timeout:3e3,position:"bottom-right",rtl:!0})}}function S(y){const a=y==="archive"?O.value:A.value;if(a.length===0){w.warning("\u0644\u0627 \u062A\u0648\u062C\u062F \u062A\u062D\u0648\u064A\u0644\u0627\u062A \u0644\u0644\u0637\u0628\u0627\u0639\u0629",{timeout:2e3,position:"bottom-right",rtl:!0});return}const o=window.open("","_blank"),h=`
    <html>
      <head>
        <title>${y==="archive"?"\u0623\u0631\u0634\u064A\u0641 \u0627\u0644\u062D\u0648\u0644\u0627\u062A":"\u0633\u062C\u0644 \u0627\u0644\u062D\u0648\u0644\u0627\u062A"}</title>
        <style>
          body { font-family: Arial, sans-serif; direction: rtl; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
          th { background-color: #f2f2f2; }
          h1 { text-align: center; }
        </style>
      </head>
      <body>
        <h1>${y==="archive"?"\u0623\u0631\u0634\u064A\u0641 \u0627\u0644\u062D\u0648\u0644\u0627\u062A":"\u0633\u062C\u0644 \u0627\u0644\u062D\u0648\u0644\u0627\u062A"}</h1>
        <table>
          <thead>
            <tr>
              <th>\u0631\u0642\u0645 \u0627\u0644\u0648\u0635\u0644</th>
              <th>\u0627\u0644\u062A\u0627\u0631\u064A\u062E</th>
              <th>\u0627\u0644\u0645\u0628\u0644\u063A \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631</th>
              <th>\u0623\u062C\u0648\u0631 \u0627\u0644\u062D\u0648\u0644\u0627\u062A</th>
              <th>\u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0644\u0635\u0627\u0641\u064A</th>
              <th>\u0645\u0644\u0627\u062D\u0638\u0629</th>
              <th>\u0627\u0644\u062D\u0627\u0644\u0629</th>
            </tr>
          </thead>
          <tbody>
            ${a.map(N=>`
              <tr>
                <td>${N.id}</td>
                <td>${N.created_at?N.created_at.slice(0,19).replace("T"," "):""}</td>
                <td>${N.amount||0}</td>
                <td>${N.fee||0}</td>
                <td>${(N.amount||0)-(N.fee||0)}</td>
                <td>${N.note||""}</td>
                <td>${N.stauts||""}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      </body>
    </html>
  `;o.document.write(h),o.document.close(),o.print()}return(y,a)=>(d(),ot(Ct,{name:"modal"},{default:T(()=>[m.show?(d(),l("div",Xs,[t("div",Js,[t("div",Qs,[t("div",ta,[Dt(y.$slots,"header")]),t("div",ea,[t("div",sa,[t("ul",aa,[t("li",{class:"mr-2",onClick:a[0]||(a[0]=o=>u("add"))},[t("button",{class:M(["inline-block p-4 border-b-2 border-transparent rounded-t-lg",v.value=="add"?"dark:text-blue-500 dark:border-blue-500":"hover:text-gray-600 hover:border-gray-300"])}," \u0637\u0644\u0628\u0627\u062A \u0642\u064A\u062F \u0627\u0644\u062A\u062D\u0648\u064A\u0644 ",2)]),t("li",{class:"mr-2",onClick:a[1]||(a[1]=o=>u("record"))},[t("button",{class:M(["inline-block p-4 border-b-2 border-transparent rounded-t-lg",v.value=="record"?"dark:text-blue-500 dark:border-blue-500":"hover:text-gray-600 hover:border-gray-300"])}," \u0627\u0644\u0633\u062C\u0644 ",2)]),t("li",{class:"mr-2",onClick:a[2]||(a[2]=o=>u("archive"))},[t("button",{class:M(["inline-block p-4 border-b-2 border-transparent rounded-t-lg",v.value=="archive"?"dark:text-blue-500 dark:border-blue-500":"hover:text-gray-600 hover:border-gray-300"])}," \u0627\u0644\u0623\u0631\u0634\u064A\u0641 ",2)])])]),v.value=="add"?(d(),l("div",ra,[a[14]||(a[14]=t("h2",{class:"text-center py-3"},"\u0637\u0644\u0628\u0627\u062A \u0642\u064A\u062F \u0627\u0644\u062A\u062D\u0648\u064A\u0644",-1)),(d(!0),l(H,null,K(k.value,o=>(d(),l(H,{key:o.id},[o.stauts!="\u062A\u0645 \u0627\u0644\u0623\u0633\u062A\u0644\u0627\u0645"?(d(),l("div",oa,[t("div",da,[a[7]||(a[7]=t("svg",{class:"flex-shrink-0 w-4 h-4 me-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),a[8]||(a[8]=t("span",{class:"sr-only"},"Info",-1)),a[9]||(a[9]=t("h3",{class:"text-lg font-medium px-2"},"\u0637\u0644\u0628 \u062D\u0648\u0627\u0644\u0629 \u0645\u0646 \u0641\u0631\u0639 \u0643\u0631\u0643\u0648\u0643",-1)),t("h3",na," \u0645\u0628\u0644\u063A "+n(o.amount)+" \u062F\u0648\u0644\u0627\u0631 ",1)]),t("div",la,n(o.note),1),a[13]||(a[13]=t("label",{class:"dark:text-gray-200 px-4",for:"note"},"\u0623\u062C\u0648\u0631 \u0627\u0644\u062D\u0648\u0627\u0644\u0629 \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631",-1)),P(t("input",{type:"number",class:"mt-3 mx-3 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":h=>o.inputValue=h},null,8,ia),[[rt,o.inputValue]]),P(t("input",{type:"text",class:"mt-3 mx-3 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":h=>o.receiver=h},null,8,ua),[[rt,o.receiver]]),t("div",pa,[a[10]||(a[10]=t("svg",{class:"flex-shrink-0 w-4 h-4 me-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1)),a[11]||(a[11]=t("span",{class:"sr-only"},"Info",-1)),a[12]||(a[12]=t("h3",{class:"text-lg font-medium px-2"}," \u0635\u0627\u0641\u064A \u0627\u0644\u062D\u0648\u0627\u0644\u0629 \u0628\u0639\u062F \u062E\u0635\u0645 \u0623\u062C\u0631 \u0627\u0644\u062A\u062D\u0648\u064A\u0644",-1)),t("h3",ca," \u0645\u0628\u0644\u063A "+n(o.amount-o.inputValue)+" \u062F\u0648\u0644\u0627\u0631 ",1)]),t("div",ma,[t("button",{onClick:h=>L(o),type:"button",class:"mx-2 text-white bg-yellow-800 hover:bg-yellow-900 focus:ring-4 focus:outline-none focus:ring-yellow-300 font-medium rounded-lg text-xs px-3 py-1.5 me-2 text-center inline-flex items-center dark:bg-yellow-300 dark:text-gray-800 dark:hover:bg-yellow-400 dark:focus:ring-yellow-800"}," \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u0648\u0627\u0644\u0627\u062A ",8,ba),t("button",{onClick:h=>_(o),type:"button",class:"text-yellow-800 bg-transparent border border-yellow-800 hover:bg-yellow-900 hover:text-white focus:ring-4 focus:outline-none focus:ring-yellow-300 font-medium rounded-lg text-xs px-3 py-1.5 text-center dark:hover:bg-yellow-300 dark:border-yellow-300 dark:text-yellow-300 dark:hover:text-gray-800 dark:focus:ring-yellow-800","data-dismiss-target":"#alert-additional-content-4","aria-label":"Close",disabled:!m.formData.fee}," \u0625\u0644\u063A\u0627\u0621 ",8,ya)])])):f("",!0)],64))),128))])):v.value=="record"?(d(),l("div",ga,[t("div",xa,[a[16]||(a[16]=t("h1",{class:"text-center dark:text-gray-200"}," \u0633\u062C\u0644 \u0627\u0644\u062D\u0648\u0644\u0627\u062A",-1)),t("button",{onClick:a[3]||(a[3]=o=>S("record")),class:"px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700 flex items-center gap-2",title:"\u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0633\u062C\u0644"},[g(at,{class:"w-4 h-4"}),a[15]||(a[15]=F(" \u0637\u0628\u0627\u0639\u0629 ",-1))])]),t("div",fa,[t("table",va,[t("thead",ha,[t("tr",ka,[a[17]||(a[17]=t("th",{className:"px-1 py-2 text-base"},"\u0631\u0642\u0645 \u0627\u0644\u0648\u0635\u0644",-1)),t("th",$a,n(y.$t("date")),1),a[18]||(a[18]=t("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u0645\u0628\u0644\u063A \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631",-1)),a[19]||(a[19]=t("th",{className:"px-1 py-2 text-base"},"\u0623\u062C\u0648\u0631 \u0627\u0644\u062D\u0648\u0644\u0627\u062A",-1)),a[20]||(a[20]=t("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u0645\u0628\u0644\u063A \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631 \u0627\u0644\u0635\u0627\u0641\u064A",-1)),a[21]||(a[21]=t("th",{className:"px-1 py-2 text-base"},"\u0645\u0644\u0627\u062D\u0638\u0629",-1)),a[22]||(a[22]=t("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u0646\u0648\u0639",-1)),a[23]||(a[23]=t("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u062D\u0627\u0644\u0629",-1)),a[24]||(a[24]=t("th",{className:"px-1 py-2 text-base"},"\u062A\u0646\u0641\u064A\u0630",-1))])]),t("tbody",null,[(d(!0),l(H,null,K(A.value,o=>{var h;return d(),l("tr",{key:o.id,class:M(["text-center",o.is_external?"bg-blue-50 dark:bg-blue-900":""])},[t("td",wa,[F(n(o.id)+" ",1),o.is_external?(d(),l("span",_a,"\u{1F310}")):f("",!0)]),t("td",Na,n((h=o==null?void 0:o.created_at)==null?void 0:h.slice(0,19).replace("T"," ")),1),t("td",Da,n(o.amount),1),t("td",Ca,n(o.fee),1),t("td",Ta,n(o.amount-o.fee),1),t("td",Aa,[F(n(o.note)+" ",1),o.is_external&&o.external_system_domain?(d(),l("div",Ea," \u0645\u0646: "+n(o.external_system_domain),1)):f("",!0)]),t("td",Ua,[o.is_external?(d(),l("span",Ma," \u062E\u0627\u0631\u062C\u064A ")):(d(),l("span",Ia," \u0645\u062D\u0644\u064A "))]),t("td",Ba,n(o.stauts),1),t("td",Sa,[t("button",{onClick:N=>i(o),class:"px-3 py-1 text-sm font-semibold text-white bg-gray-600 rounded hover:bg-gray-700",title:"\u0623\u0631\u0634\u0641\u0629 \u0627\u0644\u062A\u062D\u0648\u064A\u0644"}," \u0623\u0631\u0634\u0641\u0629 ",8,Va)])],2)}),128)),A.value.length===0?(d(),l("tr",Ga,[...a[25]||(a[25]=[t("td",{colspan:"9",class:"px-4 py-4 border dark:border-gray-800 dark:text-gray-200"},"\u0644\u0627 \u062A\u0648\u062C\u062F \u062A\u062D\u0648\u064A\u0644\u0627\u062A",-1)])])):f("",!0)])])])])):v.value=="archive"?(d(),l("div",Oa,[t("div",Ra,[a[27]||(a[27]=t("h1",{class:"text-center dark:text-gray-200"}," \u0623\u0631\u0634\u064A\u0641 \u0627\u0644\u062D\u0648\u0644\u0627\u062A",-1)),t("button",{onClick:a[4]||(a[4]=o=>S("archive")),class:"px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700 flex items-center gap-2",title:"\u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0623\u0631\u0634\u064A\u0641"},[g(at,{class:"w-4 h-4"}),a[26]||(a[26]=F(" \u0637\u0628\u0627\u0639\u0629 ",-1))])]),t("div",ja,[t("table",Fa,[t("thead",Ha,[t("tr",La,[a[28]||(a[28]=t("th",{className:"px-1 py-2 text-base"},"\u0631\u0642\u0645 \u0627\u0644\u0648\u0635\u0644",-1)),t("th",Wa,n(y.$t("date")),1),a[29]||(a[29]=t("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u0645\u0628\u0644\u063A \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631",-1)),a[30]||(a[30]=t("th",{className:"px-1 py-2 text-base"},"\u0623\u062C\u0648\u0631 \u0627\u0644\u062D\u0648\u0644\u0627\u062A",-1)),a[31]||(a[31]=t("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u0645\u0628\u0644\u063A \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631 \u0627\u0644\u0635\u0627\u0641\u064A",-1)),a[32]||(a[32]=t("th",{className:"px-1 py-2 text-base"},"\u0645\u0644\u0627\u062D\u0638\u0629",-1)),a[33]||(a[33]=t("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u0646\u0648\u0639",-1)),a[34]||(a[34]=t("th",{className:"px-1 py-2 text-base"},"\u0627\u0644\u062D\u0627\u0644\u0629",-1)),a[35]||(a[35]=t("th",{className:"px-1 py-2 text-base"},"\u062A\u0646\u0641\u064A\u0630",-1))])]),t("tbody",null,[(d(!0),l(H,null,K(O.value,o=>{var h;return d(),l("tr",{key:o.id,class:M(["text-center",o.is_external?"bg-blue-50 dark:bg-blue-900":""])},[t("td",Za,[F(n(o.id)+" ",1),o.is_external?(d(),l("span",qa,"\u{1F310}")):f("",!0)]),t("td",Pa,n((h=o==null?void 0:o.created_at)==null?void 0:h.slice(0,19).replace("T"," ")),1),t("td",Ya,n(o.amount),1),t("td",za,n(o.fee),1),t("td",Ka,n(o.amount-o.fee),1),t("td",Xa,[F(n(o.note)+" ",1),o.is_external&&o.external_system_domain?(d(),l("div",Ja," \u0645\u0646: "+n(o.external_system_domain),1)):f("",!0)]),t("td",Qa,[o.is_external?(d(),l("span",tr," \u062E\u0627\u0631\u062C\u064A ")):(d(),l("span",er," \u0645\u062D\u0644\u064A "))]),t("td",sr,n(o.stauts),1),t("td",ar,[t("button",{onClick:N=>b(o),class:"px-3 py-1 text-sm font-semibold text-white bg-green-600 rounded hover:bg-green-700",title:"\u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u062A\u062D\u0648\u064A\u0644 \u0644\u0644\u0633\u062C\u0644"}," \u0625\u0639\u0627\u062F\u0629 \u0644\u0644\u0633\u062C\u0644 ",8,rr)])],2)}),128)),O.value.length===0?(d(),l("tr",or,[...a[36]||(a[36]=[t("td",{colspan:"9",class:"px-4 py-4 border dark:border-gray-800 dark:text-gray-200"},"\u0644\u0627 \u062A\u0648\u062C\u062F \u062A\u062D\u0648\u064A\u0644\u0627\u062A \u0645\u0624\u0631\u0634\u0641\u0629",-1)])])):f("",!0)])])])])):f("",!0)]),t("div",dr,[t("div",nr,[t("div",lr,[t("button",{class:"modal-default-button py-3 bg-gray-500 rounded",onClick:a[5]||(a[5]=o=>{y.$emit("close"),v.value="add"})},n(y.$t("cancel")),1)]),t("div",ir,[t("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6",onClick:a[6]||(a[6]=o=>{y.$emit("close")})},n(y.$t("yes")),1)])])])])])])):f("",!0)]),_:3}))}};const pr={key:0},cr={id:"alert-2",class:"p-4 mb-4 bg-red-100 rounded-lg dark:bg-red-200 text-center",role:"alert"},mr={class:"ml-3 font-medium text-red-700 dark:text-red-800"},br={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},yr={class:"overflow-hidden shadow-sm sm:rounded-lg"},gr={class:"border-b border-gray-200"},xr={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3 lg:gap-3"},fr={class:"pt-5 print:hidden"},vr={class:"pt-5 hidden"},hr={class:"pt-5 print:hidden"},kr={class:"px-4"},$r={class:"px-4"},wr={class:"mr-5 print:hidden"},_r={key:0},Nr={key:1},Dr={class:"mr-5 print:hidden"},Cr={class:"mr-5"},Tr={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3 lg:gap-3"},Ar={key:0},Er={key:1},Ur={key:2},Mr={key:3},Ir={key:0,class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3 lg:gap-3"},Br={class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-3 lg:gap-3"},Sr={class:"px-4"},Vr={class:"px-4"},Gr={class:"relative w-full px-4"},Or={class:"relative w-full px-4"},Rr={class:"w-full text-sm text-center text-gray-100 border border-gray-700 rounded-lg overflow-hidden bg-slate-900"},jr={class:"bg-slate-900"},Fr={class:"border border-gray-700 p-2 text-emerald-200 font-semibold"},Hr={class:"border border-gray-700 p-2 text-rose-200 font-semibold"},Lr={class:"border border-gray-700 p-2 font-semibold"},Wr={class:"bg-slate-900"},Zr={class:"border border-gray-700 p-2 text-emerald-200 font-semibold"},qr={class:"border border-gray-700 p-2 text-rose-200 font-semibold"},Pr={class:"border border-gray-700 p-2 font-semibold"},Yr={class:"overflow-x-auto shadow-lg mt-5 rounded-lg"},zr={class:"w-full text-right text-gray-100 dark:text-gray-100 text-center bg-slate-900 rounded-lg overflow-hidden"},Kr={class:"border border-transparent text-center px-2 py-1 whitespace-nowrap"},Xr={key:1},Jr={class:"border border-transparent text-center px-2 py-1 whitespace-nowrap"},Qr={class:"border border-transparent text-center px-2 py-1 align-top"},to={key:0,class:"space-y-2 text-right"},eo={class:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400"},so={key:0,class:"text-xs text-red-500"},ao={class:"flex justify-end gap-2"},ro=["disabled"],oo=["onClick","disabled"],no={key:0},lo={key:1},io={key:1,class:"space-y-1 text-center"},uo={class:"block whitespace-pre-line leading-6 pt-5"},po={key:0,class:"inline-flex items-center text-xs font-semibold text-green-600"},co={class:"border border-transparent text-center px-2 py-1"},mo={class:"border border-transparent text-center px-2 py-1"},bo={class:"border border-transparent text-center px-2 py-1"},yo={class:"action-group"},go=["onClick","disabled"],xo=["onClick"],fo=["onClick"],vo=["href"],ho=["href"],ko=["href"],$o=["href"],wo=["href"],_o=["src"],No={class:"spaner"},dt=1e3,qo={__name:"Index",props:{url:String,users:Array,accounts:Array,boxes:Array,flaggedWallets:{type:Array,default:()=>[]}},setup(m){const B=p({});p("");let w=p(!1),v=p(!1),u=p(!1),E=p(!1),x=p(!1),k=p(!1),A=p(!1),O=p(!1),L=p(!1),_=p(!1),i=p([]),b=p(0),S=p({}),y=p({}),a=p({}),o=p(!1),h=p(Et()),N=p(Et()),ct=p(0),mt=p(0),bt=p(0),Y=p(0),Tt=p(0),nt=p(0),lt=p(0),yt=p(0),U=p(0),G=p(0),R=p(0),gt=p(0),xt=p(0),jt=p(0),Ft=p(0),$t=p(!1),wt=1,it="",_t=p([]);const ut=p(null),X=p(""),J=p(!1),W=p(""),Q=()=>{wt=0,i.value.length=0,$t.value=!$t.value},Ht=Ee(Q,500),Lt=async s=>{try{const $=(await D.get("/getIndexAccounting",{params:{limit:100,page:wt,q:it,user_id:Qt.boxes[0].id,from:h.value,to:N.value}})).data;$.transactions.data.length<100?(i.value.push(...$.transactions.data),s.complete()):(i.value.push(...$.transactions.data),s.loaded()),B.value=$,wt++}catch(e){console.log(e)}};(async()=>{D.get("/api/totalInfo").then(s=>{ct.value=s.data.data.mainAccount,mt.value=s.data.data.onlineContracts,bt.value=s.data.data.howler,Y.value=s.data.data.shippingCoc,Tt.value=s.data.data.border,nt.value=s.data.data.iran,lt.value=s.data.data.dubai,yt.value=s.data.data.debtOnlineContracts,jt.value=s.data.data.onlineContractsDinar,Ft.value=s.data.data.debtOnlineContractsDinar,U.value=s.data.data.allCars,G.value=s.data.data.transactionInTodayDollar,gt.value=s.data.data.transactionOutTodayDollar,R.value=s.data.data.transactionInTodayDinar,xt.value=s.data.data.transactionOutTodayDinar}).catch(s=>{console.error(s)})})();function Wt(){w.value=!0}function Zt(){v.value=!0}function qt(){u.value=!0}function Pt(){Nt(),A.value=!0}function Yt(){Nt(),O.value=!0}function zt(){x.value=!0}function Kt(){k.value=!0}function Xt(s){S.value=s,L.value=!0}function Jt(s){S.value=s,_.value=!0}const Qt=m;ye(),p(!1);const z=p(0);function te(s){D.post("/api/receiptArrived",s).then(e=>{w.value=!1,window.location.reload()}).catch(e=>{z.value=e.response.data.errors})}function At(s){D.post("/api/salesDebt",s).then(e=>{Q(),v.value=!1,u.value=!1,window.location.reload()}).catch(e=>{z.value=e.response.data.errors})}function ee(s){D.post("/api/convertDollarDinar",s).then(e=>{Q(),x.value=!1}).catch(e=>{z.value=e.response.data.errors})}function se(s){D.post("/api/convertDinarDollar",s).then(e=>{Q(),k.value=!1}).catch(e=>{z.value=e.response.data.errors})}function Et(){const s=new Date,e=s.getFullYear(),$=String(s.getMonth()+1).padStart(2,"0"),C=String(s.getDate()).padStart(2,"0");return`${e}-${$}-${C}`}function ae(s){D.post(`/api/delTransactions?id=${s.id}`).then(e=>{Q(),L.value=!1}).catch(e=>{z.value=e.response.data.errors})}function ft(s){b.value=s,re(),E.value=!0}function re(){D.get(`/api/getGenExpenses?expenses_type_id=${b.value}`).then(s=>{a.value=s.data}).catch(s=>{z.value=s.response.data.errors})}function Ut(s){var e,$,C;D.post(`/api/GenExpenses?amount=${(e=s.amount)!=null?e:0}&expenses_type_id=${b.value}&factor=${($=s.factor)!=null?$:1}&note=${(C=s.note)!=null?C:""}`).then(I=>{Q(),E.value=!1,console.log(I.data),window.open(`/api/getIndexAccountsSelas?user_id=${I.data.morphed_id}&print=3&transactions_id=${I.data.id}`,"_blank"),window.location.reload()}).catch(I=>{z.value=I.response.data.errors})}function Nt(){D.get("/api/transfers").then(s=>{_t.value=s.data}).catch(s=>{z.value=s.response.data.errors})}function oe(s){var e,$;D.post(`/api/addTransfers?amount=${(e=s.amount)!=null?e:0}&sender_note=${($=s.note)!=null?$:""}`).then(C=>{window.location.reload(),A.value=!1}).catch(C=>{z.value=C.response.data.errors})}function de(s){return`/public/uploadsResized/${s}`}function ne(s){return`/public/uploads/${s}`}function le(){Q()}function tt(s){return typeof s!="number"&&(s=parseFloat(s)||0),s.toLocaleString()}const Mt=["in","inUser","inUserBox"],It=["out","outUser","outUserBox","debt"];function vt(s,e){var C,I;if(!s)return"";const $=Number(s.amount);return Number.isNaN($)?"":e==="in"&&Mt.includes(s.type)?`${tt(Math.abs($))} ${(C=s.currency)!=null?C:"$"}`.trim():e==="out"&&It.includes(s.type)?`${tt(Math.abs($))} ${(I=s.currency)!=null?I:"$"}`.trim():""}function Bt(s){return s==="in"?"amount-pill amount-pill--in dark:text-white text-xl font-bold":"amount-pill amount-pill--out dark:text-white text-xl font-bold"}function ie(s){const e=["transition-colors","duration-150","border-b","border-transparent","hover:shadow-md"];return s&&(Mt.includes(s.type)?e.push("bg-gradient-to-l","from-emerald-700","to-emerald-600","text-white","hover:from-emerald-600","hover:to-emerald-500"):It.includes(s.type)?e.push("bg-gradient-to-l","from-rose-700","to-rose-600","text-white","hover:from-rose-600","hover:to-rose-500"):e.push("bg-slate-800","text-white","hover:bg-slate-700")),e}function St(s){var et,r,Z,q;if(!s)return null;const e=(et=s.morphed_type)!=null?et:"",$=(Z=(r=s.morphed)==null?void 0:r.id)!=null?Z:s.morphed_id,C=(q=s.type)!=null?q:"";return $?C==="inUserBox"||C==="outUserBox"?route("wallet",{id:$}):e.includes("User")?route("showClients",{id:$,q:""}):e.includes("Wallet")?route("wallet",{id:$}):null:null}function ue(s){var e;!s||J.value||(ut.value=s.id,X.value=(e=s.description)!=null?e:"",W.value="")}function Vt(){J.value||(ut.value=null,X.value="",W.value="")}async function pe(s){var $,C,I,et,r,Z;if(!s||ut.value!==s.id)return;const e=X.value?X.value.trim():"";if(!e){W.value="\u0627\u0644\u0648\u0635\u0641 \u0645\u0637\u0644\u0648\u0628";return}if(e.length>dt){W.value=`\u0627\u0644\u0648\u0635\u0641 \u064A\u062C\u0628 \u0623\u0644\u0627 \u064A\u062A\u062C\u0627\u0648\u0632 ${dt} \u062D\u0631\u0641\u064B\u0627`;return}J.value=!0,W.value="";try{await D.post("/api/updateTransactionDescription",{transaction_id:s.id,description:e}),s.description=e,s._descriptionUpdated=!0,setTimeout(()=>{s&&(s._descriptionUpdated=!1)},3e3),Vt()}catch(q){(et=(I=(C=($=q.response)==null?void 0:$.data)==null?void 0:C.errors)==null?void 0:I.description)!=null&&et.length?W.value=q.response.data.errors.description[0]:(Z=(r=q.response)==null?void 0:r.data)!=null&&Z.message?W.value=q.response.data.message:W.value="\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062D\u0641\u0638 \u0627\u0644\u0648\u0635\u0641"}finally{J.value=!1}}function ce(s){const e=["bg-orange-300","bg-orange-400","bg-orange-500","bg-orange-600","bg-orange-700","bg-orange-800","bg-orange-900"];return e[s%e.length]}return(s,e)=>(d(),l(H,null,[g(c(ge),{title:"Dashboard"}),g(fe,null,{header:T(()=>[...e[36]||(e[36]=[])]),default:T(()=>{var $,C,I,et;return[g(ve,{show:!!c(L),formData:c(S),onA:e[0]||(e[0]=r=>ae(r)),onClose:e[1]||(e[1]=r=>V(L)?L.value=!1:L=!1)},{header:T(()=>[...e[37]||(e[37]=[t("h2",{class:"mb-5 dark:text-white text-center"}," \u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0627\u0644\u062D\u0630\u0641 \u061F ",-1)])]),_:1},8,["show","formData"]),g(he,{show:!!c(_),formData:c(S),onA:e[2]||(e[2]=r=>le(r)),onClose:e[3]||(e[3]=r=>V(_)?_.value=!1:_=!1)},{header:T(()=>[...e[38]||(e[38]=[t("h2",{class:"mb-5 dark:text-white text-center"}," \u062A\u062D\u0645\u064A\u0644 \u0645\u0644\u0641\u0627\u062A ",-1)])]),_:1},8,["show","formData"]),g(xs,{formData:c(y),show:!!c(E),expenses_type_id:c(b),GenExpenses:c(a),onA:e[4]||(e[4]=r=>Ut(r)),onClose:e[5]||(e[5]=r=>V(E)?E.value=!1:E=!1)},{header:T(()=>[...e[39]||(e[39]=[])]),_:1},8,["formData","show","expenses_type_id","GenExpenses"]),g(Ks,{formData:c(y),show:!!c(A),expenses_type_id:c(b),allTransfers:c(_t),onA:e[6]||(e[6]=r=>oe(r)),onClose:e[7]||(e[7]=r=>V(A)?A.value=!1:A=!1)},{header:T(()=>[...e[40]||(e[40]=[])]),_:1},8,["formData","show","expenses_type_id","allTransfers"]),g(ur,{formData:c(y),show:!!c(O),expenses_type_id:c(b),GenExpenses:c(a),allTransfers:c(_t),onA:e[8]||(e[8]=r=>Ut(r)),onRefresh:Nt,onClose:e[9]||(e[9]=r=>V(O)?O.value=!1:O=!1)},{header:T(()=>[...e[41]||(e[41]=[])]),_:1},8,["formData","show","expenses_type_id","GenExpenses","allTransfers"]),g(ke,{show:!!c(w),data:m.users,accounts:m.accounts,onA:e[10]||(e[10]=r=>te(r)),onClose:e[11]||(e[11]=r=>V(w)?w.value=!1:w=!1)},{header:T(()=>[...e[42]||(e[42]=[t("h3",{class:"text-center"},"\u0627\u0644\u0645\u062D\u0627\u0633\u0628\u0629",-1)])]),_:1},8,["show","data","accounts"]),g(Ne,{show:!!c(v),data:m.users,accounts:m.accounts,onA:e[12]||(e[12]=r=>At(r)),onClose:e[13]||(e[13]=r=>V(v)?v.value=!1:v=!1)},{header:T(()=>[...e[43]||(e[43]=[])]),_:1},8,["show","data","accounts"]),g(De,{show:!!c(u),boxes:m.boxes,onA:e[14]||(e[14]=r=>At(r)),onClose:e[15]||(e[15]=r=>V(u)?u.value=!1:u=!1)},{header:T(()=>[...e[44]||(e[44]=[t("h3",{class:"text-center"},"\u0627\u062F\u062E\u0627\u0644 \u0645\u0635\u0627\u0631\u064A\u0641",-1)])]),_:1},8,["show","boxes"]),g($e,{show:!!c(x),boxes:m.boxes,onA:e[16]||(e[16]=r=>ee(r)),onClose:e[17]||(e[17]=r=>V(x)?x.value=!1:x=!1)},{header:T(()=>[...e[45]||(e[45]=[t("h3",{class:"text-center"},"\u062A\u062D\u0648\u064A\u0644 \u0645\u0646 \u0627\u0644\u062F\u0648\u0644\u0627\u0631 \u0627\u0644\u0649 \u062F\u064A\u0646\u0627\u0631",-1)])]),_:1},8,["show","boxes"]),g(we,{show:!!c(k),boxes:m.boxes,onA:e[18]||(e[18]=r=>se(r)),onClose:e[19]||(e[19]=r=>V(k)?k.value=!1:k=!1)},{header:T(()=>[...e[46]||(e[46]=[t("h3",{class:"text-center"},"\u062A\u062D\u0648\u064A\u0644 \u0645\u0646 \u0627\u0644\u062F\u064A\u0646\u0627\u0631 \u0627\u0644\u0649 \u062F\u0648\u0644\u0627\u0631",-1)])]),_:1},8,["show","boxes"]),s.$page.props.success?(d(),l("div",pr,[t("div",cr,[t("div",mr,n(s.$page.props.success),1)])])):f("",!0),t("div",null,[t("div",br,[t("div",yr,[t("div",gr,[t("div",xr,[t("div",fr,[s.$page.props.auth.user.type_id==1||s.$page.props.auth.user.type_id==2||s.$page.props.auth.user.type_id==5||s.$page.props.auth.user.type_id==6?(d(),l("button",{key:0,style:{width:"100%","margin-top":"4px"},className:"px-4 py-2 text-white bg-green-500 rounded-md focus:outline-none",onClick:e[20]||(e[20]=r=>Wt())}," \u0648\u0635\u0644 \u0642\u0628\u0636 (\u0623\u0636\u0627\u0641\u0629) ")):f("",!0)]),t("div",vr,[s.$page.props.auth.user.type_id==1||s.$page.props.auth.user.type_id==2||s.$page.props.auth.user.type_id==5?(d(),l("button",{key:0,style:{width:"100%","margin-top":"4px"},className:"px-4 py-2 text-white bg-yellow-500 rounded-md focus:outline-none",onClick:e[21]||(e[21]=r=>Zt())}," \u062A\u062D\u0648\u064A\u0644 \u0644\u062D\u0633\u0627\u0628 ")):f("",!0)]),t("div",hr,[s.$page.props.auth.user.type_id==1||s.$page.props.auth.user.type_id==2||s.$page.props.auth.user.type_id==5||s.$page.props.auth.user.type_id==6?(d(),l("button",{key:0,style:{width:"100%","margin-top":"4px"},className:"px-4 py-2 text-white bg-rose-500 rounded-md focus:outline-none",onClick:e[22]||(e[22]=r=>qt())}," \u0648\u0635\u0644 \u0635\u0631\u0641 (\u0633\u062D\u0628) ")):f("",!0)]),t("div",kr,[t("div",null,[g(st,{for:"from",value:"\u0645\u0646 \u062A\u0627\u0631\u064A\u062E"}),g(pt,{id:"from",type:"date",class:"mt-1 block w-full",modelValue:c(h),"onUpdate:modelValue":e[23]||(e[23]=r=>V(h)?h.value=r:h=r)},null,8,["modelValue"])])]),t("div",$r,[t("div",null,[g(st,{for:"to",value:"\u062D\u062A\u0649 \u062A\u0627\u0631\u064A\u062E"}),g(pt,{id:"to",type:"date",class:"mt-1 block w-full",modelValue:c(N),"onUpdate:modelValue":e[24]||(e[24]=r=>V(N)?N.value=r:N=r)},null,8,["modelValue"])])]),t("div",wr,[g(st,{for:"pay",value:"\u0641\u0644\u062A\u0631\u0629"}),t("button",{onClick:e[25]||(e[25]=xe(r=>Q(),["prevent"])),class:"px-6 mb-6 py-2 mt-1 font-bold text-white bg-gray-500 rounded",style:{width:"100%"}},[c(o)?(d(),l("span",Nr,"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...")):(d(),l("span",_r,"\u0641\u0644\u062A\u0631\u0629"))])]),t("div",Dr,[g(st,{for:"pay",value:"\u0642\u0627\u0633\u0647"}),s.$page.props.auth.user.owner_id==1?(d(),ot(c(kt),{key:0,type:"button",href:"/wallet?id=2756",style:{"min-width":"150px"},class:"px-6 mb-6 py-2 font-bold text-white bg-orange-800 rounded w-full mt-1 text-center"},{default:T(()=>[...e[47]||(e[47]=[F(" \u062D\u0648\u0644\u0627\u062A \u062D\u0627\u062C\u0649 \u0639\u0645\u0631\u0627\u0646 ",-1)])]),_:1})):f("",!0)]),t("div",Cr,[g(st,{for:"to",value:"\u0645\u0635\u0627\u0631\u064A\u0641"}),s.$page.props.auth.user.owner_id==1?(d(),ot(c(kt),{key:0,type:"button",href:"/wallet?id=588",style:{"min-width":"150px"},class:"px-6 mb-6 py-2 font-bold text-white bg-red-500 rounded w-full mt-1 text-center"},{default:T(()=>[...e[48]||(e[48]=[F(" \u0645\u0635\u0627\u0631\u064A\u0641 \u0627\u0644\u0634\u0631\u0643\u0629 ",-1)])]),_:1})):f("",!0)])]),t("div",Tr,[t("div",null,[s.$page.props.auth.user.owner_id==1?(d(),l("button",{key:0,type:"button",onClick:e[26]||(e[26]=r=>Yt(1)),style:{"min-width":"150px"},className:"px-6 mb-6 py-2 font-bold text-white bg-red-500 rounded  w-full"}," \u062A\u062D\u0648\u064A\u0644\u0627\u062A \u0643\u0631\u0643\u0648\u0643 ")):f("",!0),s.$page.props.auth.user.type_id==6?(d(),l("button",{key:1,type:"button",onClick:e[27]||(e[27]=r=>Pt(1)),style:{"min-width":"150px"},className:"px-6 mb-6 py-2 font-bold text-white bg-red-500 rounded  w-full"}," \u062A\u062D\u0648\u064A\u0644 \u0644\u0641\u0631\u0639 \u0623\u0631\u0628\u064A\u0644 ")):f("",!0)]),s.$page.props.auth.user.type_id==1?(d(),l("div",Ar,[t("button",{type:"button",onClick:e[28]||(e[28]=r=>ft(2)),style:{"min-width":"150px"},className:"px-6 mb-6 text-center py-2 font-bold text-white bg-blue-600 rounded  w-full"},n(s.$t("dubai")),1)])):f("",!0),s.$page.props.auth.user.type_id==1?(d(),l("div",Er,[t("button",{type:"button",onClick:e[29]||(e[29]=r=>ft(3)),style:{"min-width":"150px"},className:"px-6 mb-6 text-center w-full py-2 font-bold text-white bg-blue-600 rounded"},n(s.$t("iran")),1)])):f("",!0),s.$page.props.auth.user.type_id==1?(d(),l("div",Ur,[t("button",{type:"button",onClick:e[30]||(e[30]=r=>ft(4)),style:{"min-width":"150px"},className:"px-6 mb-6 w-full py-2 font-bold text-white bg-indigo-600 rounded"},n(s.$t("border")),1)])):f("",!0),s.$page.props.auth.user.type_id==1?(d(),l("div",Mr,[t("button",{type:"button",onClick:e[31]||(e[31]=r=>ft(5)),style:{"min-width":"150px"},className:"px-6 mb-6 w-full py-2 font-bold text-white bg-pink-600 rounded"},n(s.$t("shipping_coc")),1)])):f("",!0),t("div",null,[t("button",{type:"button",onClick:e[32]||(e[32]=r=>zt()),style:{"min-width":"150px"},className:"px-6 mb-6 w-full py-2 font-bold text-white bg-teal-500 rounded"}," \u062A\u062D\u0648\u064A\u0644 \u062F\u0648\u0644\u0627\u0631 \u0627\u0644\u0649 \u062F\u064A\u0646\u0627\u0631 ")]),t("div",null,[t("button",{type:"button",onClick:e[33]||(e[33]=r=>Kt()),style:{"min-width":"150px"},className:"px-6 mb-6 w-full py-2 font-bold text-white bg-yellow-500 rounded"}," \u062A\u062D\u0648\u064A\u0644 \u062F\u064A\u0646\u0627\u0631 \u0627\u0644\u0649 \u062F\u0648\u0644\u0627\u0631 ")])]),m.flaggedWallets&&m.flaggedWallets.length>0?(d(),l("div",Ir,[(d(!0),l(H,null,K(m.flaggedWallets,(r,Z)=>(d(),l("div",{key:r.id},[s.$page.props.auth.user.owner_id==1?(d(),ot(c(kt),{key:0,type:"button",href:`/wallet?id=${r.id}`,style:{"min-width":"150px"},class:M(`px-6 mb-6 py-2 font-bold text-white ${ce(Z)} rounded w-full mt-1 text-center`)},{default:T(()=>[F(n(r.name),1)]),_:2},1032,["href","class"])):f("",!0)]))),128))])):f("",!0),t("div",Br,[t("div",Sr,[g(st,{for:"to",value:"\u0631\u0635\u064A\u062F \u0627\u0644\u0635\u0646\u062F\u0648\u0642 \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631"}),g(pt,{id:"to",type:"number",disabled:"",class:"mt-1 block w-full",value:(C=($=B.value)==null?void 0:$.user)==null?void 0:C.wallet.balance},null,8,["value"])]),t("div",Vr,[g(st,{for:"to",value:"\u0631\u0635\u064A\u062F \u0627\u0644\u0635\u0646\u062F\u0648\u0642 \u0628\u0627\u0644\u062F\u064A\u0646\u0627\u0631 \u0627\u0644\u0639\u0631\u0627\u0642\u064A"}),g(pt,{id:"to",type:"number",disabled:"",class:"mt-1 block w-full",value:(et=(I=B.value)==null?void 0:I.user)==null?void 0:et.wallet.balance_dinar},null,8,["value"])]),t("div",Gr,[g(st,{for:"to",value:"\u0628\u062D\u062B \u0631\u0642\u0645 \u0627\u0644\u0648\u0635\u0644 \u0627\u0648 \u0627\u0644\u0648\u0635\u0641"}),g(pt,{id:"q",type:"text",class:"mt-1 block w-full",modelValue:c(it),"onUpdate:modelValue":e[34]||(e[34]=r=>V(it)?it.value=r:it=r),onInput:c(Ht)},null,8,["modelValue","onInput"])]),t("div",Or,[t("table",Rr,[e[51]||(e[51]=t("thead",{class:"bg-slate-800 text-gray-100"},[t("tr",null,[t("th",{class:"border p-2"},"\u0627\u0644\u0639\u0645\u0644\u0629"),t("th",{class:"border p-2"},"\u0627\u0644\u062F\u062E\u0644"),t("th",{class:"border p-2"},"\u0627\u0644\u062E\u0631\u0648\u062C"),t("th",{class:"border p-2"},"\u0627\u0644\u0641\u0631\u0642")])],-1)),t("tbody",null,[t("tr",jr,[e[49]||(e[49]=t("td",{class:"border border-gray-700 p-2 font-bold text-emerald-300"},"\u062F\u0648\u0644\u0627\u0631",-1)),t("td",Fr,n(tt(c(G))),1),t("td",Hr,n(tt(c(gt))),1),t("td",Lr,[t("span",{class:M(c(G)+c(gt)>0?"text-emerald-300":"text-rose-300")},n(tt(c(G)+c(gt))),3)])]),t("tr",Wr,[e[50]||(e[50]=t("td",{class:"border border-gray-700 p-2 font-bold text-indigo-300"},"\u062F\u064A\u0646\u0627\u0631",-1)),t("td",Zr,n(tt(c(R))),1),t("td",qr,n(tt(c(xt))),1),t("td",Pr,[t("span",{class:M(c(R)+c(xt)>0?"text-emerald-300":"text-rose-300")},n(tt(c(R)+c(xt))),3)])])])])])]),t("div",Yr,[t("table",zr,[e[52]||(e[52]=t("thead",{class:"uppercase bg-slate-800 text-gray-100 text-center"},[t("tr",{class:"rounded-l-lg mb-2 sm:mb-0"},[t("th",{className:"px-2 py-2",style:{width:"200px"}},"\u062D\u0633\u0627\u0628 "),t("th",{className:"px-2 py-2",style:{width:"180px"}},"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),t("th",{className:"px-2 py-2"},"\u0627\u0644\u0648\u0635\u0641"),t("th",{className:"px-2 py-2"},"\u0627\u064A\u062F\u0627\u0639"),t("th",{className:"px-2 py-2"},"\u0633\u062D\u0628"),t("th",{className:"px-2 py-2",style:{width:"200px"}},"\u062A\u0646\u0641\u064A\u0630"),t("th",{scope:"col",class:"px-1 py-2 text-base print:hidden",style:{width:"100px"}}," \u062A\u062E\u0632\u064A\u0646 ")])],-1)),t("tbody",null,[(d(!0),l(H,null,K(c(i),r=>{var Z,q;return d(),l("tr",{key:r.id,class:M(ie(r))},[t("td",Kr,[St(r)?(d(),ot(c(kt),{key:0,href:St(r),class:"account-link"},{default:T(()=>{var j,ht;return[F(n((ht=(j=r.morphed)==null?void 0:j.name)!=null?ht:"\u2014"),1)]}),_:2},1032,["href"])):(d(),l("span",Xr,n((q=(Z=r.morphed)==null?void 0:Z.name)!=null?q:"\u2014"),1))]),t("td",Jr,n(c(Ue)(r==null?void 0:r.created_at)),1),t("th",Qr,[ut.value===r.id?(d(),l("div",to,[P(t("textarea",{"onUpdate:modelValue":e[35]||(e[35]=j=>X.value=j),class:"w-full rounded border border-gray-300 dark:border-gray-700 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm leading-6 p-2",rows:"3",maxlength:dt,placeholder:"\u0627\u0643\u062A\u0628 \u0627\u0644\u0648\u0635\u0641 \u0627\u0644\u062C\u062F\u064A\u062F \u0647\u0646\u0627"},null,512),[[rt,X.value]]),t("div",eo,[t("span",null,"\u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0642\u0635\u0649 "+n(dt)+" \u062D\u0631\u0641\u064B\u0627"),t("span",{class:M(X.value.length>dt?"text-red-500":"")},n(X.value.length)+"/"+n(dt),3)]),W.value?(d(),l("p",so,n(W.value),1)):f("",!0),t("div",ao,[t("button",{type:"button",class:"px-3 py-1 text-sm font-semibold rounded bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200",onClick:Vt,disabled:J.value}," \u0625\u0644\u063A\u0627\u0621 ",8,ro),t("button",{type:"button",class:"px-3 py-1 text-sm font-semibold text-white bg-green-600 rounded disabled:opacity-70",onClick:j=>pe(r),disabled:J.value},[J.value?(d(),l("span",no,"\u062C\u0627\u0631\u064D \u0627\u0644\u062D\u0641\u0638...")):(d(),l("span",lo,"\u062D\u0641\u0638"))],8,oo)])])):(d(),l("div",io,[t("span",uo,n(r.description),1),r._descriptionUpdated?(d(),l("span",po," \u062A\u0645 \u0627\u0644\u062A\u062D\u062F\u064A\u062B ")):f("",!0)]))]),t("td",co,[vt(r,"in")?(d(),l("span",{key:0,class:M(Bt("in"))},n(vt(r,"in")),3)):f("",!0)]),t("td",mo,[vt(r,"out")?(d(),l("span",{key:0,class:M(Bt("out"))},n(vt(r,"out")),3)):f("",!0)]),t("td",bo,[t("div",yo,[t("button",{class:"action-btn action-btn--edit",title:"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0648\u0635\u0641",onClick:j=>ue(r),disabled:J.value&&ut.value===r.id},[g(Te,{class:"w-4 h-4"})],8,go),t("button",{class:"action-btn action-btn--delete",onClick:j=>Xt(r),title:"\u062D\u0630\u0641 \u0627\u0644\u062D\u0631\u0643\u0629"},[g(Ce)],8,xo),t("button",{class:"action-btn action-btn--upload",onClick:j=>Jt(r),title:"\u0645\u0631\u0641\u0642\u0627\u062A \u0627\u0644\u062D\u0631\u0643\u0629"},[g(_e)],8,fo),r.type==="out"||r.type==="outUser"||r.type==="debt"?(d(),l("a",{key:0,href:`/api/getIndexAccountsSelas?user_id=${m.boxes[0].id}&print=2&transactions_id=${r.id}`,target:"_blank",class:"action-btn action-btn--print",title:"\u0637\u0628\u0627\u0639\u0629 \u0633\u0646\u062F \u0627\u0644\u0635\u0631\u0641"},[g(at,{class:"inline-flex"})],8,vo)):f("",!0),r.type==="in"||r.type==="inUser"?(d(),l("a",{key:1,href:`/api/getIndexAccountsSelas?user_id=${m.boxes[0].id}&print=3&transactions_id=${r.id}`,target:"_blank",class:"action-btn action-btn--print",title:"\u0637\u0628\u0627\u0639\u0629 \u0633\u0646\u062F \u0627\u0644\u0642\u0628\u0636"},[g(at,{class:"inline-flex"})],8,ho)):f("",!0),r.type==="inUserBox"?(d(),l("a",{key:2,href:`/api/getIndexAccountsSelas?user_id=${r.morphed_id}&print=3&transactions_id=${r.id}`,target:"_blank",class:"action-btn action-btn--print",title:"\u0637\u0628\u0627\u0639\u0629 \u0633\u0646\u062F \u0627\u0644\u0642\u0628\u0636"},[g(at,{class:"inline-flex"})],8,ko)):f("",!0),r.type==="outUserBox"?(d(),l("a",{key:3,href:`/api/getIndexAccountsSelas?user_id=${r.morphed_id}&print=2&transactions_id=${r.id}`,target:"_blank",class:"action-btn action-btn--print",title:"\u0637\u0628\u0627\u0639\u0629 \u0633\u0646\u062F \u0627\u0644\u0635\u0631\u0641"},[g(at,{class:"inline-flex"})],8,$o)):f("",!0)])]),t("td",null,[(d(!0),l(H,null,K(r.transactions_images,(j,ht)=>(d(),l("a",{key:ht,href:ne(j.name),style:{cursor:"pointer"},target:"_blank"},[t("img",{src:de(j.name),alt:"",class:"px-1",style:{"max-width":"80px","max-height":"50px",display:"inline"}},null,8,_o)],8,wo))),128))])],2)}),128))])])]),t("div",No,[g(c(Ae),{transactions:c(i),onInfinite:Lt,identifier:c($t)},null,8,["transactions","identifier"])])])])])])]}),_:1})],64))}};export{qo as default};
