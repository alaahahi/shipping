import{u as S,r as x,j as A,a as u,g as r,q as U,w as h,F as f,o as c,H as j,b as t,h as B,t as n,n as k,i as w,x as D,e as N,O as z}from"./app.804f77cf.js";import{_ as F}from"./AuthenticatedLayout.27c76d3a.js";import{_ as b}from"./InputLabel.330e97ce.js";import{_ as y}from"./TextInput.79ed40b7.js";import{a as p}from"./index.dbc15f49.js";import"./_plugin-vue_export-helper.cdc0426e.js";const H={class:"py-12"},I={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},K={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},P={class:"p-6 text-gray-900 dark:text-gray-100"},q={class:"overflow-x-auto"},L={class:"w-full text-sm text-right text-gray-500 dark:text-gray-400"},O={class:"px-4 py-3"},T={class:"px-4 py-3"},G={class:"px-4 py-3"},J={class:"text-xs bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"},Q={class:"px-4 py-3"},R={class:"px-4 py-3"},W={class:"flex gap-2"},X=["onClick"],Y=["onClick"],Z=["onClick"],tt={key:0},et={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800"},ot={class:"mt-3"},st={class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},at={class:"mb-4"},it={class:"mb-4"},rt={class:"mb-4"},lt={class:"mb-4"},nt={class:"flex items-center"},vt={__name:"ConnectedSystems",setup(dt){const i=S(),v=x([]),m=x(!1),l=x(null),a=x({name:"",domain:"",api_key:"",is_active:!0});A(()=>{d()});function d(){p.get("/api/all-connected-systems").then(o=>{v.value=o.data}).catch(o=>{console.error("Error loading systems:",o),i.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0623\u0646\u0638\u0645\u0629",{timeout:3e3,position:"bottom-right",rtl:!0})})}function C(){l.value=null,a.value={name:"",domain:"",api_key:"",is_active:!0},m.value=!0}function V(o){l.value=o,a.value={name:o.name,domain:o.domain,api_key:o.api_key,is_active:o.is_active},m.value=!0}function g(){m.value=!1,l.value=null,a.value={name:"",domain:"",api_key:"",is_active:!0}}function $(){if(!a.value.name||!a.value.domain||!a.value.api_key){i.error("\u064A\u0631\u062C\u0649 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629",{timeout:3e3,position:"bottom-right",rtl:!0});return}l.value?p.put(`/api/connected-systems/${l.value.id}`,a.value).then(o=>{i.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0646\u0638\u0627\u0645 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}),d(),g()}).catch(o=>{console.error("Error updating system:",o),i.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0646\u0638\u0627\u0645",{timeout:3e3,position:"bottom-right",rtl:!0})}):p.post("/api/connected-systems",a.value).then(o=>{i.success("\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0646\u0638\u0627\u0645 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}),d(),g()}).catch(o=>{console.error("Error adding system:",o),i.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0646\u0638\u0627\u0645",{timeout:3e3,position:"bottom-right",rtl:!0})})}function E(o){!confirm(`\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u0646\u0638\u0627\u0645 "${o.name}"\u061F`)||p.delete(`/api/connected-systems/${o.id}`).then(e=>{i.success("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0646\u0638\u0627\u0645 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}),d()}).catch(e=>{console.error("Error deleting system:",e),i.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062D\u0630\u0641 \u0627\u0644\u0646\u0638\u0627\u0645",{timeout:3e3,position:"bottom-right",rtl:!0})})}function M(o){p.put(`/api/connected-systems/${o.id}`,{is_active:!o.is_active}).then(e=>{i.success(`\u062A\u0645 ${o.is_active?"\u062A\u0639\u0637\u064A\u0644":"\u062A\u0641\u0639\u064A\u0644"} \u0627\u0644\u0646\u0638\u0627\u0645 \u0628\u0646\u062C\u0627\u062D`,{timeout:2e3,position:"bottom-right",rtl:!0}),d()}).catch(e=>{console.error("Error toggling system:",e),i.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u0646\u0638\u0627\u0645",{timeout:3e3,position:"bottom-right",rtl:!0})})}return(o,e)=>(c(),u(f,null,[r(U(j),{title:"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0623\u0646\u0638\u0645\u0629 \u0627\u0644\u0645\u062A\u0635\u0644\u0629"}),r(F,null,{header:h(()=>[...e[4]||(e[4]=[t("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," \u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0623\u0646\u0638\u0645\u0629 \u0627\u0644\u0645\u062A\u0635\u0644\u0629 ",-1)])]),default:h(()=>[t("div",H,[t("div",I,[t("div",K,[t("div",P,[t("div",{class:"mb-4 flex justify-between items-center"},[e[5]||(e[5]=t("h3",{class:"text-lg font-semibold"},"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0623\u0646\u0638\u0645\u0629 \u0627\u0644\u0645\u062A\u0635\u0644\u0629",-1)),t("button",{onClick:C,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," \u0625\u0636\u0627\u0641\u0629 \u0646\u0638\u0627\u0645 \u062C\u062F\u064A\u062F ")]),t("div",q,[t("table",L,[e[7]||(e[7]=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[t("tr",null,[t("th",{class:"px-4 py-3"},"\u0627\u0644\u0627\u0633\u0645"),t("th",{class:"px-4 py-3"},"\u0627\u0644\u062F\u0648\u0645\u064A\u0646"),t("th",{class:"px-4 py-3"},"API Key"),t("th",{class:"px-4 py-3"},"\u0627\u0644\u062D\u0627\u0644\u0629"),t("th",{class:"px-4 py-3"},"\u062A\u0646\u0641\u064A\u0630")])],-1)),t("tbody",null,[(c(!0),u(f,null,B(v.value,s=>(c(),u("tr",{key:s.id,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700"},[t("td",O,n(s.name),1),t("td",T,n(s.domain),1),t("td",G,[t("code",J,n(s.api_key.substring(0,10))+"... ",1)]),t("td",Q,[t("span",{class:k([s.is_active?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300","px-2 py-1 text-xs font-semibold rounded"])},n(s.is_active?"\u0645\u0641\u0639\u0644":"\u0645\u0639\u0637\u0644"),3)]),t("td",R,[t("div",W,[t("button",{onClick:_=>M(s),class:k([s.is_active?"bg-yellow-500 hover:bg-yellow-600":"bg-green-500 hover:bg-green-600","px-3 py-1 text-white text-sm rounded"])},n(s.is_active?"\u062A\u0639\u0637\u064A\u0644":"\u062A\u0641\u0639\u064A\u0644"),11,X),t("button",{onClick:_=>V(s),class:"px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600"}," \u062A\u0639\u062F\u064A\u0644 ",8,Y),t("button",{onClick:_=>E(s),class:"px-3 py-1 bg-red-500 text-white text-sm rounded hover:bg-red-600"}," \u062D\u0630\u0641 ",8,Z)])])]))),128)),v.value.length===0?(c(),u("tr",tt,[...e[6]||(e[6]=[t("td",{colspan:"5",class:"px-4 py-8 text-center text-gray-500"}," \u0644\u0627 \u062A\u0648\u062C\u062F \u0623\u0646\u0638\u0645\u0629 \u0645\u062A\u0635\u0644\u0629 ",-1)])])):w("",!0)])])])])])])]),m.value?(c(),u("div",{key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",onClick:D(g,["self"])},[t("div",et,[t("div",ot,[t("h3",st,n(l.value?"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0646\u0638\u0627\u0645":"\u0625\u0636\u0627\u0641\u0629 \u0646\u0638\u0627\u0645 \u062C\u062F\u064A\u062F"),1),t("div",at,[r(b,{for:"name",value:"\u0627\u0633\u0645 \u0627\u0644\u0646\u0638\u0627\u0645"}),r(y,{id:"name",modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.name=s),type:"text",class:"mt-1 block w-full",placeholder:"\u0645\u062B\u0627\u0644: \u0646\u0638\u0627\u0645 \u0623\u0631\u0628\u064A\u0644"},null,8,["modelValue"])]),t("div",it,[r(b,{for:"domain",value:"\u0627\u0644\u062F\u0648\u0645\u064A\u0646"}),r(y,{id:"domain",modelValue:a.value.domain,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.domain=s),type:"text",class:"mt-1 block w-full",placeholder:"https://system2.example.com"},null,8,["modelValue"])]),t("div",rt,[r(b,{for:"api_key",value:"API Key"}),r(y,{id:"api_key",modelValue:a.value.api_key,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.api_key=s),type:"text",class:"mt-1 block w-full",placeholder:"alaa"},null,8,["modelValue"])]),t("div",lt,[t("label",nt,[N(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.is_active=s),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[z,a.value.is_active]]),e[8]||(e[8]=t("span",{class:"mr-2 text-sm text-gray-600 dark:text-gray-400"},"\u0646\u0634\u0637",-1))])]),t("div",{class:"flex justify-end gap-2"},[t("button",{onClick:g,class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"}," \u0625\u0644\u063A\u0627\u0621 "),t("button",{onClick:$,class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," \u062D\u0641\u0638 ")])])])])):w("",!0)]),_:1})],64))}};export{vt as default};
