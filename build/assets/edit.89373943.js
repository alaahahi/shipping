import{_ as w}from"./AuthenticatedLayout.d8f51ef1.js";import{u as x,r as p,j as b,a as y,g as i,q as d,w as _,F as D,o as S,H as T,b as s,L as $,f as k,s as F}from"./app.86fbfe96.js";import{_ as N}from"./ModalShowDamageReport.e0a10426.js";import{a as R}from"./index.1b7797e0.js";import"./_plugin-vue_export-helper.cdc0426e.js";const j={class:"py-2"},B={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},M={class:"bg-white overflow-hidden shadow-sm"},A={class:"p-6 dark:bg-gray-900"},C={class:"flex justify-between items-center"},O={__name:"edit",props:{data:Object,owner_id:Number},setup(g){const a=g,l=x();let r=p(!1),u=p({driver_name:"",cmr_number:"",cars_count:0,total_damage:0,cars_info:[],created:m()});function m(){const t=new Date,e=t.getFullYear(),o=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${e}-${o}-${n}`}function v(t){return t?typeof t=="string"&&t.includes("T")?t.split("T")[0]:typeof t=="string"?t:m():m()}b(()=>{a.data&&(u.value={id:a.data.id,driver_name:a.data.driver_name||"",cmr_number:a.data.cmr_number||"",cars_count:a.data.cars_count||0,total_damage:a.data.total_damage||0,cars_info:Array.isArray(a.data.cars_info)?a.data.cars_info.map(t=>{var e,o,n,f,c;return{car:(e=t.car)!=null?e:"",vin:(o=t.vin)!=null?o:"",model:(n=t.model)!=null?n:"",color:(f=t.color)!=null?f:"",damage:(c=t.damage)!=null?c:""}}):[],created:v(a.data.created)},r.value=!0)});function h(t){R.post("/api/updateDamageReport",t).then(e=>{r.value=!1,l.success("\u062A\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}),setTimeout(()=>{window.location="/damage_report"},1e3)}).catch(e=>{r.value=!1,l.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062A\u0639\u062F\u064A\u0644",{timeout:2e3,position:"bottom-right",rtl:!0})})}return(t,e)=>(S(),y(D,null,[i(d(T),{title:"\u062A\u0639\u062F\u064A\u0644 \u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0636\u0631\u0631"}),i(w,null,{default:_(()=>[s("div",j,[s("div",B,[s("div",M,[s("div",A,[s("div",C,[e[3]||(e[3]=s("h2",{class:"text-xl font-bold dark:text-white"},"\u062A\u0639\u062F\u064A\u0644 \u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0636\u0631\u0631",-1)),i(d($),{href:t.route("damage_report.index"),class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"},{default:_(()=>[...e[2]||(e[2]=[k(" \u0627\u0644\u0639\u0648\u062F\u0629 ",-1)])]),_:1},8,["href"])])])])])]),i(N,{show:d(r),formDamage:d(u),onSave:e[0]||(e[0]=o=>h(o)),onClose:e[1]||(e[1]=o=>F(r)?r.value=!1:r=!1)},null,8,["show","formDamage"])]),_:1})],64))}};export{O as default};
