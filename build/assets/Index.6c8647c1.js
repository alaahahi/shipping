import{o as d,a as n,b as e,c as V,w as M,e as v,n as R,K as q,d as j,M as te,t as i,f as p,y as ae,T as X,N as oe,j as k,F as $,g as D,G as se,I as re,r as x,k as b,h as H,m as C,v as _,u as E,z as de,H as le}from"./app.2fb5b7f5.js";import{a as O,_ as ie}from"./AuthenticatedLayout.24f4f092.js";import{t as ne}from"./trash.ae83dea1.js";import{e as ce}from"./edit.41131f72.js";import{a as A}from"./index.6d9d7d46.js";import{M as ue}from"./ModalDelCar.e32375dc.js";import{d as me,W as ge}from"./debounce.a65daff8.js";const fe={name:"line-scale",props:{color:{type:String,default:"#CCC"},size:{type:String,default:"40px"},duration:{type:String,default:"0.6s"}}},he=["width","height"],ye=["fill"],be=["dur"],ve=["dur"],pe=["fill"],_e=["dur"],xe=["dur"],ke=["fill"],$e=["dur"],we=["dur"];function Ce(t,u,o,c,a,s){return d(),n("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:o.size,height:o.size,viewBox:"0 0 24 30",style:{"enable-background":"new 0 0 50 50"},"xml:space":"preserve"},[e("rect",{x:"0",y:"13",width:"4",height:"5",fill:o.color},[e("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0s",dur:o.duration,repeatCount:"indefinite"},null,8,be),e("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0s",dur:o.duration,repeatCount:"indefinite"},null,8,ve)],8,ye),e("rect",{x:"10",y:"13",width:"4",height:"5",fill:o.color},[e("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.15s",dur:o.duration,repeatCount:"indefinite"},null,8,_e),e("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.15s",dur:o.duration,repeatCount:"indefinite"},null,8,xe)],8,pe),e("rect",{x:"20",y:"13",width:"4",height:"5",fill:o.color},[e("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.3s",dur:o.duration,repeatCount:"indefinite"},null,8,$e),e("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.3s",dur:o.duration,repeatCount:"indefinite"},null,8,we)],8,ke)],8,he)}const De=O(fe,[["render",Ce]]),Me={LineScale:De};const Ae={name:"vue-element-loading",props:{active:Boolean,spinner:{type:String,default:"spinner"},text:{type:String,default:""},textStyle:{type:Object,default:function(){return{}}},color:{type:String,default:"#000"},isFullScreen:{type:Boolean,default:!1},backgroundColor:{type:String,default:"rgba(255, 255, 255, .9)"},size:{type:String,default:"40"},duration:{type:String,default:"0.6"},delay:{type:[String,Number],default:0}},data(){return{isActive:this.active||!1,isActiveDelay:!1}},mounted(){if(this.$refs.velmld.parentNode.classList.add("velmld-parent"),this.delay){const t=+this.delay*1e3;this.delayActive(t)}},methods:{delayActive(t){this.isActiveDelay=!0,setTimeout(()=>{this.isActiveDelay=!1},t)}},watch:{active(t){this.isActive=t,t&&this.$refs.velmld.parentNode.classList.add("velmld-parent")}},components:Me},Ne={class:"velmld-spinner"};function Le(t,u,o,c,a,s){return d(),V(X,{name:"fade"},{default:M(()=>[v(e("div",{class:R([{"velmld-full-screen":o.isFullScreen},"velmld-overlay"]),style:q({backgroundColor:o.backgroundColor}),ref:"velmld"},[e("div",Ne,[j(t.$slots,"default",{},()=>[(d(),V(te(o.spinner),{color:o.color,size:`${o.size}px`,duration:`${o.duration}s`},null,8,["color","size","duration"]))],!0),o.text.length?(d(),n("div",{key:0,style:q({color:o.color,...o.textStyle})},i(o.text),5)):p("",!0)])],6),[[ae,a.isActive||a.isActiveDelay]])]),_:3})}const Se=O(Ae,[["render",Le],["__scopeId","data-v-82159762"]]);const ze={props:{server:{type:String,default:"/api/upload"},isInvalid:{type:Boolean,default:!1},media:{type:Array,default:[]},location:{type:String,default:""},max:{type:Number,default:null},maxFilesize:{type:Number,default:4},warnings:{type:Boolean,default:!0}},mounted(){this.init()},data(){return{addedMedia:[],savedMedia:[],removedMedia:[],isLoading:!0}},methods:{init(){this.savedMedia=this.media,this.savedMedia.forEach((t,u)=>{this.savedMedia[u].url||(this.savedMedia[u].url=this.location+"/"+t.name)}),setTimeout(()=>this.isLoading=!1,1e3),this.$emit("init",this.allMedia)},async fileChange(t){this.isLoading=!0;let u=t.target.files;for(var o=0;o<u.length;o++)if(!this.max||this.allMedia.length<this.max)if(u[o].size<=this.maxFilesize*1e6){let c=new FormData,a=URL.createObjectURL(u[o]);c.set("image",u[o]);const{data:s}=await A.post(this.server,c);let h={url:a,name:s.name,size:u[o].size,type:u[o].type};this.addedMedia.push(h),this.$emit("change",this.allMedia),this.$emit("add",h,this.addedMedia)}else{this.$emit("maxFilesize",u[o].size),this.warnings&&alert(`The file you are trying to upload is too big. 
Maximum Filesize: `+this.maxFilesize+"MB");break}else{this.$emit("max"),this.warnings&&alert(`You have reached the maximum number of files that you can upload. 
Maximum Files: `+this.max);break}t.target.value=null,this.isLoading=!1},removeAddedMedia(t){let u=this.addedMedia[t];this.addedMedia.splice(t,1),this.$emit("change",this.allMedia),this.$emit("remove",u,this.removedMedia)},removeSavedMedia(t){let u=this.savedMedia[t];this.removedMedia.push(u),this.savedMedia.splice(t,1),this.$emit("change",this.allMedia),this.$emit("remove",u,this.removedMedia)}},computed:{allMedia(){return[...this.savedMedia,...this.addedMedia]}},emits:["init","change","add","remove","max","maxFilesize"],components:{Loader:Se}},B=t=>(se("data-v-1238f422"),t=t(),re(),t),Ue={class:"mu-elements-wraper"},Ie={class:"mu-plusbox-container"},Ve=B(()=>e("label",{for:"mu-file-input",class:"mu-plusbox"},[e("svg",{class:"mu-plus-icon",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[e("g",{fill:"none"},[e("path",{d:"M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11s11-4.925 11-11S18.075 1 12 1zm1 15a1 1 0 1 1-2 0v-3H8a1 1 0 1 1 0-2h3V8a1 1 0 1 1 2 0v3h3a1 1 0 1 1 0 2h-3v3z",fill:"currentColor"})])])],-1)),Be=["src"],Te=["onClick"],Fe=B(()=>e("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[e("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)),Re=[Fe],je=["src"],Xe=["onClick"],Oe=B(()=>e("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[e("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)),Ye=[Oe],qe=["value"],He=["value"],Ee={key:0,class:"mu-mt-1"},Ge=B(()=>e("input",{type:"text",name:"media",value:"1",hidden:""},null,-1)),Ke=[Ge];function We(t,u,o,c,a,s){const h=oe("Loader");return d(),n("div",null,[e("div",{class:R(["mu-container",o.isInvalid?"mu-red-border":""])},[k(h,{color:"#0275d8",active:a.isLoading,spinner:"line-scale","background-color":"rgba(255, 255, 255, .4)"},null,8,["active"]),e("div",Ue,[e("div",Ie,[Ve,e("input",{onChange:u[0]||(u[0]=(...y)=>s.fileChange&&s.fileChange(...y)),id:"mu-file-input",type:"file",accept:"image/*",multiple:"",hidden:""},null,32)]),(d(!0),n($,null,D(a.savedMedia,(y,f)=>(d(),n("div",{key:f,class:"mu-image-container"},[e("img",{src:o.location+"/"+y.name,alt:"",class:"mu-images-preview"},null,8,Be),e("button",{onClick:g=>s.removeSavedMedia(f),class:"mu-close-btn",type:"button"},Re,8,Te)]))),128)),(d(!0),n($,null,D(a.addedMedia,(y,f)=>(d(),n("div",{key:f,class:"mu-image-container"},[e("img",{src:y.url,alt:"",class:"mu-images-preview"},null,8,je),e("button",{onClick:g=>s.removeAddedMedia(f),class:"mu-close-btn",type:"button"},Ye,8,Xe)]))),128))])],2),e("div",null,[(d(!0),n($,null,D(a.addedMedia,(y,f)=>(d(),n("div",{key:f,class:"mu-mt-1"},[e("input",{type:"text",name:"added_media[]",value:y.name,hidden:""},null,8,qe)]))),128)),(d(!0),n($,null,D(a.removedMedia,(y,f)=>(d(),n("div",{key:f,class:"mu-mt-1"},[e("input",{type:"text",name:"removed_media[]",value:y.name,hidden:""},null,8,He)]))),128)),s.allMedia.length?(d(),n("div",Ee,Ke)):p("",!0)])])}const G=O(ze,[["render",We],["__scopeId","data-v-1238f422"]]);const Je={key:0,class:"modal-mask"},Pe={class:"modal-wrapper max-h-[80vh]"},Qe={class:"modal-container dark:bg-gray-900 overflow-auto max-h-[80vh]"},Ze={class:"modal-header"},et={class:"text-center dark:text-gray-200"},tt={class:"modal-body"},at={key:0,class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},ot={class:"mb-4 mx-1"},st=e("label",{class:"dark:text-gray-200",for:"color_id"}," \u0635\u0627\u062D\u0628 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 ",-1),rt={class:"relative"},dt=e("option",{selected:"",disabled:""}," \u062A\u062D\u062F\u064A\u062F \u0635\u0627\u062D\u0628 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 ",-1),lt=["value"],it={class:"relative"},nt={key:0,className:"mb-4 mx-1"},ct={class:"dark:text-gray-200",for:"number"},ut={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-1 lg:gap-2"},mt={className:"mb-4 mx-1"},gt={class:"dark:text-gray-200",for:"car_number"},ft={className:"mb-4 mx-1"},ht={class:"dark:text-gray-200",for:"pin"},yt={className:"mb-4 mx-1"},bt={class:"dark:text-gray-200",for:"pin"},vt={className:"mb-4 mx-1"},pt={class:"dark:text-gray-200",for:"pin"},_t={className:"mb-4 mx-1"},xt={class:"dark:text-gray-200",for:"pin"},kt={class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},$t={className:"mb-4 mx-1"},wt={class:"dark:text-gray-200",for:"note"},Ct={key:1,class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},Dt=["disabled"],Mt={key:2,class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},At={class:"mb-4"},Nt=e("label",{class:"form-label"},"\u0627\u0644\u0635\u0648\u0631",-1),Lt={class:"mt-3"},St={key:0,class:"text-danger"},zt={class:"modal-footer my-2"},Ut={class:"flex flex-row m-auto"},It={__name:"ModalAddCarsAnnual",props:{show:Boolean,formData:Object,client:Array,saveCar:Boolean},setup(t){function u(){const a=new Date,s=a.getFullYear(),h=String(a.getMonth()+1).padStart(2,"0"),y=String(a.getDate()).padStart(2,"0");return`${s}-${h}-${y}`}let o=x(!0);function c(a){A.get("/api/carsAnnualImageDel?name="+a.name).then(s=>{toast.success("\u062A\u0645  \u062D\u0630\u0641 \u0627\u0644\u0635\u0648\u0631\u0629 \u0628\u0646\u062C\u0627\u062D",{timeout:5e3,position:"bottom-right",rtl:!0})}).catch(s=>{console.error(s)})}return(a,s)=>(d(),V(X,{name:"modal"},{default:M(()=>{var h,y,f;return[t.show?(d(),n("div",Je,[e("div",Pe,[e("div",Qe,[e("div",Ze,[j(a.$slots,"header",{},()=>[e("h2",et,i(a.$t("add_car")),1)])]),e("div",tt,[t.formData.id?p("",!0):(d(),n("div",at,[e("div",ot,[st,e("div",rt,[b(o)?p("",!0):v((d(),n("select",{key:0,"onUpdate:modelValue":s[0]||(s[0]=g=>t.formData.client_id=g),id:"color_id",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[dt,(d(!0),n($,null,D(t.client,(g,w)=>(d(),n("option",{key:w,value:g.id},i(g.name),9,lt))),128))],512)),[[H,t.formData.client_id]]),b(o)?p("",!0):(d(),n("button",{key:1,type:"button",onClick:s[1]||(s[1]=g=>{C(o)?o.value=!0:o=!0,t.formData.client_name="",t.formData.client_id=""}),class:"absolute left-0 top-0 h-full px-3 py-2 font-bold text-white bg-green-500 rounded-tl-lg rounded-bl-lg"}," \u0625\u0636\u0627\u0641\u0629 \u0635\u0627\u062D\u0628 \u0633\u064A\u0627\u0631\u0629 "))]),e("div",it,[b(o)?v((d(),n("input",{key:0,id:"note",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[2]||(s[2]=g=>t.formData.client_name=g)},null,512)),[[_,t.formData.client_name]]):p("",!0),b(o)?(d(),n("button",{key:1,type:"button",onClick:s[3]||(s[3]=g=>{C(o)?o.value=!1:o=!1,t.formData.client=""}),class:"absolute left-0 top-0 h-full px-3 py-2 font-bold text-white bg-pink-500 rounded-tl-lg rounded-bl-lg"}," \u062A\u062D\u062F\u064A\u062F \u0635\u0627\u062D\u0628 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 ")):p("",!0)])]),b(o)?(d(),n("div",nt,[e("label",ct,i(a.$t("phoneNumber")),1),v(e("input",{id:"number",type:"number",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[4]||(s[4]=g=>t.formData.client_phone=g)},null,512),[[_,t.formData.client_phone]])])):p("",!0)])),e("div",ut,[e("div",mt,[e("label",gt,i(a.$t("car_number")),1),v(e("input",{id:"car_number",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[5]||(s[5]=g=>t.formData.car_number=g)},null,512),[[_,t.formData.car_number]])]),e("div",ft,[e("label",ht,i(a.$t("car_type")),1),v(e("input",{id:"car_type",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[6]||(s[6]=g=>t.formData.car_type=g)},null,512),[[_,t.formData.car_type]])]),e("div",yt,[e("label",bt,i(a.$t("year")),1),v(e("input",{id:"year",type:"number",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[7]||(s[7]=g=>t.formData.year=g)},null,512),[[_,t.formData.year]])]),e("div",vt,[e("label",pt,i(a.$t("color")),1),v(e("input",{id:"car_color",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[8]||(s[8]=g=>t.formData.car_color=g)},null,512),[[_,t.formData.car_color]])]),e("div",_t,[e("label",xt,i(a.$t("date")),1),v(e("input",{id:"date",type:"date",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[9]||(s[9]=g=>t.formData.date=g)},null,512),[[_,t.formData.date]])])]),e("div",kt,[e("div",$t,[e("label",wt,i(a.$t("note")),1),v(e("input",{id:"note",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[10]||(s[10]=g=>t.formData.note=g)},null,512),[[_,t.formData.note]])])]),t.saveCar?p("",!0):(d(),n("div",Ct,[e("button",{class:"modal-default-button py-3 bg-blue-500 rounded col-6",onClick:s[11]||(s[11]=g=>{t.formData.date=t.formData.date?t.formData.date:u(),a.$emit("a",t.formData)}),disabled:!t.formData.client_id&&!t.formData.client_name}," \u062D\u0641\u0638 \u0648\u0645\u062A\u0627\u0628\u0639\u0629 ",8,Dt)])),t.saveCar?(d(),n("div",Mt,[e("div",At,[Nt,e("div",Lt,[k(b(G),{server:"/api/carsAnnualUpload?carId="+t.saveCar,"is-invalid":!!((h=a.errors)!=null&&h.media),onChange:a.changeMedia,location:"/storage/posts/media",onInit:a.initMedia,onAdd:a.addMedia,onRemove:c},null,8,["server","is-invalid","onChange","onInit","onAdd"])]),(y=a.errors)!=null&&y.media?(d(),n("p",St,i((f=a.errors)==null?void 0:f.media[0]),1)):p("",!0)])])):p("",!0)]),e("div",zt,[e("div",Ut,[e("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6",onClick:s[12]||(s[12]=g=>{a.$emit("close"),t.formData=""})}," \u0625\u063A\u0644\u0627\u0642 ")])])])])])):p("",!0)]}),_:3}))}};const Vt={key:0,class:"modal-mask"},Bt={class:"modal-wrapper max-h-[80vh]"},Tt={class:"modal-container dark:bg-gray-900 overflow-auto max-h-[80vh]"},Ft={class:"modal-header"},Rt=e("h2",{class:"text-center dark:text-gray-200"}," \u062A\u0639\u062F\u064A\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062A ",-1),jt={class:"modal-body"},Xt={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-1 lg:gap-2"},Ot={className:"mb-4 mx-1"},Yt={class:"dark:text-gray-200",for:"car_number"},qt={className:"mb-4 mx-1"},Ht={class:"dark:text-gray-200",for:"pin"},Et={className:"mb-4 mx-1"},Gt={class:"dark:text-gray-200",for:"pin"},Kt={className:"mb-4 mx-1"},Wt={class:"dark:text-gray-200",for:"pin"},Jt={class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},Pt={className:"mb-4 mx-1"},Qt={class:"dark:text-gray-200",for:"note"},Zt={class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},ea={class:"m-4"},ta=e("label",{class:"form-label"},"\u0627\u0644\u0635\u0648\u0631",-1),aa={key:0,class:"text-danger"},oa={class:"modal-footer my-2"},sa={class:"flex flex-row"},ra={class:"basis-1/2 px-4"},da={class:"basis-1/2 px-4"},la=["disabled"],ia={__name:"ModalUpdateCarsAnnual",props:{show:Boolean,formData:Object,client:Array,saveCar:Boolean},setup(t){const u=E();function o(c){A.get("/api/carsAnnualImageDel?name="+c.name).then(a=>{u.success("\u062A\u0645  \u062D\u0630\u0641 \u0627\u0644\u0635\u0648\u0631\u0629 \u0628\u0646\u062C\u0627\u062D",{timeout:5e3,position:"bottom-right",rtl:!0})}).catch(a=>{console.error(a)})}return(c,a)=>(d(),V(X,{name:"modal"},{default:M(()=>{var s,h,y;return[t.show?(d(),n("div",Vt,[e("div",Bt,[e("div",Tt,[e("div",Ft,[j(c.$slots,"header",{},()=>[Rt])]),e("div",jt,[e("div",Xt,[e("div",Ot,[e("label",Yt,i(c.$t("car_number")),1),v(e("input",{id:"car_number",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[0]||(a[0]=f=>t.formData.car_number=f)},null,512),[[_,t.formData.car_number]])]),e("div",qt,[e("label",Ht,i(c.$t("car_type")),1),v(e("input",{id:"car_type",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[1]||(a[1]=f=>t.formData.car_type=f)},null,512),[[_,t.formData.car_type]])]),e("div",Et,[e("label",Gt,i(c.$t("year")),1),v(e("input",{id:"year",type:"number",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[2]||(a[2]=f=>t.formData.year=f)},null,512),[[_,t.formData.year]])]),e("div",Kt,[e("label",Wt,i(c.$t("color")),1),v(e("input",{id:"car_color",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[3]||(a[3]=f=>t.formData.car_color=f)},null,512),[[_,t.formData.car_color]])])]),e("div",Jt,[e("div",Pt,[e("label",Qt,i(c.$t("note")),1),v(e("input",{id:"note",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[4]||(a[4]=f=>t.formData.note=f)},null,512),[[_,t.formData.note]])])]),e("div",Zt,[e("div",ea,[ta,e("div",null,[k(b(G),{server:"/api/carsAnnualUpload?carId="+t.formData.id,"is-invalid":!!((s=c.errors)!=null&&s.media),onChange:c.changeMedia,onInitMedia:c.media,location:"/public/uploadsResized",media:t.formData.car_images,onAdd:c.addMedia,onRemove:o},null,8,["server","is-invalid","onChange","onInitMedia","media","onAdd"])]),(h=c.errors)!=null&&h.media?(d(),n("p",aa,i((y=c.errors)==null?void 0:y.media[0]),1)):p("",!0)])])]),e("div",oa,[e("div",sa,[e("div",ra,[e("button",{class:"modal-default-button py-3 bg-gray-500 rounded",onClick:a[5]||(a[5]=f=>c.$emit("close"))}," \u0627\u063A\u0644\u0627\u0642 ")]),e("div",da,[e("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6",onClick:a[6]||(a[6]=f=>{t.formData.date=t.formData.date?t.formData.date:c.getTodayDate(),c.$emit("a",t.formData),t.formData=""}),disabled:!t.formData.client_id&&!t.formData.client_name}," \u062D\u0641\u0638 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A ",8,la)])])])])])])):p("",!0)]}),_:3}))}},na=e("h2",{class:"mb-5 dark:text-white text-center"}," \u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 \u061F ",-1),ca={key:0,class:"py-2"},ua={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},ma={class:"bg-white overflow-hidden shadow-sm"},ga={class:"p-6 dark:bg-gray-900"},fa={class:"flex flex-col"},ha={class:"grid grid-cols-2 md:grid-cols-5 lg:grid-cols-5 gap-2 lg:gap-1"},ya={class:"flex items-center max-w-5xl"},ba=e("label",{class:"dark:text-gray-200",for:"simple-search"},null,-1),va={class:"relative w-full"},pa=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-200 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),_a={value:"0",disabled:""},xa={value:""},ka=["value"],$a={class:"text-center"},wa=e("div",null,null,-1),Ca={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},Da={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},Ma={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},Aa=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0627\u0633\u0645 \u0635\u0627\u062D\u0628 \u0627\u0644\u0633\u06CC\u0627\u0631\u06D5 ",-1),Na={scope:"col",class:"px-1 py-3 text-base"},La={scope:"col",class:"px-1 py-3 text-base"},Sa={scope:"col",class:"px-1 py-3 text-base"},za={scope:"col",class:"px-1 py-3 text-base"},Ua={scope:"col",class:"px-1 py-3 text-base"},Ia={scope:"col",class:"px-1 py-3 text-base"},Va=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0627\u0644\u0645\u0644\u0641\u0627\u062A \u0627\u0644\u0645\u062E\u0632\u0646\u0629 ",-1),Ba={scope:"col",class:"px-1 py-3 text-base",style:{width:"90px"}},Ta={className:"border dark:border-gray-800 text-center  dark:text-gray-200 text-black px-1 py-2 ",style:{"font-weight":"bold","font-size":"16px"}},Fa={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ra={className:"border dark:border-gray-800 text-center px-1 py-2 "},ja={className:"border dark:border-gray-800 text-center px-1 py-2 "},Xa={className:"border dark:border-gray-800 text-center px-1 py-2 "},Oa={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ya={className:"border dark:border-gray-800 text-center px-1 py-2 "},qa={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ha=["href"],Ea=["src"],Ga={className:"border dark:border-gray-800 text-start px-1 py-2"},Ka=["onClick"],Wa=["onClick"],Ja={class:"spaner"},Pa=e("div",null,null,-1),ro={__name:"Index",props:{clientAnnual:Array},setup(t){de();const u=E();let o=x(!1),c=x(!1),a=x(!1),s=x(!1);x(0),x(0);let h=x(!1);function y(m={}){w.value=m,a.value=!0}function f(m={}){w.value=m,s.value=!0}function g(m={}){w.value={},c.value=!0}const w=x({}),N=x([]);let T=x(!1),L=0,F=1,S="";const z=()=>{F=0,N.value.length=0,T.value=!T.value},K=async m=>{console.log(m);try{const r=(await A.get("api/getIndexCarAnnual",{params:{limit:100,page:F,q:S,user_id:L}})).data;r.data.length<100?(N.value.push(...r.data),m.complete()):(N.value.push(...r.data),m.loaded()),F++}catch(l){console.log(l)}};function W(m){a.value=!1,A.post("/api/updateCarsAnnual",m).then(l=>{o.value=!1,u.success("\u062A\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}),z()}).catch(l=>{o.value=!1,u.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}function J(m){A.post("/api/delCarsAnnualr",m).then(l=>{s.value=!1,u.success("\u062D\u0630\u0641 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 \u0628\u0646\u062C\u0627\u062D",{timeout:3e3,position:"bottom-right",rtl:!0}),z()}).catch(l=>{console.error(l)})}const Y=me(z,500);function P(m){A.post("/api/addCarsAnnual",m).then(l=>{h.value=l.data.id,u.success("\u062A\u0645 \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0628\u0646\u062C\u0627\u062D",{timeout:5e3,position:"bottom-right",rtl:!0})}).catch(l=>{console.error(l)})}function Q(m){return`/public/uploadsResized/${m}`}function Z(m){return`/public/uploads/${m}`}return(m,l)=>(d(),n($,null,[k(b(le),{title:"Dashboard"}),k(It,{formData:w.value,saveCar:b(h),show:!!b(c),client:t.clientAnnual,onA:l[0]||(l[0]=r=>P(r)),onClose:l[1]||(l[1]=r=>{C(c)?c.value=!1:c=!1,C(h)?h.value=0:h=0,z()})},{header:M(()=>[]),_:1},8,["formData","saveCar","show","client"]),k(ia,{formData:w.value,saveCar:b(h),show:!!b(a),client:t.clientAnnual,onA:l[2]||(l[2]=r=>W(r)),onClose:l[3]||(l[3]=r=>C(a)?a.value=!1:a=!1)},{header:M(()=>[]),_:1},8,["formData","saveCar","show","client"]),k(ue,{show:!!b(s),formData:w.value,onA:l[4]||(l[4]=r=>J(r)),onClose:l[5]||(l[5]=r=>C(s)?s.value=!1:s=!1)},{header:M(()=>[na]),_:1},8,["show","formData"]),k(ie,null,{default:M(()=>[m.$page.props.auth.user.type_id==1?(d(),n("div",ca,[e("div",ua,[e("div",ma,[e("div",ga,[e("div",fa,[e("div",ha,[e("div",null,[e("form",ya,[ba,e("div",va,[pa,v(e("input",{"onUpdate:modelValue":l[6]||(l[6]=r=>C(S)?S.value=r:S=r),onInput:l[7]||(l[7]=(...r)=>b(Y)&&b(Y)(...r)),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"\u0628\u062D\u062B",required:""},null,544),[[_,b(S)]])])])]),e("div",null,[v(e("select",{onChange:l[8]||(l[8]=r=>z()),"onUpdate:modelValue":l[9]||(l[9]=r=>C(L)?L.value=r:L=r),id:"default",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 mb-6 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500"},[e("option",_a,i(m.$t("selectCustomer")),1),e("option",xa,i(m.$t("allOwners")),1),(d(!0),n($,null,D(t.clientAnnual,(r,U)=>(d(),n("option",{key:U,value:r.id},i(r.name),9,ka))),128))],544),[[H,b(L)]])]),e("div",$a,[e("button",{type:"button",onClick:l[10]||(l[10]=r=>g()),style:{"min-width":"150px"},className:"px-6 mb-12 mx-2 py-2 font-bold text-white bg-purple-600 rounded"}," \u0627\u0636\u0627\u0641\u0629 \u0633\u064A\u0627\u0631\u0629 ")])]),e("div",null,[wa,e("div",Ca,[e("table",Da,[e("thead",Ma,[e("tr",null,[Aa,e("th",Na,i(m.$t("car_type")),1),e("th",La,i(m.$t("year")),1),e("th",Sa,i(m.$t("color")),1),e("th",za,i(m.$t("car_number")),1),e("th",Ua,i(m.$t("note")),1),e("th",Ia,i(m.$t("date")),1),Va,e("th",Ba,i(m.$t("execute")),1)])]),e("tbody",null,[(d(!0),n($,null,D(N.value,r=>{var U;return d(),n("tr",{key:r.id,class:R([r.results==0?"":r.results==1?"bg-red-100 dark:bg-red-900":"bg-green-100 dark:bg-green-900","bg-white border-b dark:bg-gray-900 dark:border-gray-900 hover:bg-gray-50 dark:hover:bg-gray-600"])},[e("td",Ta,i((U=r.client)==null?void 0:U.name),1),e("td",Fa,i(r.car_type),1),e("td",Ra,i(r.year),1),e("td",ja,i(r.car_color),1),e("td",Xa,i(r.car_number),1),e("td",Oa,i(r.note),1),e("td",Ya,i(r.date),1),e("td",qa,[(d(!0),n($,null,D(r.car_images,(I,ee)=>(d(),n("a",{key:ee,href:Z(I.name),style:{cursor:"pointer"},target:"_blank"},[e("img",{src:Q(I.name),alt:"",class:"px-1",style:{"max-width":"100px","max-height":"50px",display:"inline"}},null,8,Ea)],8,Ha))),128))]),e("td",Ga,[e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-slate-500 rounded",onClick:I=>y(r)},[k(ce)],8,Ka),e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-orange-500 rounded",onClick:I=>f(r)},[k(ne)],8,Wa)])],2)}),128))])])])]),e("div",Ja,[k(b(ge),{car:N.value,onInfinite:K,identifier:b(T)},null,8,["car","identifier"])])])])])])])):p("",!0),Pa]),_:1})],64))}};export{ro as default};
