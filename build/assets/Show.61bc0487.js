import{o as i,c as ve,w as N,a as u,b as e,f as it,t as d,d as ke,e as U,v as z,i as f,T as he,x as _e,r as c,q as nt,m as we,E as Bt,u as $e,g as l,j as o,F as O,H as De,k,A as Ce,h as ct,l as at,s as Ne,n as xt}from"./app.96dbd014.js";import{a as Ae,_ as Se}from"./AuthenticatedLayout.df5133fb.js";import{M as Me}from"./Modal.4d543149.js";import{t as Pe}from"./laravel-vue-pagination.es.95bf5ec6.js";import{_ as v}from"./InputLabel.6b7f443c.js";import{_ as w}from"./TextInput.01e73a49.js";import{a as C}from"./index.31d6ce58.js";import{M as ft}from"./ModalDelCar.e2673c69.js";import{_ as Ie}from"./ModalEditCar_S.b27e03ee.js";import{_ as Fe}from"./ModalAddCarPayment.1ad8f8dc.js";import{_ as Te,a as Ee,b as Be,c as Ue,e as Ve}from"./exit.d57b2815.js";import{p as bt}from"./print.bf880a3e.js";import{p as Ut}from"./pay.9ddee8b6.js";import{t as je}from"./trash.63d2b81a.js";import{e as qe}from"./edit.09e73284.js";import{s as He}from"./show.e407f8c5.js";import{n as Re}from"./new.7c0b2028.js";import"./lodash.6421d1bb.js";/* empty css                                              *//* empty css                                                    */import"./Uploader.65d40c04.js";/* empty css                                                                 *//* empty css                                                       */const Le={key:0,class:"modal-mask"},ze={class:"modal-wrapper max-h-[80vh]"},Oe={class:"modal-container dark:bg-gray-900 overflow-auto max-h-[80vh]"},We={class:"modal-header text-center py-4 dark:text-gray-300"},Ye={class:"modal-body"},Ze={class:"grid grid-cols-2 gap-3 lg:gap-2"},Ge={class:"mb-4 mx-5"},Je={class:"mb-4 mx-5"},Ke={class:"mb-4 mx-5"},Qe={class:"mb-4 mx-5"},Xe={class:"mb-4 mx-5"},tr={class:"mb-4 mx-5"},er={class:"mb-4 mx-5"},rr={class:"mb-4 mx-5"},ar={class:"modal-footer my-2"},or={class:"flex flex-row"},sr={class:"basis-1/2 px-4"},dr={class:"basis-1/2 px-4"},lr=["disabled"],nr={__name:"ModalShowDriving",props:{show:Boolean,formDriving:Object},setup(b){return(m,s)=>(i(),ve(he,{name:"modal"},{default:N(()=>[b.show?(i(),u("div",Le,[e("div",ze,[e("div",Oe,[e("div",We,[it(" \u062A\u062E\u0648\u064A\u0644 \u0642\u064A\u0627\u062F\u0629 "+d(b.formDriving.car_typeDriving)+" "+d(b.formDriving.yearDriving)+" "+d(b.formDriving.car_colorDriving)+" \u0631\u0642\u0645 \u0634\u0627\u0646\u0635\u0649 "+d(b.formDriving.vinDriving)+" ",1),ke(m.$slots,"header")]),e("div",Ye,[e("div",Ze,[e("div",Ge,[s[10]||(s[10]=e("label",{class:"dark:text-gray-200",for:"amountTotal"},"\u0627\u0644\u0627\u0633\u0645 \u0643\u0627\u0645\u0644",-1)),U(e("input",{id:"amountTotal",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[0]||(s[0]=x=>b.formDriving.nameDriving=x)},null,512),[[z,b.formDriving.nameDriving]])]),e("div",Je,[s[11]||(s[11]=e("label",{class:"dark:text-gray-200",for:"carType"},"\u0627\u0644\u0633\u064A\u0627\u0631\u0629",-1)),U(e("input",{id:"carType",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[1]||(s[1]=x=>b.formDriving.car_typeDriving=x)},null,512),[[z,b.formDriving.car_typeDriving]])]),e("div",Ke,[s[12]||(s[12]=e("label",{class:"dark:text-gray-200",for:"vin"},"\u0631\u0642\u0645 \u0627\u0644\u0634\u0627\u0646\u0635\u064A",-1)),U(e("input",{id:"vin",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[2]||(s[2]=x=>b.formDriving.vinDriving=x)},null,512),[[z,b.formDriving.vinDriving]])]),e("div",Qe,[s[13]||(s[13]=e("label",{class:"dark:text-gray-200",for:"carNumber"},"\u0631\u0642\u0645 \u0627\u0644\u0633\u064A\u0627\u0631\u0629",-1)),U(e("input",{id:"carNumber",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[3]||(s[3]=x=>b.formDriving.car_numberDriving=x)},null,512),[[z,b.formDriving.car_numberDriving]])]),e("div",Xe,[s[14]||(s[14]=e("label",{class:"dark:text-gray-200",for:"color"},"\u0627\u0644\u0644\u0648\u0646",-1)),U(e("input",{id:"color",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[4]||(s[4]=x=>b.formDriving.car_colorDriving=x)},null,512),[[z,b.formDriving.car_colorDriving]])]),e("div",tr,[s[15]||(s[15]=e("label",{class:"dark:text-gray-200",for:"model"},"\u0645\u0648\u062F\u064A\u0644",-1)),U(e("input",{id:"model",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[5]||(s[5]=x=>b.formDriving.yearDriving=x)},null,512),[[z,b.formDriving.yearDriving]])]),e("div",er,[s[16]||(s[16]=e("label",{class:"dark:text-gray-200",for:"exitDate"},"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062A\u062E\u0648\u064A\u0644",-1)),U(e("input",{id:"exitDate",type:"date",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[6]||(s[6]=x=>b.formDriving.createdDriving=x)},null,512),[[z,b.formDriving.createdDriving]])])]),e("div",rr,[s[17]||(s[17]=e("label",{class:"dark:text-gray-200",for:"note"},"\u062A\u062E\u0648\u064A\u0644 \u0627\u0644\u0642\u064A\u0627\u062F\u0629",-1)),U(e("textarea",{id:"note",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":s[7]||(s[7]=x=>b.formDriving.noteDriving=x)},null,512),[[z,b.formDriving.noteDriving]])])]),e("div",ar,[e("div",or,[e("div",sr,[e("button",{class:"modal-default-button py-3 bg-gray-500 rounded",onClick:s[8]||(s[8]=x=>{m.$emit("close")})},d(m.$t("cancel")),1)]),e("div",dr,[e("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6",onClick:s[9]||(s[9]=x=>m.$emit("a",b.formDriving)),disabled:!b.formDriving.noteDriving},d(m.$t("yes")),9,lr)])])])])])])):f("",!0)]),_:3}))}},ir={},ur={class:"w-6 h-6 text-white dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"};function pr(b,m){return i(),u("svg",ur,[...m[0]||(m[0]=[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7h1v12a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V5a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h11.5M7 14h6m-6 3h6m0-10h.5m-.5 3h.5M7 7h3v3H7V7Z"},null,-1)])])}const cr=Ae(ir,[["render",pr]]);const br={class:"mb-5 dark:text-gray-400 text-center"},mr={class:"mb-5 dark:text-gray-400 text-center"},gr={key:0},yr={id:"alert-2",class:"p-4 mb-4 bg-red-100 rounded-lg dark:bg-red-200 text-center",role:"alert"},xr={class:"ml-3 text-sm font-medium text-red-700 dark:text-red-800"},fr={key:1,class:"py-4"},vr={class:"text-center pb-2 dark:text-gray-400"},kr={class:"max-w-9xl mx-auto sm:px-6 lg:px-8 p-6 dark:bg-gray-900"},hr={class:"overflow-hidden shadow-sm sm:rounded-lg"},_r={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 lg:gap-1"},wr={class:"pr-4"},$r={value:"undefined",disabled:""},Dr=["value"],Cr={className:"mb-4 mr-5"},Nr={class:"space-y-2 p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"},Ar={class:"flex items-center justify-between"},Sr={class:"relative inline-flex items-center cursor-pointer"},Mr=["checked"],Pr={class:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-700"},Ir={for:"switch-payments",class:"text-sm font-medium text-gray-700 dark:text-gray-300"},Fr={class:"relative inline-flex items-center cursor-pointer"},Tr=["checked"],Er={class:"px-4"},Br={className:"mb-4 mx-5"},Ur={class:"px-4"},Vr={className:"mb-4 mx-5"},jr={className:"mb-4  mr-5 print:hidden"},qr={className:"mb-4  mr-5 print:hidden"},Hr=["href"],Rr={className:"mb-4  mr-5 print:hidden"},Lr=["href"],zr={className:"mb-4  mr-5"},Or={className:"mb-4  mr-5"},Wr={className:"mb-4  mr-5"},Yr={className:"mb-4  mr-5"},Zr={className:"mb-4  mr-5"},Gr={key:0,className:"mb-4  mr-5 print:hidden"},Jr=["disabled"],Kr=["disabled"],Qr={className:"mb-4  mr-5 print:hidden"},Xr=["disabled"],ta={key:1,className:"mb-4  mr-5"},ea={className:"mb-4  mr-5"},ra={className:"mb-4  mr-5"},aa={className:"mb-4  mr-5"},oa={className:"mb-4  mr-5"},sa={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 lg:gap-1"},da={className:"mb-4  mr-5"},la={className:"mb-4  mr-5"},na={className:"mb-4  mr-5"},ia={className:"mb-4  mr-5 print:hidden"},ua=["disabled"],pa={key:0},ca={key:1},ba={key:2},ma={key:1,class:"relative overflow-x-auto shadow-md sm:rounded-lg mt-4 mb-5"},ga={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},ya={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},xa={class:"bg-rose-500 text-gray-100 rounded-l-lg mb-2 sm:mb-0"},fa={className:"px-1 py-2 text-base"},va={className:"px-1 py-2 text-base"},ka={className:"px-1 py-2 text-base"},ha={scope:"col",class:"px-1 py-2 text-base print:hidden",style:{width:"250px"}},_a={class:"text-center px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},wa={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},$a=["href"],Da={key:0,class:"text-center"},Ca={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Na={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Aa={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Sa={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Ma={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Pa={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Ia=["href"],Fa={class:"text-center px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Ta={className:"px-4 py-2 border dark:border-gray-800 dark:text-gray-200"},Ea={key:0,class:"text-center py-10"},Ba={key:1,class:"relative overflow-x-auto shadow-md sm:rounded-lg"},Ua={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},Va={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},ja={class:"rounded-l-lg mb-2 sm:mb-0"},qa={scope:"col",class:"px-1 py-2 text-base"},Ha={scope:"col",class:"px-1 py-2 text-base"},Ra={scope:"col",class:"px-1 py-2 text-base"},La={scope:"col",class:"px-1 py-2 text-base"},za={scope:"col",class:"px-1 py-2 text-base"},Oa={scope:"col",class:"px-1 py-2 text-base"},Wa={scope:"col",class:"px-1 py-2 text-base"},Ya={scope:"col",class:"px-1 py-2 text-base"},Za={scope:"col",class:"px-1 py-2 text-base print:hidden"},Ga={scope:"col",class:"px-1 py-2 text-base print:hidden"},Ja={scope:"col",class:"px-1 py-2 text-base"},Ka={scope:"col",class:"px-1 py-2 text-base"},Qa={scope:"col",class:"px-1 py-2 text-base"},Xa={scope:"col",class:"px-1 py-2 text-base"},to={scope:"col",class:"px-1 py-2 text-base"},eo={scope:"col",class:"px-1 py-2 text-base"},ro={scope:"col",class:"px-1 py-2 text-base"},ao={scope:"col",class:"px-1 py-2 text-base"},oo={scope:"col",class:"px-1 py-2 text-base print:hidden",style:{width:"250px"}},so={className:"border dark:border-gray-800 text-center px-2 py-1"},lo={className:"border dark:border-gray-800 text-center px-2 py-1"},no={className:"border dark:border-gray-800 text-center px-2 py-1"},io={className:"border dark:border-gray-800 text-center px-2 py-1"},uo={className:"border dark:border-gray-800 text-center px-2 py-1"},po={className:"border dark:border-gray-800 text-center px-2 py-1"},co={className:"border dark:border-gray-800 text-center px-2 py-1"},bo={className:"border dark:border-gray-800 text-center px-2 py-1"},mo={className:"border dark:border-gray-800 text-center px-2 py-1 print:hidden"},go={className:"border dark:border-gray-800 text-center px-2 py-1 print:hidden"},yo={className:"border dark:border-gray-800 text-center px-2 py-1 print:hidden"},xo={className:"border dark:border-gray-800 text-center px-2 py-1 print:hidden"},fo={className:"border dark:border-gray-800 text-center px-2 py-1"},vo={className:"border dark:border-gray-800 text-center px-2 py-1"},ko={className:"border dark:border-gray-800 text-center px-2 py-1"},ho={className:"border dark:border-gray-800 text-center px-2 py-1"},_o={className:"border dark:border-gray-800 text-center px-2 py-1"},wo={className:"border dark:border-gray-800 text-center px-2 py-1"},$o={className:"border dark:border-gray-800 text-center px-2 py-1"},Do={className:"border dark:border-gray-800 text-center px-1 py-2 "},Co={className:"border dark:border-gray-800 text-center px-2 py-1"},No={className:"border dark:border-gray-800 text-start px-2 py-1 print:hidden"},Ao=["onClick"],So=["onClick"],Mo=["onClick"],Po=["onClick"],Io=["onClick"],Fo=["onClick"],To=["onClick"],Eo=["onClick"],Bo=["href"],Uo={className:"border dark:border-gray-800 text-start px-2 py-1 print:hidden"},Vo=["href"],jo=["src"],qo={className:"border dark:border-gray-800 text-start px-2 py-1 print:hidden"},Ho=["onClick"],Ro=["onClick"],Lo={key:1,class:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/30 dark:to-pink-900/30 border-b dark:border-gray-700"},zo={colspan:"5",className:"border dark:border-gray-800 text-start px-3 py-2"},Oo={class:"font-semibold mr-2"},Wo={className:"border dark:border-gray-800 text-center px-2 py-2 font-bold text-red-700 dark:text-red-300 text-base bg-red-50 dark:bg-red-900/20"},Yo={className:"border dark:border-gray-800 text-center px-2 py-2 text-sm"},Zo={className:"border dark:border-gray-800 text-center px-2 py-2 print:hidden"},Go=["href"],Jo={key:0,class:"bg-gradient-to-r from-yellow-100 to-amber-100 dark:from-yellow-900/30 dark:to-amber-900/30 border-t-4 border-amber-500"},Ko={className:"border dark:border-gray-800 text-center px-2 py-3 font-bold text-xl bg-amber-200 dark:bg-amber-800 text-amber-900 dark:text-amber-100"},Qo={key:1,class:"bg-gradient-to-r from-green-200 to-emerald-200 dark:from-green-900/40 dark:to-emerald-900/40 border-t-4 border-green-600"},Xo={className:"border dark:border-gray-800 text-center px-2 py-3 font-bold text-2xl bg-green-300 dark:bg-green-700 text-green-900 dark:text-green-100"},ts={class:"mt-3 text-center",style:{direction:"ltr"}},es={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 dark:text-gray-400 hidden print:block"},rs={class:"flex flex-row"},as={class:"basis-1/2"},Ns={__name:"Show",props:{url:String,clients:Array,client_id:String,client:Object,q:String},setup(b){let m=_e();c(0);let s=c({}),x=c(0),M=c(0),P=c(0),ut=1,q=c(!1),X=c(!1),tt=c(!1),W=c(!1),mt=c(!1),Y=c(!1),$=c(!1),T=c(!1),ot=c(!1),Z=c(!1),G=c(!1),J=c(!1),pt=c(!1),K=c(!1);c(0);let g=c({}),E=c({}),H=c(0),Q=c(""),I=c(0),A=c(0);c(0);let et=c(!1),rt=c(!1);const V=b;let st=async(r=1)=>{ot.value=!1,C.get(`/api/getIndexAccountsSelas?page=${r}&user_id=${V.client_id}&from=${M.value}&to=${P.value}`).then(t=>{s.value=t.data,A.value=t.data.client.id,ce(t.data.cars_sum),ot.value=!0}).catch(t=>{console.error(t),ot.value=!0})};function R(){let r="",t="";try{r=s.value.transactions.filter(n=>n.type==="out"&&n.amount<0&&n.is_pay===1)}catch{}try{t=r.reduce((n,p)=>n+p.amount,0)}catch{}return{totalAmount:t}}const Vt=nt(()=>{var r,t;try{return((t=(r=s.value)==null?void 0:r.transactions)==null?void 0:t.filter(n=>n.type==="out"&&n.amount<0&&n.is_pay===1).length)||0}catch{return 0}});function jt(r={}){g.value=r,et.value=!0}function qt(r={}){g.value=r,rt.value=!0}function Ht(r){var t,n;r.balance=R().totalAmount*-1-((t=s.value)==null?void 0:t.cars_paid)-((n=s.value)==null?void 0:n.cars_discount),C.post("/api/AddPayFromBalanceCar",r).then(p=>{et.value=!1,F()}).catch(p=>{console.error(p)})}function Rt(r){C.post("/api/DelPayFromBalanceCar",r).then(t=>{rt.value=!1,F()}).catch(t=>{console.error(t)})}const F=async(r=1)=>{C.get(`/api/getIndexAccountsSelas?page=${r}&user_id=${A.value}&from=${M.value}&to=${P.value}`).then(t=>{s.value=t.data,A.value=t.data.client.id}).catch(t=>{console.error(t)})};we(()=>{st()}),Bt(()=>V.client_id,(r,t)=>{r&&r!==t&&(M.value=0,P.value=0,q.value=!1,Y.value=!1,$.value=!1,T.value=!1,I.value=0,H.value=0,Q.value="",ut=1,st())},{immediate:!1});const Lt=$e();let j=c(!1);function zt(r){Lt.get(route("sentToCourt",r)),st(),j.value=!1}function Ot(r={}){g.value=r,tt.value=!0}function Wt(r={}){g.value=r,g.value.dinar_s==0&&(g.value.dinar_s=g.value.dinar),X.value=!0}function Yt(r={}){g.value=r,g.value.notePayment=" \u0628\u064A\u062F ",W.value=!0}function Zt(r){C.post("/api/DelCar",r).then(t=>{tt.value=!1,m.success("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}),F()}).catch(t=>{console.error(t),m.error("\u0641\u0634\u0644 \u062D\u0630\u0641 \u0627\u0644\u0633\u064A\u0627\u0631\u0629",{timeout:2e3,position:"bottom-right",rtl:!0})})}function Gt(r){X.value=!1,C.post("/api/updateCarsS",r).then(t=>{j.value=!1,m.success("\u062A\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}),F()}).catch(t=>{m.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}),F()})}function Jt(r){var t,n;r.discountPayment||(r.discountPayment=0),C.get(`/api/addPaymentCar?car_id=${r.id}&discount=${r.discountPayment}&amount=${(t=r.amountPayment)!=null?t:0}&note=${(n=r.notePayment)!=null?n:""}`).then(p=>{W.value=!1,m.success(" \u062A\u0645 \u062F\u0641\u0639 \u0645\u0628\u0644\u063A \u062F\u0648\u0644\u0627\u0631 "+r.amountPayment+" \u0628\u0646\u062C\u0627\u062D ",{timeout:3e3,position:"bottom-right",rtl:!0}),F();let h=p.data;window.open(`/api/getIndexAccountsSelas?user_id=${V.client_id}&print=2&transactions_id=${h.id}`,"_blank")}).catch(p=>{j.value=!1,console.log(p),m.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}function Kt(r,t,n,p){x.value=!0,C.get(`/api/addPaymentCarTotal?amount=${r!=null?r:0}&discount=${n!=null?n:0}&note=${p}&client_id=${t!=null?t:0}`).then(h=>{W.value=!1,m.success(" \u062A\u0645 \u062F\u0641\u0639 \u0645\u0628\u0644\u063A \u062F\u0648\u0644\u0627\u0631 "+r+" \u0628\u0646\u062C\u0627\u062D ",{timeout:3e3,position:"bottom-right",rtl:!0}),q.value=!1,x.value=!1,F(),Qt();let B=h.data;window.open(`/api/getIndexAccountsSelas?user_id=${V.client_id}&print=2&transactions_id=${B.id}`,"_blank")}).catch(h=>{console.log(h),j.value=!1,x.value=!1,m.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}function Qt(){I.value=0,H.value=0,Q.value=""}function Xt(){q.value=!0,Y.value=!1}function te(){q.value=!1}function ee(){Y.value=!0,q.value=!1}function re(){Y.value=!1}function ae(r={}){g.value=r,g.value.prices=100,g.value.price_dinars=5e4,Z.value=!0}function oe(r={}){g.value=formshowModalShowExitCar,G.value=!0}function se(r={}){g.value=r,g.value.createdExit=kt(),J.value=!0}function de(r={}){g.value=r.value=!0}function le(r={}){E.value.car_typeDriving=r.car_type,E.value.yearDriving=r.year,E.value.car_colorDriving=r.car_color,E.value.vinDriving=r.vin,E.value.nameDriving=V.client.name,E.value.clientIdDriving=A.value,E.value.car_numberDriving=r.car_number,E.value.createdDriving=kt(),E.value.noteDriving="\u0627\u0646\u0627 \u0643\u0627\u0631\u0632\u0627\u0646 \u0633\u0631\u0647\u0646\u0643 \u0645\u062D\u0645\u062F (\u0648\u0643\u064A\u0644 \u0639\u0627\u0645 \u0633\u0644\u0627\u0645 \u062C\u0644\u0627\u0644 \u0627\u064A\u0648\u0628 ) (\u0645\u062F\u064A\u0631 \u0645\u0641\u0648\u0636 \u0634\u0631\u0643\u0629 \u0633\u0644\u0627\u0645 \u062C\u0644\u0627\u0644 \u0627\u064A\u0648\u0628) \u0642\u062F \u062E\u0648\u0644\u062A \u0627\u0644\u0633\u064A\u062F(name) \u0628\u0642\u064A\u0627\u062F\u0629 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 \u0630\u0627\u062A \u0627\u0644\u0645\u0648\u0627\u0635\u0641\u0627\u062A \u0627\u062F\u0646\u0627\u0647 \u0644\u0647 \u062D\u0642  \u0646\u0642\u0644\u0647\u0627  \u0645\u0646 \u0645\u062D\u0627\u0641\u0638\u0629 \u0627\u0644\u0649 \u0645\u062D\u0627\u0641\u0638\u0629 \u0627\u062E\u0631\u0649 \u0648\u062F\u0641\u0639 \u0627\u0644\u0631\u0633\u0648\u0645 \u0648\u0627\u0644\u063A\u0631\u0645\u0627\u062A \u0628\u064A\u0639 \u0648\u0634\u0631\u0627\u0621 \u0627\u0644\u0642\u0628\u0636 \u0627\u0644\u062B\u0645\u0646.",K.value=!0}function ne(){var t,n,p;let r=(p=(n=(t=s==null?void 0:s.value)==null?void 0:t.client)==null?void 0:n.wallet)==null?void 0:p.balance;I.value=r-H.value}function ie(){var t,n,p;let r=(p=(n=(t=s==null?void 0:s.value)==null?void 0:t.client)==null?void 0:n.wallet)==null?void 0:p.balance;console.log(r),I.value>r?(I.value=r,mt.value=!0,m.info(" \u0627\u0644\u0645\u0628\u0644\u063A \u0627\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u062F\u064A\u0646 \u0627\u0644\u0645\u0637\u0644\u0648\u0628 "+I.value,{timeout:4e3,position:"bottom-right",rtl:!0})):mt.value=!1}function ue(r){var t,n,p,h,B,_;C.get(`/api/addCarContracts?car_id=${r.id}&price=${(t=r.prices)!=null?t:0}&price_dinar=${(n=r.price_dinars)!=null?n:0}&paid=${(p=r.paids)!=null?p:0}&paid_dinar=${(h=r.paid_dinars)!=null?h:0}&phone=${(B=r.phone)!=null?B:""}&note=${(_=r.note)!=null?_:""}`).then(y=>{Z.value=!1,m.success(" \u062A\u0645 \u062F\u0641\u0639 \u0645\u0628\u0644\u063A \u0628\u0646\u062C\u0627\u062D ",{timeout:4e3,position:"bottom-right",rtl:!0}),F()}).catch(y=>{Z.value=!1,m.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}function pe(r){var t,n,p;C.get(`/api/editCarContracts?car_id=${r.id}&paid=${(t=r.paids)!=null?t:0}&paid_dinar=${(n=r.paid_dinars)!=null?n:0}&note=${(p=r.notePayment)!=null?p:""}`).then(h=>{G.value=!1,m.success(" \u062A\u0645 \u062F\u0641\u0639 \u0645\u0628\u0644\u063A \u062F\u0648\u0644\u0627\u0631 "+r.amountPayment+" \u0628\u0646\u062C\u0627\u062D ",{timeout:3e3,position:"bottom-right",rtl:!0}),F()}).catch(h=>{G.value=!1,m.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}function vt(r){C.get(`/api/makeCarExit?car_id=${r.id}&created=${r.createdExit}&phone=${r.phoneExit}&note=${r.noteExit}`).then(t=>{J.value=!1,m.success("\u062A\u0645 \u0627\u0636\u0627\u0641\u0629 \u062E\u0631\u0648\u062C\u064A\u0629 \u0644\u0644\u0633\u064A\u0627\u0631\u0629 \u0628\u0646\u062C\u0627\u062D ",{timeout:5e3,position:"bottom-right",rtl:!0}),F()}).catch(t=>{J.value=!1,m.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}function ce(r){C.get(`/api/checkClientBalance?userId=${V.client_id}&currentBalance=${r+R().totalAmount}`).then(t=>{console.log(t),t.status==201&&m.success(" \u062A\u0645 \u0645\u0631\u0627\u062C\u0639\u0629 \u0627\u0644\u062D\u0633\u0627\u0628 \u0628\u0646\u062C\u0627\u062D  "+t.data,{timeout:5e3,position:"bottom-right",rtl:!0})}).catch(t=>{m.error("\u0644\u0645 \u064A\u062A\u0645 \u0627\u0639\u0627\u062F\u0629 \u0641\u062D\u0635 \u0627\u0644\u062D\u0633\u0627\u0628  \u0628\u0646\u062C\u0627\u062D ",{timeout:5e3,position:"bottom-right",rtl:!0})})}function be(r){C.post("/api/makeDrivingDocument",r).then(t=>{K.value=!1,window.open(`/api/makeDrivingDocumentPdf?doc_id=${t.data.id}`,"_blank")}).catch(t=>{K.value=!1,m.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}function kt(){const r=new Date,t=r.getFullYear(),n=String(r.getMonth()+1).padStart(2,"0"),p=String(r.getDate()).padStart(2,"0");return`${t}-${n}-${p}`}function ht(r){return r?r.results==2?$.value:!0:!1}const me=nt(()=>{if(!ot.value||!s.value)return[];try{const r=s.value.data||[],t=s.value.transactions||[],n=[];if(Array.isArray(r))for(let _=0;_<r.length;_++){const y=r[_];n.push({type:"car",data:y,date:new Date(y.created_at||y.date||0),id:`car-${y.id||_}`})}if(T.value&&Array.isArray(t)){const _=t.filter(y=>y&&y.type==="out"&&Number(y.amount)<0&&y.is_pay===1);for(let y=0;y<_.length;y++){const D=_[y];n.push({type:"payment",data:D,date:new Date(D.created_at||D.created||0),id:`payment-${D.id||y}`})}}n.sort((_,y)=>_.date-y.date);let p=0,h=0;const B=[];for(let _=0;_<n.length;_++){const y=n[_];if(y.type==="car"){const D=y.data;if(ht(D)){const dt=Number(D.total_s)||0,lt=Number(D.discount)||0;p+=dt-lt,h+=dt-lt}}else if(y.type==="payment"){const D=Number(y.data.amount)||0;p+=D,h+=D}B.push({...y,balance:p,totalSum:h})}return B}catch(r){return console.error("\u274C Error in mergedData:",r),[]}});function ge(r){return`/public/uploadsResized/${r}`}function ye(r){return`/public/uploads/${r}`}nt(()=>$.value||T.value);const L=nt(()=>{var r,t;try{const n=Number(R().totalAmount||0),p=Number(((r=s.value)==null?void 0:r.cars_discount)||0),h=Number(((t=s.value)==null?void 0:t.cars_paid)||0);return n*-1-p-h}catch{return 0}}),xe=nt(()=>{var r,t,n;try{const p=Number(((n=(t=(r=s.value)==null?void 0:r.client)==null?void 0:t.wallet)==null?void 0:n.balance)||0);return L.value-p}catch{return L.value}});let _t=!1;return Bt(T,r=>{r?(_t=$.value,$.value=!0):$.value=_t}),(r,t)=>(i(),u(O,null,[l(o(De),{title:"Dashboard"}),l(Se,null,{header:N(()=>[...t[37]||(t[37]=[e("h2",{class:"font-semibold text-xl dark:text-gray-400 text-gray-800 leading-tight"}," \u0634\u0631\u0643\u0629 \u0633\u0644\u0627\u0645 \u062C\u0644\u0627\u0644 ",-1)])]),default:N(()=>{var n,p,h,B,_,y,D,gt,dt,lt,wt,$t,Dt,Ct,Nt;return[l(Te,{formData:o(g),show:!!o(Z),onA:t[0]||(t[0]=a=>ue(a)),onClose:t[1]||(t[1]=a=>k(Z)?Z.value=!1:Z=!1)},{header:N(()=>[...t[38]||(t[38]=[])]),_:1},8,["formData","show"]),l(ft,{show:!!o(et),formData:o(g),onA:t[2]||(t[2]=a=>Ht(a)),onClose:t[3]||(t[3]=a=>k(et)?et.value=!1:et=!1)},{header:N(()=>[e("h2",br," \u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062F\u0641\u0639 "+d(o(g).car_type)+" \u0627\u0644\u0633\u064A\u0627\u0631\u0629 \u061F \u0645\u0646 \u0627\u0644\u0631\u0635\u064A\u062F ",1)]),_:1},8,["show","formData"]),l(ft,{show:!!o(rt),formData:o(g),onA:t[4]||(t[4]=a=>Rt(a)),onClose:t[5]||(t[5]=a=>k(rt)?rt.value=!1:rt=!1)},{header:N(()=>[e("h2",mr," \u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0627\u0639\u0627\u062F\u0629 \u062F\u0641\u0639\u0629 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 "+d(o(g).car_type)+" \u0644\u0644\u0631\u0635\u064A\u062F \u061F ",1)]),_:1},8,["show","formData"]),l(Ee,{formData:o(g),show:!!o(G),onA:t[6]||(t[6]=a=>pe(a)),onClose:t[7]||(t[7]=a=>k(G)?G.value=!1:G=!1)},{header:N(()=>[...t[39]||(t[39]=[])]),_:1},8,["formData","show"]),l(Be,{formData:o(g),show:!!o(J),onA:t[8]||(t[8]=a=>vt(a)),onClose:t[9]||(t[9]=a=>k(J)?J.value=!1:J=!1)},{header:N(()=>[...t[40]||(t[40]=[])]),_:1},8,["formData","show"]),l(Ue,{formData:o(g),show:!!o(pt),onA:t[10]||(t[10]=a=>vt(a)),onClose:t[11]||(t[11]=a=>k(pt)?pt.value=!1:pt=!1)},{header:N(()=>[...t[41]||(t[41]=[])]),_:1},8,["formData","show"]),l(nr,{formDriving:o(E),show:!!o(K),onA:t[12]||(t[12]=a=>be(a)),onClose:t[13]||(t[13]=a=>k(K)?K.value=!1:K=!1)},{header:N(()=>[...t[42]||(t[42]=[])]),_:1},8,["formDriving","show"]),l(Ie,{formData:o(g),show:!!o(X),client:b.clients,onA:t[14]||(t[14]=a=>Gt(a)),onClose:t[15]||(t[15]=a=>k(X)?X.value=!1:X=!1)},{header:N(()=>[...t[43]||(t[43]=[])]),_:1},8,["formData","show","client"]),l(Fe,{formData:o(g),show:!!o(W),onA:t[16]||(t[16]=a=>Jt(a)),onClose:t[17]||(t[17]=a=>k(W)?W.value=!1:W=!1)},{header:N(()=>[...t[44]||(t[44]=[])]),_:1},8,["formData","show"]),l(ft,{show:!!o(tt),formData:o(g),onA:t[18]||(t[18]=a=>Zt(a)),onClose:t[19]||(t[19]=a=>k(tt)?tt.value=!1:tt=!1)},{header:N(()=>[...t[45]||(t[45]=[e("h2",{class:"mb-5 dark:text-gray-400 text-center"}," \u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 \u061F ",-1)])]),_:1},8,["show","formData"]),l(Me,{show:!!o(j),data:o(j).toString(),onA:t[20]||(t[20]=a=>zt(a,r.arg1)),onClose:t[21]||(t[21]=a=>k(j)?j.value=!1:j=!1)},null,8,["show","data"]),r.$page.props.success?(i(),u("div",gr,[e("div",yr,[e("div",xr,d(r.$page.props.success),1)])])):f("",!0),r.$page.props.auth.user.type_id==1||r.$page.props.auth.user.type_id==6?(i(),u("div",fr,[e("h2",vr,d(r.$t("sales_bill")),1),e("div",kr,[e("div",hr,[e("div",_r,[e("div",wr,[l(v,{class:"mb-1",for:"invoice_number",value:r.$t("Account")},null,8,["value"]),U(e("select",{onChange:t[22]||(t[22]=a=>F()),"onUpdate:modelValue":t[23]||(t[23]=a=>k(A)?A.value=a:A=a),id:"default",class:"pr-8 border border-gray-300 text-gray-900 mb-6 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 dark:border-gray-400 dark:placeholder-gray-400 dark:text-gray-600 dark:focus:ring-red-500 dark:focus:border-red-500"},[e("option",$r,d(r.$t("selectCustomer")),1),(i(!0),u(O,null,ct(b.clients,(a,yt)=>(i(),u(O,{key:yt},[a.wallet.balance>0||a.id==o(A)?(i(),u("option",{key:0,value:a.id},d(a.name),9,Dr)):f("",!0)],64))),128))],544),[[Ce,o(A)]])]),e("div",null,[e("div",Cr,[l(v,{for:"filters",value:"\u062E\u064A\u0627\u0631\u0627\u062A \u0627\u0644\u0639\u0631\u0636",class:"mb-2"}),e("div",Nr,[e("div",Ar,[t[47]||(t[47]=e("label",{for:"switch-completed",class:"text-sm font-medium text-gray-700 dark:text-gray-300"}," \u{1F697} \u0627\u0644\u0633\u064A\u0627\u0631\u0627\u062A \u0627\u0644\u0645\u0643\u062A\u0645\u0644\u0629 ",-1)),e("label",Sr,[e("input",{type:"checkbox",id:"switch-completed",onChange:t[24]||(t[24]=a=>k($)?$.value=!o($):$=!o($)),checked:!o($),class:"sr-only peer"},null,40,Mr),t[46]||(t[46]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1))])]),e("div",Pr,[e("label",Ir," \u{1F4B3} \u0627\u0644\u062F\u0641\u0639\u0627\u062A ("+d(Vt.value)+") ",1),e("label",Fr,[e("input",{type:"checkbox",id:"switch-payments",onChange:t[25]||(t[25]=a=>k(T)?T.value=!o(T):T=!o(T)),checked:o(T),class:"sr-only peer"},null,40,Tr),t[48]||(t[48]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"},null,-1))])])])])]),e("div",Er,[e("div",Br,[l(v,{for:"from",value:r.$t("from_date")},null,8,["value"]),l(w,{id:"from",type:"date",class:"mt-1 block w-full",modelValue:o(M),"onUpdate:modelValue":t[26]||(t[26]=a=>k(M)?M.value=a:M=a)},null,8,["modelValue"])])]),e("div",Ur,[e("div",Vr,[l(v,{for:"to",value:r.$t("to_date")},null,8,["value"]),l(w,{id:"to",type:"date",class:"mt-1 block w-full",modelValue:o(P),"onUpdate:modelValue":t[27]||(t[27]=a=>k(P)?P.value=a:P=a)},null,8,["modelValue"])])]),e("div",jr,[l(v,{for:"pay",value:"\u0641\u0644\u062A\u0631\u0629"}),e("button",{onClick:t[28]||(t[28]=at(a=>o(st)(),["prevent"])),class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-gray-500 rounded",style:{width:"100%"}},[...t[49]||(t[49]=[e("span",null,"\u0641\u0644\u062A\u0631\u0629",-1)])])]),e("div",qr,[l(v,{for:"pay",value:"\u0637\u0628\u0627\u0639\u0629"}),e("a",{href:`/api/getIndexAccountsSelas?user_id=${o(A)}&from=${o(M)}&to=${o(P)}&print=1&showComplatedCars=${o($)?0:1}`,target:"_blank",class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-orange-500 rounded block text-center",style:{width:"100%"}},[...t[50]||(t[50]=[e("span",null,"\u0637\u0628\u0627\u0639\u0629",-1)])],8,Hr)]),e("div",Rr,[l(v,{for:"pay",value:"\u0637\u0628\u0627\u0639\u0629"}),e("a",{href:`/api/getIndexAccountsSelas?user_id=${o(A)}&from=${o(M)}&to=${o(P)}&print=1&printExcel=1&showComplatedCars=${o($)?0:1}`,target:"_blank",class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-green-500 rounded block text-center",style:{width:"100%"}},[...t[51]||(t[51]=[e("span",null,"Excel",-1)])],8,Lr)]),e("div",zr,[l(v,{for:"car_total",value:"\u0645\u062C\u0645\u0648\u0639 \u0627\u0644\u0633\u064A\u0627\u0631\u0627\u062A"}),l(w,{id:"car_total",type:"text",class:"mt-1 block w-full",value:o(s).car_total,disabled:""},null,8,["value"])]),e("div",Or,[l(v,{for:"cars_sum",value:r.$t("Total_in_dollars")+" \u062C\u0645\u0631\u0643 "},null,8,["value"]),l(w,{id:"cars_sum",type:"text",class:"mt-1 block w-full",value:(n=o(s))==null?void 0:n.cars_sum,disabled:""},null,8,["value"])]),e("div",Wr,[l(v,{for:"cars_paid",value:"\u0645\u062C\u0645\u0648\u0639 \u0627\u0644\u0645\u062F\u0641\u0648\u0639  \u062C\u0645\u0631\u0643 \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631"}),l(w,{id:"cars_paid",type:"number",class:"mt-1 block w-full",value:parseFloat((p=o(s))==null?void 0:p.cars_sum)-(parseFloat((_=(B=(h=o(s))==null?void 0:h.client)==null?void 0:B.wallet)==null?void 0:_.balance)+parseFloat((y=o(s))==null?void 0:y.cars_discount)),disabled:""},null,8,["value"])]),e("div",Yr,[l(v,{for:"cars_discount",value:"\u0645\u062C\u0645\u0648\u0639 \u0627\u0644\u062E\u0635\u0648\u0645\u0627\u062A  \u062C\u0645\u0631\u0643 \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631"}),l(w,{id:"cars_discount",type:"text",class:"mt-1 block w-full",value:(D=o(s))==null?void 0:D.cars_discount,disabled:""},null,8,["value"])]),e("div",Zr,[l(v,{for:"cars_need_paid",value:"  \u0627\u0644\u0631\u0635\u064A\u062F \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631"}),l(w,{id:"cars_need_paid",type:"number",class:"mt-1 block w-full",value:R().totalAmount*-1-((gt=o(s))==null?void 0:gt.cars_sum),disabled:""},null,8,["value"])]),R().totalAmount*-1-((dt=o(s))==null?void 0:dt.cars_sum)!=0?(i(),u("div",Gr,[l(v,{for:"pay",value:"\u0627\u0636\u0627\u0641\u0629 \u062F\u0641\u0639\u0629"}),o(q)?f("",!0):(i(),u("button",{key:0,onClick:t[29]||(t[29]=at(a=>Xt(),["prevent"])),disabled:o(x),class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-green-500 rounded",style:{width:"100%"}},[...t[52]||(t[52]=[e("span",null,"\u0627\u0636\u0627\u0641\u0629 \u062F\u0641\u0639\u0629",-1)])],8,Jr)),o(q)?(i(),u("button",{key:1,onClick:t[30]||(t[30]=at(a=>te(),["prevent"])),disabled:o(x),class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-pink-500 rounded",style:{width:"100%"}},[...t[53]||(t[53]=[e("span",null,"\u0627\u062E\u0641\u0627\u0621 \u062F\u0641\u0639\u0629",-1)])],8,Kr)):f("",!0)])):f("",!0),e("div",Qr,[l(v,{for:"pay",value:"\u0639\u0631\u0636 \u0627\u0644\u062F\u0641\u0639\u0627\u062A"}),o(Y)?f("",!0):(i(),u("button",{key:0,onClick:t[31]||(t[31]=at(a=>ee(),["prevent"])),disabled:o(x),class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-purple-500 rounded",style:{width:"100%"}},[...t[54]||(t[54]=[e("span",null,"\u0639\u0631\u0636 \u0627\u0644\u062F\u0641\u0639\u0627\u062A",-1)])],8,Xr)),o(Y)?(i(),u("button",{key:1,onClick:t[32]||(t[32]=at(a=>re(),["prevent"])),class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-pink-500 rounded",style:{width:"100%"}},[...t[55]||(t[55]=[e("span",null,"\u0627\u062E\u0641\u0627\u0621 \u0627\u0644\u062F\u0641\u0639\u0627\u062A",-1)])])):f("",!0)]),L.value!=0?(i(),u("div",ta,[l(v,{for:"cars_need_paid",value:"\u0627\u0644\u0631\u0635\u064A\u062F \u063A\u064A\u0631 \u0645\u0648\u0632\u0639 \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631"}),l(w,{id:"cars_need_paid",type:"number",class:"mt-1 block w-full",value:L.value},null,8,["value"])])):f("",!0),e("div",ea,[l(v,{for:"contract_total",value:"\u0627\u0644\u0639\u0642\u0648\u062F \u0627\u0644\u0645\u0646\u062C\u0632\u0629"}),l(w,{id:"contract_total",type:"text",class:"mt-1 block w-full",value:o(s).contract_total,disabled:""},null,8,["value"])]),e("div",ra,[l(v,{for:"exit_car_total",value:"\u0627\u0644\u062E\u0631\u0648\u062C\u064A\u0627\u062A \u0627\u0644\u0645\u0646\u062C\u0632\u0629"}),l(w,{id:"exit_car_total",type:"text",class:"mt-1 block w-full",value:o(s).exit_car_total,disabled:""},null,8,["value"])]),e("div",aa,[l(v,{for:"cars_paid",value:"\u0645\u062C\u0645\u0648\u0639 \u0627\u0644\u062F\u064A\u0646 \u0639\u0642\u0648\u062F \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631"}),l(w,{id:"cars_paid",type:"number",class:"mt-1 block w-full",value:(lt=o(s))==null?void 0:lt.contract_total_debit_Dollar,disabled:""},null,8,["value"])]),e("div",oa,[l(v,{for:"cars_paid",value:"\u0645\u062C\u0645\u0648\u0639 \u0627\u0644\u062F\u064A\u0646 \u0639\u0642\u0648\u062F \u0628\u0627\u0644\u062F\u064A\u0646\u0627\u0631"}),l(w,{id:"cars_paid",type:"number",class:"mt-1 block w-full",value:(wt=o(s))==null?void 0:wt.contract_total_debit_Dinar,disabled:""},null,8,["value"])])]),o(q)?(i(),u("div",sa,[e("div",da,[l(v,{for:"discount",value:"\u0627\u0644\u062E\u0635\u0645"}),l(w,{id:"discount",type:"number",onInput:ne,class:"mt-1 block w-full",modelValue:o(H),"onUpdate:modelValue":t[33]||(t[33]=a=>k(H)?H.value=a:H=a)},null,8,["modelValue"])]),e("div",la,[l(v,{for:"percentage",value:" \u0627\u0644\u0645\u0628\u0644\u063A \u0628\u0627\u0644\u062F\u0648\u0644\u0627\u0631 \u0627\u0644\u0645\u0631\u0627\u062F \u062F\u0641\u0639\u0647"}),l(w,{id:"percentage",type:"number",onInput:ie,class:"mt-1 block w-full",modelValue:o(I),"onUpdate:modelValue":t[34]||(t[34]=a=>k(I)?I.value=a:I=a)},null,8,["modelValue"])]),e("div",na,[l(v,{for:"discount",value:"\u0645\u0644\u0627\u062D\u0638\u0629"}),l(w,{id:"discount",type:"text",class:"mt-1 block w-full",modelValue:o(Q),"onUpdate:modelValue":t[35]||(t[35]=a=>k(Q)?Q.value=a:Q=a)},null,8,["modelValue"])]),e("div",ia,[l(v,{for:"pay",value:"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062F\u0641\u0639"}),e("button",{onClick:t[36]||(t[36]=at(a=>Kt(o(I),o(A),o(H),o(Q)),["prevent"])),disabled:o(x),class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-green-500 rounded",style:{width:"100%"}},[o(mt)?(i(),u("span",pa,"\u064A\u0631\u062C\u0649 \u0645\u0631\u0627\u062C\u0639\u0629 \u0627\u0644\u0645\u0628\u0644\u063A \u0644")):f("",!0),o(x)?(i(),u("span",ba,"\u062C\u0627\u0631\u064A \u0627\u0644\u0637\u0628\u0627\u0639\u0629...")):(i(),u("span",ca,"\u062F\u0641\u0639"))],8,ua)])])):f("",!0),o(Y)?(i(),u("div",ma,[e("table",ga,[e("thead",ya,[e("tr",xa,[t[56]||(t[56]=e("th",{className:"px-1 py-2 text-base"},"#",-1)),e("th",fa,d(r.$t("date")),1),e("th",va,d(r.$t("description")),1),e("th",ka,d(r.$t("amount")),1),e("th",ha,d(r.$t("execute")),1)])]),e("tbody",null,[e("tr",_a,[t[58]||(t[58]=e("td",null,null,-1)),t[59]||(t[59]=e("td",null,null,-1)),t[60]||(t[60]=e("td",null,null,-1)),t[61]||(t[61]=e("td",null,null,-1)),e("td",wa,[e("a",{target:"_blank",style:{display:"inline-flex"},href:`/api/getIndexAccountsSelas?user_id=${o(s).client.id}&from=${o(M)}&to=${o(P)}&print=4`,tabIndex:"1",class:"px-4 py-1 text-white m-1 bg-blue-500 rounded"},[t[57]||(t[57]=it(" \u062C\u0645\u064A\u0639 \u0627\u0644\u062F\u0641\u0639\u0627\u062A ",-1)),l(bt)],8,$a)])]),(i(!0),u(O,null,ct((($t=o(s))==null?void 0:$t.transactions)||[],a=>(i(),u(O,{key:a.id},[a.type=="out"&&a.amount<0&&a.is_pay==1?(i(),u("tr",Da,[e("td",Ca,d(k(ut)?ut.value++:ut++),1),e("td",Na,d(a.id),1),e("td",Aa,d(a.created),1),e("td",Sa,d(a.description),1),e("td",Ma,d(a.amount*-1),1),e("td",Pa,[a.type=="out"&&a.amount<0?(i(),u("a",{key:0,target:"_blank",style:{display:"inline-flex"},href:`/api/getIndexAccountsSelas?user_id=${o(s).client.id}&from=${o(M)}&to=${o(P)}&print=2&transactions_id=${a.id}`,tabIndex:"1",class:"px-4 py-1 text-white m-1 bg-green-500 rounded"},[l(bt)],8,Ia)):f("",!0)])])):f("",!0)],64))),128)),e("tr",Fa,[t[62]||(t[62]=e("td",null,"\u0645\u062C\u0645\u0648\u0639 \u0627\u0644\u062E\u0635\u0648\u0645\u0627\u062A",-1)),e("td",null,d((Dt=o(s))==null?void 0:Dt.cars_discount),1),t[63]||(t[63]=e("td",null,"\u0645\u062C\u0645\u0648\u0639 \u0627\u0644\u062F\u0641\u0639\u0627\u062A",-1)),e("td",Ta,d(R().totalAmount*-1),1),e("td",null,"\u0627\u0644\u0646\u062A\u0627\u062A\u062C : "+d(R().totalAmount*-1-parseInt((Ct=o(s))==null?void 0:Ct.cars_discount)),1)])])])])):f("",!0),e("div",null,[o(ot)?(i(),u("div",Ba,[e("table",Ua,[e("thead",Va,[e("tr",ja,[e("th",qa,d(r.$t("no")),1),e("th",Ha,d(r.$t("car_type")),1),e("th",Ra,d(r.$t("year")),1),e("th",La,d(r.$t("color")),1),e("th",za,d(r.$t("vin")),1),e("th",Oa,d(r.$t("car_number")),1),e("th",Wa,d(r.$t("dinar")),1),e("th",Ya,d(r.$t("dolar_price")),1),e("th",Za,d(r.$t("dolar_custom")),1),e("th",Ga,d(r.$t("note")),1),t[65]||(t[65]=e("th",{scope:"col",class:"px-1 py-2 text-base print:hidden"}," \u062C\u0645\u0631\u0643 \u0645\u0646\u0641\u0633\u062A ",-1)),t[66]||(t[66]=e("th",{scope:"col",class:"px-1 py-2 text-base print:hidden"}," \u062E\u0635\u0645 \u0645\u0628\u0627\u0634\u0631 ",-1)),e("th",Ja,d(r.$t("shipping_dolar")),1),e("th",Ka,d(r.$t("coc_dolar")),1),e("th",Qa,d(r.$t("checkout")),1),e("th",Xa,d(r.$t("expenses")),1),t[67]||(t[67]=e("th",{scope:"col",class:"px-1 py-2 text-base"}," \u0646\u0642\u0644 \u0628\u0631\u064A ",-1)),e("th",to,d(r.$t("total")),1),e("th",eo,d(r.$t("paid")),1),e("th",ro,d(r.$t("discount")),1),t[68]||(t[68]=e("th",{scope:"col",class:"px-1 py-2 text-base bg-gradient-to-r from-blue-500 to-indigo-500 text-white dark:from-blue-600 dark:to-indigo-600"}," \u0627\u0644\u0631\u0635\u064A\u062F ",-1)),e("th",ao,d(r.$t("date")),1),e("th",oo,d(r.$t("execute")),1),t[69]||(t[69]=e("th",{scope:"col",class:"px-1 py-2 text-base print:hidden",style:{width:"100px"}}," \u062A\u062E\u0632\u064A\u0646 ",-1)),t[70]||(t[70]=e("th",{scope:"col",class:"px-1 py-2 text-base print:hidden",style:{width:"120px"}}," \u0627\u0644\u0631\u0635\u064A\u062F ",-1))])]),e("tbody",null,[(i(!0),u(O,null,ct(me.value,(a,yt)=>{var At,St,Mt,Pt,It,Ft,Tt,Et;return i(),u(O,{key:a.id},[a.type==="car"?U((i(),u("tr",{key:0,class:xt([{"bg-red-100 dark:bg-red-900":a.data.results==0,"bg-red-100 dark:bg-red-900":a.data.results==1,"bg-green-100 dark:bg-green-900":a.data.results==2,"bg-yellow-100 dark:bg-yellow-900":V.q&&(a.data.vin.startsWith(V.q)||(a.data.car_number?a.data.car_number.toString().startsWith(V.q):!1))},"border-b dark:bg-gray-900 dark:border-gray-900 hover:bg-gray-50 dark:hover:bg-gray-600"])},[e("td",so,d(yt+1),1),e("td",lo,d(a.data.car_type),1),e("td",no,d(a.data.year),1),e("td",io,d(a.data.car_color),1),e("td",uo,d(a.data.vin),1),e("td",po,d(a.data.car_number),1),e("td",co,d(a.data.dinar_s),1),e("td",bo,d(a.data.dolar_price_s),1),e("td",mo,d((a.data.dinar_s/a.data.dolar_price_s*100).toFixed(0)||0),1),e("td",go,d(a.data.note),1),e("td",yo,d((a.data.dinar_s/13e4*100).toFixed(0)||0),1),e("td",xo,d(((a.data.dinar_s/13e4*100).toFixed(0)||0)-((a.data.dinar_s/a.data.dolar_price_s*100).toFixed(0)||0)),1),e("td",fo,d(a.data.shipping_dolar_s),1),e("td",vo,d(a.data.coc_dolar_s),1),e("td",ko,d(a.data.checkout_s),1),e("td",ho,d(a.data.expenses_s),1),e("td",_o,d(a.data.land_shipping_s),1),e("td",wo,d(a.data.total_s.toFixed(0)),1),e("td",$o,d(a.data.paid),1),e("td",Do,d(a.data.discount),1),e("td",{className:"border dark:border-gray-800 text-center px-2 py-1 font-bold",class:xt({"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":a.totalSum>0,"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":a.totalSum<=0})},d(((At=a.totalSum)==null?void 0:At.toFixed(0))||0),3),e("td",Co,d(a.data.date),1),e("td",No,[e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-slate-500 rounded",onClick:S=>Wt(a.data)},[l(qe)],8,Ao),e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-orange-500 rounded",onClick:S=>Ot(a.data)},[l(je)],8,So),a.data.total_s!=a.data.paid+a.data.discount?(i(),u("button",{key:0,tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-green-500 rounded",onClick:S=>Yt(a.data)},[l(Ut)],8,Mo)):f("",!0),((St=a.data.contract)==null?void 0:St.price)!=((Mt=a.data.contract)==null?void 0:Mt.paid)||((Pt=a.data.contract)==null?void 0:Pt.price_dinar)!=((It=a.data.contract)==null?void 0:It.paid_dinar)?(i(),u("button",{key:1,tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-pink-500 rounded",onClick:S=>oe(a.data)},[l(Ut)],8,Po)):f("",!0),a.data.contract?f("",!0):(i(),u("button",{key:2,tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-yellow-500 rounded",onClick:S=>ae(a.data)},[l(Re)],8,Io)),a.data.is_exit?f("",!0):(i(),u("button",{key:3,tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-red-500 rounded",onClick:S=>se(a.data)},[l(Ve)],8,Fo)),a.data.is_exit?(i(),u("button",{key:4,tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-blue-500 rounded",onClick:S=>de(a.data)},[l(He)],8,To)):f("",!0),e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-violet-500 rounded",onClick:S=>le(a.data)},[l(cr)],8,Eo),e("a",{target:"_blank",style:{display:"inline-flex"},href:`/api/getIndexAccountsSelas?user_id=${o(s).client.id}&print=6&car_id=${a.data.id}`,tabIndex:"1",class:"px-1 py-1 text-white m-1 bg-gray-900 rounded"},[l(bt,{class:"inline-flex"})],8,Bo)]),e("td",Uo,[(i(!0),u(O,null,ct(a.data.car_images,(S,fe)=>(i(),u("a",{key:fe,href:ye(S.name),style:{cursor:"pointer"},target:"_blank"},[e("img",{src:ge(S.name),alt:"",class:"px-1",style:{"max-width":"80px","max-height":"50px",display:"inline"}},null,8,jo)],8,Vo))),128))]),e("td",qo,[L.value!=0?(i(),u("button",{key:0,tabIndex:"1",style:{"min-width":"100px"},class:"px-1 py-1 text-white mx-1 bg-green-500 rounded",onClick:S=>jt(a.data)}," \u062F\u0641\u0639 \u0645\u0646 \u0627\u0644\u0631\u0635\u064A\u062F ",8,Ho)):f("",!0),R().totalAmount*-1-((Ft=o(s))==null?void 0:Ft.cars_discount)-((Tt=o(s))==null?void 0:Tt.cars_sum)!=0&&a.data.paid?(i(),u("button",{key:1,tabIndex:"1",style:{"min-width":"100px"},class:"px-1 py-1 mt-1 text-white mx-1 bg-red-500 rounded",onClick:S=>qt(a.data)}," \u0627\u0639\u0627\u062F\u0629 \u0644\u0644\u0631\u0635\u064A\u062F ",8,Ro)):f("",!0)])],2)),[[Ne,ht(a.data)]]):f("",!0),a.type==="payment"?(i(),u("tr",Lo,[t[73]||(t[73]=e("td",{className:"border dark:border-gray-800 text-center px-2 py-2 font-bold text-purple-800 dark:text-purple-200"}," \u{1F4B3} ",-1)),e("td",zo,[t[71]||(t[71]=e("span",{class:"font-bold text-purple-800 dark:text-purple-200"},"\u{1F4B0} \u062F\u0641\u0639\u0629 \u0645\u0646 \u0627\u0644\u0639\u0645\u064A\u0644:",-1)),e("span",Oo,d(a.data.description),1)]),t[74]||(t[74]=e("td",{colspan:"2",className:"border dark:border-gray-800 text-center px-2 py-2"},null,-1)),t[75]||(t[75]=e("td",{colspan:"4",className:"border dark:border-gray-800 text-center px-2 py-2 print:hidden"},null,-1)),t[76]||(t[76]=e("td",{colspan:"5",className:"border dark:border-gray-800 text-center px-2 py-2"},null,-1)),e("td",Wo,[t[72]||(t[72]=e("span",{class:"text-red-600 dark:text-red-400"},"\u2B07\uFE0F -",-1)),it(" "+d((a.data.amount*-1).toFixed(0)),1)]),t[77]||(t[77]=e("td",{className:"border dark:border-gray-800 text-center px-2 py-2 bg-red-50 dark:bg-red-900/20"},null,-1)),t[78]||(t[78]=e("td",{className:"border dark:border-gray-800 text-center px-2 py-2 bg-red-50 dark:bg-red-900/20"},null,-1)),e("td",{className:"border dark:border-gray-800 text-center px-2 py-2 font-bold text-base",class:xt({"bg-purple-600 text-white dark:bg-purple-700":a.totalSum>0,"bg-green-600 text-white dark:bg-green-700":a.totalSum<=0})},d(((Et=a.totalSum)==null?void 0:Et.toFixed(0))||0),3),e("td",Yo," \u{1F4C5} "+d(a.data.created),1),e("td",Zo,[e("a",{target:"_blank",style:{display:"inline-flex"},href:`/api/getIndexAccountsSelas?user_id=${o(s).client.id}&print=2&transactions_id=${a.data.id}`,tabIndex:"1",class:"px-2 py-1 text-white bg-purple-600 rounded hover:bg-purple-700"},[l(bt,{class:"inline-flex"})],8,Go)]),t[79]||(t[79]=e("td",{className:"border dark:border-gray-800 text-center px-2 py-2 print:hidden"},null,-1)),t[80]||(t[80]=e("td",{className:"border dark:border-gray-800 text-center px-2 py-2 print:hidden"},null,-1))])):f("",!0)],64)}),128)),L.value!=0?(i(),u("tr",Jo,[t[81]||(t[81]=e("td",{className:"border dark:border-gray-800 text-center px-2 py-3 font-bold"}," \u26A0\uFE0F ",-1)),t[82]||(t[82]=e("td",{colspan:"16",className:"border dark:border-gray-800 text-start px-4 py-3"},[e("span",{class:"text-xl font-bold text-amber-800 dark:text-amber-200"},"\u{1F4B0} \u0627\u0644\u0631\u0635\u064A\u062F \u063A\u064A\u0631 \u0627\u0644\u0645\u0648\u0632\u0639 \u0639\u0644\u0649 \u0627\u0644\u0633\u064A\u0627\u0631\u0627\u062A:")],-1)),t[83]||(t[83]=e("td",{className:"border dark:border-gray-800 text-center px-2 py-3"},null,-1)),t[84]||(t[84]=e("td",{className:"border dark:border-gray-800 text-center px-2 py-3"},null,-1)),t[85]||(t[85]=e("td",{className:"border dark:border-gray-800 text-center px-2 py-3"},null,-1)),e("td",Ko,d(L.value.toFixed(0)),1),t[86]||(t[86]=e("td",{className:"border dark:border-gray-800 text-center px-2 py-3"},null,-1)),t[87]||(t[87]=e("td",{colspan:"3",className:"border dark:border-gray-800 text-center px-2 py-3 print:hidden"},null,-1))])):f("",!0),L.value!=0?(i(),u("tr",Qo,[t[88]||(t[88]=e("td",{className:"border dark:border-gray-800 text-center px-2 py-3 font-bold text-2xl"}," \u2705 ",-1)),t[89]||(t[89]=e("td",{colspan:"16",className:"border dark:border-gray-800 text-start px-4 py-3"},[e("span",{class:"text-2xl font-bold text-green-900 dark:text-green-200"},"\u{1F4CA} \u0635\u0627\u0641\u064A \u0627\u0644\u062F\u064A\u0646 (\u0627\u0644\u0631\u0635\u064A\u062F \u0627\u0644\u0646\u0647\u0627\u0626\u064A):")],-1)),t[90]||(t[90]=e("td",{className:"border dark:border-gray-800 text-center px-2 py-3"},null,-1)),t[91]||(t[91]=e("td",{className:"border dark:border-gray-800 text-center px-2 py-3"},null,-1)),t[92]||(t[92]=e("td",{className:"border dark:border-gray-800 text-center px-2 py-3"},null,-1)),e("td",Xo,d(xe.value.toFixed(0)),1),t[93]||(t[93]=e("td",{className:"border dark:border-gray-800 text-center px-2 py-3"},null,-1)),t[94]||(t[94]=e("td",{colspan:"3",className:"border dark:border-gray-800 text-center px-2 py-3 print:hidden"},null,-1))])):f("",!0)])])])):(i(),u("div",Ea,[...t[64]||(t[64]=[e("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"},null,-1),e("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A...",-1)])]))]),e("div",ts,[l(o(Pe),{data:o(s),onPaginationChangePage:o(st),limit:2},null,8,["data","onPaginationChangePage"])])])])])):f("",!0),e("div",es,[e("div",rs,[e("div",as,[t[95]||(t[95]=it(" \u062A\u0648\u0642\u064A\u0639 \u0635\u0627\u062D\u0628 \u0627\u0644\u062D\u0633\u0627\u0628 ",-1)),t[96]||(t[96]=e("br",null,null,-1)),it(" "+d((Nt=o(s).client)==null?void 0:Nt.name),1)]),t[97]||(t[97]=e("div",{class:"basis-1/2 text-center"},"\u062A\u0648\u0642\u064A\u0639 \u0642\u0633\u0645 \u0627\u0644\u0645\u062D\u0627\u0633\u0628\u0629",-1)),t[98]||(t[98]=e("div",{class:"basis-1/2 text-end"},"\u062A\u0648\u0642\u064A\u0639 \u0627\u0644\u0645\u062F\u064A\u0631",-1))])])]}),_:1})],64))}};export{Ns as default};
