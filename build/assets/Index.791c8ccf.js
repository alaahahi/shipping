import{o as c,c as P,w as p,a as b,b as e,d as Q,t as d,e as C,v as I,i as B,T as X,r as u,D as U,g as s,j as n,F as V,H as Y,k as A,z as Z,h as ee,n as te,L as q}from"./app.0035b66a.js";import{a as ae,_ as oe}from"./AuthenticatedLayout.80150b5e.js";/* empty css                                              *//* empty css                                                         */import{_ as v}from"./InputLabel.4977ed87.js";import{_ as z}from"./TextInput.27bd7c2b.js";import{a as $}from"./index.d33a7cb3.js";import{s as se}from"./show.546da7b9.js";import{t as le}from"./trash.da88942a.js";import{e as re}from"./edit.6cc81ade.js";import{M as de}from"./ModalDelCar.2a95d245.js";import{W as ne}from"./v3-infinite-loading.es.f9cf1816.js";import{d as ie}from"./debounce.11d1f2c8.js";/* empty css                                                    */const ue={key:0,class:"modal-mask"},me={class:"modal-wrapper max-h-[80vh]"},ce={class:"modal-container dark:bg-gray-900 overflow-auto max-h-[80vh]"},fe={class:"modal-header"},ge={class:"modal-body"},pe={className:"mb-4 mx-5"},be={class:"dark:text-gray-200",for:"name"},ve={className:"mb-4 mx-5"},he={class:"dark:text-gray-200",for:"phone"},ye={class:"modal-footer my-2"},xe={class:"flex flex-row"},_e={class:"basis-1/2 px-4"},ke={class:"basis-1/2 px-4"},we=["disabled"],L={__name:"ModalEditClient",props:{show:Boolean,formData:Object},setup(m){return(l,r)=>(c(),P(X,{name:"modal"},{default:p(()=>[m.show?(c(),b("div",ue,[e("div",me,[e("div",ce,[e("div",fe,[Q(l.$slots,"header")]),e("div",ge,[r[4]||(r[4]=e("h2",{class:"text-center dark:text-gray-200"}," \u062A\u0639\u062F\u064A\u0644 \u0632\u0628\u0648\u0646 ",-1)),e("div",pe,[e("label",be,d(l.$t("name")),1),C(e("input",{id:"name",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":r[0]||(r[0]=i=>m.formData.name=i)},null,512),[[I,m.formData.name]])]),e("div",ve,[e("label",he,d(l.$t("phone")),1),C(e("input",{id:"phone",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":r[1]||(r[1]=i=>m.formData.phone=i)},null,512),[[I,m.formData.phone]])])]),e("div",ye,[e("div",xe,[e("div",_e,[e("button",{class:"modal-default-button py-3 bg-gray-500 rounded",onClick:r[2]||(r[2]=i=>{l.$emit("close")})},d(l.$t("cancel")),1)]),e("div",ke,[e("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6",onClick:r[3]||(r[3]=i=>{l.$emit("a",m.formData),m.formData=""}),disabled:!m.formData.name},d(l.$t("yes")),9,we)])])])])])])):B("",!0)]),_:3}))}},$e={},Ce={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function De(m,l){return c(),b("svg",Ce,[...l[0]||(l[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a2.25 2.25 0 00-2.25-2.25H15a3 3 0 11-6 0H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 9m18 0V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v3"},null,-1)])])}const Ne=ae($e,[["render",De]]);const Me={class:"mb-5 dark:text-white text-center"},Ve={class:"py-12"},Ae={class:"mx-auto sm:px-6 lg:px-8"},Ie={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Be={class:"p-6 dark:bg-gray-900"},Ee={class:"grid grid-cols-2 md:grid-cols-5 lg:grid-cols-7 gap-2 lg:gap-1"},He={class:"flex items-center max-w-5xl"},Ue={class:"relative w-full"},qe={value:"0"},ze={class:"text-center px-4"},Le={class:"px-4"},je={className:"mb-4"},Re={class:"px-4"},Se={className:"mb-4"},Te={className:"mb-4  mr-5 print:hidden"},Fe=["href"],Oe={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},Ge={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},We={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},Je={class:"rounded-l-lg mb-2 sm:mb-0"},Ke={className:"px-1 py-2 text-base"},Pe={className:"px-1 py-2 text-base"},Qe={className:"px-1 py-2 text-base"},Xe={className:"px-1 py-2 text-base"},Ye={class:"flex-1 sm:flex-none dark:bg-gray-700 dark:text-gray-200"},Ze={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},et={className:"border border-white dark:border-gray-800 text-center  dark:text-gray-200 text-black px-1 py-2 ",style:{"font-weight":"bold","font-size":"16px"}},tt={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},at={className:"border border-white  dark:border-gray-800 text-center px-4 py-2"},ot={className:"border border-white  dark:border-gray-800 text-center px-4 py-2",style:{"min-height":"42px"}},st=["onClick"],lt=["onClick"],rt={class:"mt-3 text-center",style:{direction:"ltr"}},dt={class:"spaner"},kt={__name:"Index",setup(m){let l=u(!1),r=u(!1),i=u(!1);const h=u([]);let f=u({}),E=u(0);const y=u(0),x=u(0),g=u(""),H=u(0);let D=u(!1),N=1,_=u({}),k=new AbortController;const w=()=>{N=1,h.value.length=0,D.value=!D.value},j=async o=>{try{const t=await $.get("api/getIndexClients",{params:{limit:25,page:N,q:g.value,user_id:E.value,from:y.value,to:x.value},signal:k.signal});_.value=t.data,_.value.data.length<25?(h.value.push(..._.value.data),o.complete()):(h.value.push(..._.value.data),o.loaded()),N++}catch(t){console.error(t)}},R=()=>{k&&k.abort(),k=new AbortController};U([g,E,y,x],()=>{R(),M()}),U(H,o=>{console.log(o===1?"Loading data...":"Data loaded")});const M=ie(()=>{H.value=1,w()},500);function S(o={}){f.value=o,r.value=!0}function T(o={}){f.value=o,l.value=!0}function F(o){$.post("/api/clientsStore",o).then(t=>{w(),r.value=!1}).catch(t=>{console.error(t)})}function O(o){$.post("/api/clientsEdit",o).then(t=>{w(),l.value=!1}).catch(t=>{console.error(t)})}function G(o={}){f.value=o,i.value=!0}function W(o){$.post("/api/delClient",o).then(t=>{i.value=!1,w()}).catch(t=>{console.error(t)})}return(o,t)=>(c(),b(V,null,[s(n(Y),{title:"Dashboard"}),s(oe,null,{default:p(()=>[s(L,{show:n(r),formData:n(f),onA:t[0]||(t[0]=a=>F(a)),onClose:t[1]||(t[1]=a=>A(r)?r.value=!1:r=!1)},{header:p(()=>[...t[12]||(t[12]=[])]),_:1},8,["show","formData"]),s(de,{show:!!n(i),formData:n(f),onA:t[2]||(t[2]=a=>W(a)),onClose:t[3]||(t[3]=a=>A(i)?i.value=!1:i=!1)},{header:p(()=>[e("h2",Me," \u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u062A\u0627\u062C\u0631 "+d(n(f).name)+" \u061F ",1)]),_:1},8,["show","formData"]),s(L,{show:n(l),formData:n(f),onA:t[4]||(t[4]=a=>O(a)),onClose:t[5]||(t[5]=a=>A(l)?l.value=!1:l=!1)},{header:p(()=>[...t[13]||(t[13]=[])]),_:1},8,["show","formData"]),e("div",Ve,[e("div",Ae,[e("div",Ie,[e("div",Be,[e("div",Ee,[e("div",null,[s(v,{for:"from",value:o.$t("search"),class:"mb-1"},null,8,["value"]),e("form",He,[t[15]||(t[15]=e("label",{class:"dark:text-gray-200",for:"simple-search"},null,-1)),e("div",Ue,[t[14]||(t[14]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-200 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),C(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>g.value=a),onInput:t[7]||(t[7]=(...a)=>n(M)&&n(M)(...a)),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"\u0628\u062D\u062B",required:""},null,544),[[I,g.value]])])])]),e("div",null,[s(v,{for:"from",value:"\u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0641\u0626\u0629",class:"mb-1"}),C(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>g.value=a),id:"default",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 mb-6 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500"},[e("option",qe,d(o.$t("allOwners")),1),t[16]||(t[16]=e("option",{value:"debit"},"\u064A\u0648\u062C\u062F \u062F\u064A\u0646",-1))],512),[[Z,g.value]])]),e("div",ze,[s(v,{for:"pay",value:"\u0627\u0636\u0627\u0641\u0629",class:"mb-1"}),e("button",{className:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-red-500 rounded",onClick:t[9]||(t[9]=a=>S())},d(o.$t("addCustomer")),1)]),e("div",Le,[e("div",je,[s(v,{for:"from",value:o.$t("from_date")},null,8,["value"]),s(z,{id:"from",type:"date",class:"mt-1 block w-full",modelValue:y.value,"onUpdate:modelValue":t[10]||(t[10]=a=>y.value=a)},null,8,["modelValue"])])]),e("div",Re,[e("div",Se,[s(v,{for:"to",value:o.$t("to_date")},null,8,["value"]),s(z,{id:"to",type:"date",class:"mt-1 block w-full",modelValue:x.value,"onUpdate:modelValue":t[11]||(t[11]=a=>x.value=a)},null,8,["modelValue"])])]),e("div",Te,[s(v,{for:"pay",value:"\u0637\u0628\u0627\u0639\u0629"}),e("a",{target:"_blank",href:`api/getIndexClients?from=${y.value}&to=${x.value}&print=1&q=${g.value}`,class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-orange-500 rounded d-block",style:{width:"100%",display:"block","text-align":"center"}},[...t[17]||(t[17]=[e("span",null,"\u0637\u0628\u0627\u0639\u0629",-1)])],8,Fe)])]),e("div",Oe,[e("table",Ge,[e("thead",We,[e("tr",Je,[t[18]||(t[18]=e("th",{className:"px-1 py-2 text-base"},"#",-1)),e("th",Ke,d(o.$t("name")),1),e("th",Pe,d(o.$t("phoneNumber")),1),e("th",Qe,d(o.$t("debt")),1),e("th",Xe,d(o.$t("execute")),1)])]),e("tbody",Ye,[(c(!0),b(V,null,ee(h.value,(a,J)=>(c(),b("tr",{key:a==null?void 0:a.id,class:te(["border-b border-white dark:bg-gray-900 dark:border-gray-900 hover:bg-gray-50 dark:hover:bg-gray-600",a.balance<=0?"bg-green-100 dark:bg-green-900":"bg-red-100 dark:bg-red-900"])},[a!=null&&a.id?(c(),b(V,{key:0},[e("td",Ze,d(J),1),e("td",et,d(a.name),1),e("td",tt,d(a.phone),1),e("td",at,d(a.balance)+" $",1),e("td",ot,[s(n(q),{style:{display:"inline-flex"},className:"px-1 py-1  text-white mx-1 bg-blue-500 rounded d-inline-block",href:o.route("showClients",a.id)},{default:p(()=>[s(se)]),_:1},8,["href"]),e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-slate-500 rounded",onClick:K=>T(a)},[s(re)],8,st),a.balance==0?(c(),b("button",{key:0,tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-orange-500 rounded",onClick:K=>G(a)},[s(le)],8,lt)):B("",!0),s(n(q),{style:{display:"inline-flex"},className:"px-1 py-1  text-white mx-1 bg-purple-900 rounded d-inline-block",href:o.route("wallet",{id:a.id})},{default:p(()=>[s(Ne)]),_:1},8,["href"])])],64)):B("",!0)],2))),128))])])]),e("div",rt,[e("div",dt,[s(n(ne),{laravelData:h.value,onInfinite:j,identifier:n(D)},null,8,["laravelData","identifier"])])])])])])])]),_:1})],64))}};export{kt as default};
