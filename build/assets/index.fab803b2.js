import{z as V,u as ee,r,a as c,j as l,k as i,w as _,m as x,F as z,o as p,H as te,b as o,e as P,v as oe,t as a,g as se,f as U,n as ae,h as N}from"./app.a90cfd58.js";import{a as re}from"./AuthenticatedLayout.37907a42.js";import"./vue-tailwind-datepicker.4f305093.js";import{_ as ne,a as de,b as le,c as ie,n as ce,e as pe}from"./new.5c2a88e0.js";import{_ as ue}from"./ModalAddCars.be457d2f.js";import{a as A}from"./index.4cc6b8e6.js";import{s as ge}from"./show.91825652.js";import{p as he}from"./pay.551e30ad.js";import{d as me,W as xe}from"./debounce.e0b0f14b.js";import"./Uploader.ca49b0b1.js";const be={key:0,class:"py-2"},fe={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},ye={class:"bg-white overflow-hidden shadow-sm"},_e={class:"p-6 dark:bg-gray-900"},ve={class:"flex flex-col"},ke={class:"grid grid-cols-2 md:grid-cols-5 lg:grid-cols-5 gap-2 lg:gap-1"},we={class:"flex items-center max-w-5xl"},Ce=o("label",{class:"dark:text-gray-200",for:"simple-search"},null,-1),$e={class:"relative w-full"},De=o("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[o("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-200 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),Ne={class:"text-center"},Ae={value:"0",disabled:""},Ee={value:""},Me=["value"],Ie=o("div",null,null,-1),Se={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},ze={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},Be={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},Te={scope:"col",class:"px-1 py-3 text-base"},qe={scope:"col",class:"px-1 py-3 text-base"},Fe={scope:"col",class:"px-1 py-3 text-base"},Re={scope:"col",class:"px-1 py-3 text-base"},je={scope:"col",class:"px-1 py-3 text-base"},He={scope:"col",class:"px-1 py-3 text-base"},Pe={scope:"col",class:"px-1 py-3 text-base"},Ue={scope:"col",class:"px-1 py-3 text-base"},Ge=o("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0645\u062F\u0641\u0648\u0639 \u062F\u0648\u0644\u0627\u0631 ",-1),Le=o("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0645\u062F\u0641\u0648\u0639 \u062F\u064A\u0646\u0627\u0631 ",-1),Oe={scope:"col",class:"px-1 py-3 text-base"},We={scope:"col",class:"px-1 py-3 text-base",style:{width:"150px"}},Ye={className:"border dark:border-gray-800 text-center px-2 py-2 "},Je={className:"border dark:border-gray-800 text-center px-2 py-2 "},Ke={className:"border dark:border-gray-800 text-center px-2 py-2 "},Qe={className:"border dark:border-gray-800 text-center px-2 py-2 "},Xe={className:"border dark:border-gray-800 text-center px-2 py-2 "},Ze={className:"border dark:border-gray-800 text-center px-2 py-2 "},Ve={className:"border dark:border-gray-800 text-center px-2 py-2 "},et={className:"border dark:border-gray-800 text-center px-2 py-2 "},tt={className:"border dark:border-gray-800 text-center px-2 py-2 "},ot={className:"border dark:border-gray-800 text-center px-2 py-2 "},st={className:"border dark:border-gray-800 text-center px-2 py-2 "},at={className:"border dark:border-gray-800 text-start px-2 py-2"},rt=["onClick"],nt=["onClick"],dt=["onClick"],lt=["onClick"],it={class:"spaner"},ct=o("div",null,null,-1),vt={__name:"index",props:{client:Array},setup(B){V();const b=ee();r("");let u=r(!1),g=r(!1),h=r(!1),v=r(!1),f=r(!1);r(0),r(0),r(0),r(0),r(0),r(0),r(0);function G(t={}){n.value=t,n.value.prices=100,n.value.price_dinars=5e4,u.value=!0}function L(t={}){n.value=t,g.value=!0}function O(t={}){n.value=t,n.value.createdExit=Z(),h.value=!0}function W(t={}){n.value=t,v.value=!0}function Y(t={}){n.value=t,f.value=!0}const n=r({});r({});const k=r([]);let M=r(!1),w=0,I=1,C="";const y=()=>{I=0,k.value.length=0,M.value=!M.value},T=me(y,500),J=async t=>{try{const e=(await A.get("/getIndexCar",{params:{limit:100,page:I,q:C,user_id:w}})).data;e.data.length<100?(k.value.push(...e.data),t.complete()):(k.value.push(...e.data),t.loaded()),I++}catch(s){console.log(s)}};function K(t){var s,e,d,m,$,D;A.get(`/api/addCarContracts?car_id=${t.id}&price=${(s=t.prices)!=null?s:0}&price_dinar=${(e=t.price_dinars)!=null?e:0}&paid=${(d=t.paids)!=null?d:0}&paid_dinar=${(m=t.paid_dinars)!=null?m:0}&phone=${($=t.phone)!=null?$:""}&note=${(D=t.note)!=null?D:""}`).then(E=>{u.value=!1,b.success(" \u062A\u0645 \u062F\u0641\u0639 \u0645\u0628\u0644\u063A \u0628\u0646\u062C\u0627\u062D ",{timeout:4e3,position:"bottom-right",rtl:!0}),y()}).catch(E=>{u.value=!1,b.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}function Q(t){var s,e,d;A.get(`/api/editCarContracts?car_id=${t.id}&paid=${(s=t.paids)!=null?s:0}&paid_dinar=${(e=t.paid_dinars)!=null?e:0}&note=${(d=t.notePayment)!=null?d:""}`).then(m=>{g.value=!1,b.success(" \u062A\u0645 \u062F\u0641\u0639 \u0645\u0628\u0644\u063A \u062F\u0648\u0644\u0627\u0631 "+t.amountPayment+" \u0628\u0646\u062C\u0627\u062D ",{timeout:3e3,position:"bottom-right",rtl:!0}),y()}).catch(m=>{g.value=!1,b.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}function q(t){A.get(`/api/makeCarExit?car_id=${t.id}&created=${t.createdExit}&phone=${t.phoneExit}&note=${t.noteExit}`).then(s=>{h.value=!1,b.success("\u062A\u0645 \u0627\u0636\u0627\u0641\u0629 \u062E\u0631\u0648\u062C\u064A\u0629 \u0644\u0644\u0633\u064A\u0627\u0631\u0629 \u0628\u0646\u062C\u0627\u062D ",{timeout:5e3,position:"bottom-right",rtl:!0}),y()}).catch(s=>{h.value=!1,b.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}function X(t){A.post("/api/addCars",t).then(s=>{f.value=!1,y(),getcountTotalInfo()}).catch(s=>{console.error(s)})}function Z(){const t=new Date,s=t.getFullYear(),e=String(t.getMonth()+1).padStart(2,"0"),d=String(t.getDate()).padStart(2,"0");return`${s}-${e}-${d}`}return(t,s)=>(p(),c(z,null,[l(i(te),{title:"Dashboard"}),l(ue,{formData:n.value,show:!!i(f),client:B.client,onA:s[0]||(s[0]=e=>X(e)),onClose:s[1]||(s[1]=e=>x(f)?f.value=!1:f=!1)},{header:_(()=>[]),_:1},8,["formData","show","client"]),l(ne,{formData:n.value,show:!!i(u),onA:s[2]||(s[2]=e=>K(e)),onClose:s[3]||(s[3]=e=>x(u)?u.value=!1:u=!1)},{header:_(()=>[]),_:1},8,["formData","show"]),l(de,{formData:n.value,show:!!i(g),onA:s[4]||(s[4]=e=>Q(e)),onClose:s[5]||(s[5]=e=>x(g)?g.value=!1:g=!1)},{header:_(()=>[]),_:1},8,["formData","show"]),l(le,{formData:n.value,show:!!i(h),onA:s[6]||(s[6]=e=>q(e)),onClose:s[7]||(s[7]=e=>x(h)?h.value=!1:h=!1)},{header:_(()=>[]),_:1},8,["formData","show"]),l(ie,{formData:n.value,show:!!i(v),onA:s[8]||(s[8]=e=>q(e)),onClose:s[9]||(s[9]=e=>x(v)?v.value=!1:v=!1)},{header:_(()=>[]),_:1},8,["formData","show"]),l(re,null,{default:_(()=>[t.$page.props.auth.user.type_id==1||t.$page.props.auth.user.type_id==6?(p(),c("div",be,[o("div",fe,[o("div",ye,[o("div",_e,[o("div",ve,[o("div",ke,[o("div",null,[o("form",we,[Ce,o("div",$e,[De,P(o("input",{"onUpdate:modelValue":s[10]||(s[10]=e=>x(C)?C.value=e:C=e),onInput:s[11]||(s[11]=(...e)=>i(T)&&i(T)(...e)),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"\u0628\u062D\u062B",required:""},null,544),[[oe,i(C)]])])])]),o("div",Ne,[o("button",{type:"button",onClick:s[12]||(s[12]=e=>Y()),style:{"min-width":"150px"},className:"px-6 mb-12 mx-2 py-2 font-bold text-white bg-green-500 rounded"},a(t.$t("addCar")),1)]),o("div",null,[P(o("select",{onChange:s[13]||(s[13]=e=>y()),"onUpdate:modelValue":s[14]||(s[14]=e=>x(w)?w.value=e:w=e),id:"default",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 mb-6 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500"},[o("option",Ae,a(t.$t("selectCustomer")),1),o("option",Ee,a(t.$t("allOwners")),1),(p(!0),c(z,null,U(B.client,(e,d)=>(p(),c("option",{key:d,value:e.id},a(e.name),9,Me))),128))],544),[[se,i(w)]])])]),o("div",null,[Ie,o("div",Se,[o("table",ze,[o("thead",Be,[o("tr",null,[o("th",Te,a(t.$t("no")),1),o("th",qe,a(t.$t("car_owner")),1),o("th",Fe,a(t.$t("car_type")),1),o("th",Re,a(t.$t("year")),1),o("th",je,a(t.$t("color")),1),o("th",He,a(t.$t("vin")),1),o("th",Pe,a(t.$t("car_number")),1),o("th",Ue,a(t.$t("date")),1),Ge,Le,o("th",Oe,a(t.$t("note")),1),o("th",We,a(t.$t("execute")),1)])]),o("tbody",null,[(p(!0),c(z,null,U(k.value,e=>{var d,m,$,D,E,F,R,j,H;return p(),c("tr",{key:e.id,class:ae([e.results==0?"":e.results==1?"bg-red-100 dark:bg-red-900":"bg-green-100 dark:bg-green-900","bg-white border-b dark:bg-gray-900 dark:border-gray-900 hover:bg-gray-50 dark:hover:bg-gray-600"])},[o("td",Ye,a(e.no),1),o("td",Je,a((d=e.client)==null?void 0:d.name),1),o("td",Ke,a(e.car_type),1),o("td",Qe,a(e.year),1),o("td",Xe,a(e.car_color),1),o("td",Ze,a(e.vin),1),o("td",Ve,a(e.car_number),1),o("td",et,a((m=e.contract)==null?void 0:m.created),1),o("td",tt,a((($=e.contract)==null?void 0:$.paid)||0),1),o("td",ot,a(((D=e.contract)==null?void 0:D.paid_dinar)||0),1),o("td",st,a((E=e.contract)==null?void 0:E.note),1),o("td",at,[((F=e.contract)==null?void 0:F.price)!=((R=e.contract)==null?void 0:R.paid)||((j=e.contract)==null?void 0:j.price_dinar)!=((H=e.contract)==null?void 0:H.paid_dinar)?(p(),c("button",{key:0,tabIndex:"1",class:"px-2 py-1 text-white mx-1 bg-pink-500 rounded",onClick:S=>L(e)},[l(he)],8,rt)):N("",!0),e.contract?N("",!0):(p(),c("button",{key:1,tabIndex:"1",class:"px-2 py-1 text-white mx-1 bg-yellow-500 rounded",onClick:S=>G(e)},[l(ce)],8,nt)),e.is_exit?N("",!0):(p(),c("button",{key:2,tabIndex:"1",class:"px-2 py-1 text-white mx-1 bg-red-500 rounded",onClick:S=>O(e)},[l(pe)],8,dt)),e.is_exit?(p(),c("button",{key:3,tabIndex:"1",class:"px-2 py-1 text-white mx-1 bg-green-500 rounded",onClick:S=>W(e)},[l(ge)],8,lt)):N("",!0)])],2)}),128))])])]),o("div",it,[l(i(xe),{car:k.value,onInfinite:J,identifier:i(M)},null,8,["car","identifier"])])])])])])])])):N("",!0),ct]),_:1})],64))}};export{vt as default};
