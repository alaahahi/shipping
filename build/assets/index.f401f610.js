import{B as E,m as G,u as O,r as p,a,g as d,q as n,w as $,s as v,F as c,N as P,o as l,H as W,b as e,e as F,v as J,k as K,h as L,t as o,i as x,x as Q,n as X,L as Z}from"./app.df9d5784.js";import{_ as ee}from"./AuthenticatedLayout.b839f814.js";import{_ as T}from"./TextInput.dc2a6544.js";import{p as te}from"./print.3ecf8958.js";import{t as se}from"./trash.a75ea844.js";import{e as re}from"./edit.8d582c7e.js";import{M as oe}from"./ModalDelCar.3f903012.js";import{a as q}from"./index.2df51c65.js";/* empty css                                                                 *//* empty css                                                       */import{W as ae}from"./v3-infinite-loading.es.d8f230b7.js";/* empty css              */import{d as le}from"./debounce.e09b0f23.js";import"./_plugin-vue_export-helper.cdc0426e.js";/* empty css                                                    */const de={key:0,class:"py-2"},ne={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},ie={class:"bg-white overflow-hidden shadow-sm"},pe={class:"p-6 dark:bg-gray-900"},ce={class:"flex flex-col"},ue={class:"grid grid-cols-2 md:grid-cols-5 lg:grid-cols-5 gap-2 lg:gap-1"},ge={class:"flex items-center max-w-5xl mt-1"},ye={class:"relative w-full"},xe={class:"px-4"},be={class:"px-4"},me={key:0,class:"px-4"},he=["value"],_e={class:"px-4 print:hidden flex flex-col gap-1"},fe={className:" mr-5 print:hidden"},ve={key:0},ke={key:1},we={className:" mr-5 print:hidden"},Ce=["href"],$e={key:0},Ne={key:1},De={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},Ie={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},Be={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},Me={scope:"col",class:"px-1 py-3 text-base"},Se={scope:"col",class:"px-1 py-3 text-base"},Ve={scope:"col",class:"px-1 py-3 text-base"},Fe={scope:"col",class:"px-1 py-3 text-base"},Le={scope:"col",class:"px-1 py-3 text-base"},Te={scope:"col",class:"px-1 py-3 text-base"},qe={scope:"col",class:"px-1 py-3 text-base"},Ae={scope:"col",class:"px-1 py-3 text-base"},Ue={scope:"col",class:"px-1 py-3 text-base"},je={scope:"col",class:"px-1 py-3 text-base"},ze={scope:"col",class:"px-1 py-3 text-base"},Re={scope:"col",class:"px-1 py-3 text-base"},He={scope:"col",class:"px-1 py-3 text-base"},Ye={scope:"col",class:"px-1 py-3 text-base",style:{width:"150px"}},Ee={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ge={className:"border dark:border-gray-800 text-center px-1 py-2 "},Oe={className:"border dark:border-gray-800 text-center px-1 py-2 "},Pe={className:"border dark:border-gray-800 text-center px-1 py-2 "},We={className:"border dark:border-gray-800 text-center px-1 py-2 "},Je={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ke={className:"border dark:border-gray-800 text-center px-1 py-2 "},Qe={className:"border dark:border-gray-800 text-center px-1 py-2 "},Xe={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ze={className:"border dark:border-gray-800 text-center px-1 py-2 "},et={className:"border dark:border-gray-800 text-center px-1 py-2 "},tt={className:"border dark:border-gray-800 text-center px-1 py-2 "},st={className:"border dark:border-gray-800 text-center px-1 py-2 "},rt={className:"border dark:border-gray-800 text-center px-1 py-2 "},ot={className:"border dark:border-gray-800 text-center px-1 py-2 "},at={className:"border dark:border-gray-800 text-center px-1 py-2 "},lt={className:"border dark:border-gray-800 text-center px-1 py-2 "},dt={className:"border dark:border-gray-800 text-center px-1 py-2"},nt={className:"border dark:border-gray-800 text-start px-1 py-2"},it=["onClick"],pt=["href"],ct={class:"spaner"},ut={class:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-7"},gt={class:"flex items-start rounded-xl dark:bg-gray-600 dark:text-gray-300 bg-white p-4 shadow-lg"},yt={class:"mr-4"},xt={class:"mt-2 text-sm text-gray-500 dark:text-gray-200"},Vt={__name:"index",props:{client:Array,user:String,contractCreators:{type:Array,default:()=>[]},showBrokerage:{type:Boolean,default:!1}},setup(k){E();const N=k,b=G(()=>N.showBrokerage),A=O();p(!1),p(!1),p(!1);let m=p(!1);p(0);let D=p(0);function I(){const r=new Date,s=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0"),t=String(r.getDate()).padStart(2,"0");return`${s}-${i}-${t}`}function B(){const r=new Date,s=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0");return`${s}-${i}-01`}let u=p(B()),g=p(I());const M=p({}),f=p([]);let w=p(!1),y=p(""),C=1,h=N.user;const _=()=>{C=1,f.value.length=0,w.value=!w.value},U=async r=>{console.log(r);try{const s={limit:100,page:C,q:h||void 0,from:u.value||void 0,to:g.value||void 0};y.value&&y.value!==""&&y.value!=="0"&&(s.user_id=y.value);const i=await q.get("/api/getIndexContractCar",{params:s}),t=i.data;D.value=i.data.total,t.data.length<100?(f.value.push(...t.data),r.complete()):(f.value.push(...t.data),r.loaded()),C++}catch(s){console.log(s)}};function j(r){q.post("/api/DelCarContract",r).then(s=>{m.value=!1,A.success("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0639\u0642\u062F \u0628\u0646\u062C\u0627\u062D",{timeout:3e3,position:"bottom-right",rtl:!0}),_()}).catch(s=>{console.error(s)})}const S=le(_,500);function z(){u.value=B(),g.value=I(),_(),getcountTotalInfo()}function R(){u.value="",g.value="",_(),getcountTotalInfo()}function H(r){M.value=r,m.value=!0}return(r,s)=>{const i=P("InputLabel");return l(),a(c,null,[d(n(W),{title:"Dashboard"}),d(oe,{show:!!n(m),formData:M.value,onA:s[0]||(s[0]=t=>j(t)),onClose:s[1]||(s[1]=t=>v(m)?m.value=!1:m=!1)},{header:$(()=>[...s[9]||(s[9]=[e("h2",{class:"my-5 dark:text-white text-center"},"\u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u0639\u0642\u062F \u061F",-1)])]),_:1},8,["show","formData"]),d(ee,null,{default:$(()=>[r.$page.props.auth.user.type_id==8||r.$page.props.auth.user.type_id==10?(l(),a("div",de,[e("div",ne,[e("div",ie,[e("div",pe,[e("div",ce,[e("div",ue,[e("div",null,[e("form",ge,[s[11]||(s[11]=e("label",{class:"dark:text-gray-200",for:"simple-search"},null,-1)),e("div",ye,[s[10]||(s[10]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-200 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),F(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>v(h)?h.value=t:h=t),onInput:s[3]||(s[3]=(...t)=>n(S)&&n(S)(...t)),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"\u0628\u062D\u062B",required:""},null,544),[[J,n(h)]])])])]),e("div",xe,[e("div",null,[d(i,{for:"from",value:"\u0645\u0646 \u062A\u0627\u0631\u064A\u062E"}),d(T,{id:"from",type:"date",class:"mt-1 block w-full",modelValue:n(u),"onUpdate:modelValue":s[4]||(s[4]=t=>v(u)?u.value=t:u=t)},null,8,["modelValue"])])]),e("div",be,[e("div",null,[d(i,{for:"to",value:"\u062D\u062A\u0649 \u062A\u0627\u0631\u064A\u062E"}),d(T,{id:"to",type:"date",class:"mt-1 block w-full",modelValue:n(g),"onUpdate:modelValue":s[5]||(s[5]=t=>v(g)?g.value=t:g=t)},null,8,["modelValue"])])]),r.$page.props.auth.user.type_id==8&&k.contractCreators&&k.contractCreators.length>0?(l(),a("div",me,[e("div",null,[d(i,{for:"createdBy",value:"\u0645\u0646\u0634\u0626 \u0627\u0644\u0639\u0642\u062F"}),F(e("select",{id:"createdBy","onUpdate:modelValue":s[6]||(s[6]=t=>v(y)?y.value=t:y=t),onChange:s[7]||(s[7]=t=>_()),class:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"},[s[12]||(s[12]=e("option",{value:""},"\u0627\u0644\u0643\u0644",-1)),(l(!0),a(c,null,L(k.contractCreators,t=>(l(),a("option",{key:t.id,value:t.id},o(t.name),9,he))),128))],544),[[K,n(y)]])])])):x("",!0),e("div",_e,[d(i,{value:"\u0627\u062E\u062A\u0635\u0627\u0631\u0627\u062A"}),e("div",{class:"flex gap-2"},[e("button",{type:"button",onClick:z,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500"}," \u0647\u0630\u0627 \u0627\u0644\u0634\u0647\u0631 "),e("button",{type:"button",onClick:R,class:"px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500"}," \u0639\u0631\u0636 \u0627\u0644\u0643\u0644 ")])]),e("div",fe,[d(i,{for:"pay",value:"\u0641\u0644\u062A\u0631\u0629"}),e("button",{onClick:s[8]||(s[8]=Q(t=>{_(),r.getcountTotalInfo()},["prevent"])),class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-gray-500 rounded",style:{width:"100%"}},[r.isLoading?(l(),a("span",ke,"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...")):(l(),a("span",ve,"\u0641\u0644\u062A\u0631\u0629"))])]),e("div",we,[d(i,{for:"pay",value:"\u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0639\u0642\u0648\u062F"}),e("a",{class:"px-6 mb-12 py-2 mt-1 font-bold text-white bg-blue-500 rounded",style:{display:"block","text-align":"center"},href:`api/contract_account_report?type=contract-report&from=${n(u)}&to=${n(g)}&print=2&q=${n(h)}`,target:"_blank"},[r.isLoading?(l(),a("span",Ne,"\u062C\u0627\u0631\u064A \u0627\u0644\u062D\u0641\u0638...")):(l(),a("span",$e,"\u0637\u0628\u0627\u0639\u0629"))],8,Ce)])]),e("div",null,[s[18]||(s[18]=e("div",null,null,-1)),e("div",De,[e("table",Ie,[e("thead",Be,[e("tr",null,[s[15]||(s[15]=e("th",{scope:"col",class:"px-1 py-3 text-base"},"no",-1)),e("th",Me,o(r.$t("seller")),1),b.value?(l(),a(c,{key:0},[e("th",Se,o(r.$t("debt")),1),e("th",Ve,o(r.$t("debtInDinars")),1)],64)):x("",!0),e("th",Fe,o(r.$t("car_type")),1),e("th",Le,o(r.$t("vin")),1),e("th",Te,o(r.$t("color")),1),e("th",qe,o(r.$t("carPrice")),1),e("th",Ae,o(r.$t("paid")),1),e("th",Ue,o(r.$t("remaining")),1),e("th",je,o(r.$t("Buyer")),1),b.value?(l(),a(c,{key:1},[e("th",ze,o(r.$t("debt")),1),e("th",Re,o(r.$t("debtInDinars")),1)],64)):x("",!0),b.value?(l(),a(c,{key:2},[s[13]||(s[13]=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0648\u0627\u0635\u0644 \u062F\u0648\u0644\u0627\u0631 ",-1)),s[14]||(s[14]=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0648\u0627\u0635\u0644 \u062F\u064A\u0646\u0627\u0631 ",-1))],64)):x("",!0),e("th",He,o(r.$t("note")),1),s[16]||(s[16]=e("th",{scope:"col",class:"px-1 py-3 text-base"},"\u0628\u062A\u0627\u0631\u064A\u062E",-1)),s[17]||(s[17]=e("th",{scope:"col",class:"px-1 py-3 text-base"},"\u0627\u0644\u0645\u0646\u0634\u0626",-1)),e("th",Ye,o(r.$t("execute")),1)])]),e("tbody",null,[(l(!0),a(c,null,L(f.value,(t,Y)=>{var V;return l(),a("tr",{key:t.id,class:X([t.status==0?"":t.status==1?"bg-red-100 dark:bg-red-900":"bg-green-100 dark:bg-green-900","bg-white border-b dark:bg-gray-900 dark:border-gray-900 hover:bg-gray-50 dark:hover:bg-gray-600"])},[e("td",Ee,o(Y+1),1),e("td",Ge,o(t.name_seller),1),b.value?(l(),a(c,{key:0},[e("td",Oe,o(t.tex_seller-t.tex_seller_paid),1),e("td",Pe,o(t.tex_seller_dinar-t.tex_seller_dinar_paid),1)],64)):x("",!0),e("td",We,o(t.car_name),1),e("td",Je,o(t.vin),1),e("td",Ke,o(t.color),1),e("td",Qe,o(t.car_price),1),e("td",Xe,o(t.car_paid),1),e("td",Ze,o(t.car_price-t.car_paid),1),e("td",et,o(t.name_buyer),1),b.value?(l(),a(c,{key:1},[e("td",tt,o(t.tex_buyer-t.tex_buyer_paid),1),e("td",st,o(t.tex_buyer_dinar-t.tex_buyer_dinar_paid),1)],64)):x("",!0),b.value?(l(),a(c,{key:2},[e("td",rt,o(t.tex_seller_paid+t.tex_buyer_paid),1),e("td",ot,o(t.tex_seller_dinar_paid+t.tex_buyer_dinar_paid),1)],64)):x("",!0),e("td",at,o(t.system_note),1),e("td",lt,o(t.created_at.slice(0,10)),1),e("td",dt,o(((V=t.user)==null?void 0:V.name)||"\u2014"),1),e("td",nt,[d(n(Z),{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-slate-500 rounded inline-flex",href:`/contract/${t.id}`},{default:$(()=>[d(re)]),_:1},8,["href"]),e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-orange-500 rounded",onClick:bt=>H(t)},[d(se)],8,it),e("a",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-blue-600 rounded inline-flex",href:`/contract_print/${t.id}`,target:"_blank"},[d(te)],8,pt)])],2)}),128))])])])]),e("div",ct,[d(n(ae),{car:f.value,onInfinite:U,identifier:n(w)},null,8,["car","identifier"])]),e("div",null,[e("div",ut,[e("div",gt,[s[20]||(s[20]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full border border-red-100 bg-red-50"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1)),e("div",yt,[s[19]||(s[19]=e("h2",{class:"font-semibold"},"\u062C\u0645\u064A\u0639 \u0627\u0644\u0639\u0642\u0648\u062F",-1)),e("p",xt,o(n(D)),1)])])])])])])])])])):x("",!0),s[21]||(s[21]=e("div",null,null,-1))]),_:1})],64)}}};export{Vt as default};
