import{u as q,r as m,a as d,g as n,q as M,w as C,F as y,o as i,H as E,b as t,t as r,L as I,f as N,h as $,i as V,x as O,e as B,v as H}from"./app.44ec93c3.js";import{_ as R}from"./AuthenticatedLayout.388caeb9.js";import{a as f}from"./index.b787f329.js";import{_ as v}from"./InputLabel.b093717f.js";import{_}from"./TextInput.28ac34ce.js";import"./_plugin-vue_export-helper.cdc0426e.js";const z={class:"flex justify-between items-center"},A={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},G={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},J={class:"py-12"},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Q={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},W={class:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-6 border-2 border-blue-200 dark:border-blue-700"},X={class:"text-3xl font-bold text-blue-900 dark:text-blue-100"},Y={class:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-6 border-2 border-green-200 dark:border-green-700"},Z={class:"text-3xl font-bold text-green-900 dark:text-green-100"},tt={class:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-6 border-2 border-purple-200 dark:border-purple-700"},et={class:"text-2xl font-bold text-purple-900 dark:text-purple-100"},st={class:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg p-6 border-2 border-orange-200 dark:border-orange-700"},rt={class:"text-2xl font-bold text-orange-900 dark:text-orange-100"},ot={class:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg p-8 mb-6 text-white shadow-lg"},at={class:"text-center"},lt={class:"text-5xl font-bold"},dt={class:"bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden"},nt={class:"p-6"},it={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},ut={class:"space-y-6"},ct={class:"flex justify-between items-start mb-4"},gt={class:"text-lg font-bold text-gray-900 dark:text-white"},xt={class:"text-sm text-gray-600 dark:text-gray-400"},mt={class:"text-right"},vt={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},bt={class:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 mb-4"},_t={class:"flex justify-between items-center mb-2"},pt=["onClick"],yt={key:0,class:"space-y-3"},ft={class:"flex gap-2"},kt=["onClick"],ht={key:1,class:"grid grid-cols-2 gap-4"},wt={class:"text-lg font-bold text-gray-900 dark:text-white"},Ct={class:"text-lg font-bold text-purple-600 dark:text-purple-400"},$t={class:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4"},Vt={class:"flex justify-between items-center mb-3"},St=["onClick"],jt={key:0,class:"space-y-2 mb-3"},Mt={class:"flex-1"},Dt={class:"font-semibold text-gray-900 dark:text-white"},Ut={class:"text-sm text-gray-600 dark:text-gray-400"},Pt={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Ft={class:"text-right mr-4"},Lt={class:"text-lg font-bold text-orange-600 dark:text-orange-400"},Tt={class:"flex gap-1 mt-1"},qt=["onClick"],Et=["onClick"],It={key:1,class:"text-center text-gray-500 dark:text-gray-400 text-sm py-3"},Nt={class:"grid grid-cols-3 gap-4 pt-3 border-t border-orange-200 dark:border-orange-700"},Ot={class:"text-lg font-bold text-orange-900 dark:text-orange-100"},Bt={class:"text-lg font-bold text-orange-900 dark:text-orange-100"},Ht={class:"text-lg font-bold text-orange-900 dark:text-orange-100"},Rt={class:"mt-4 bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-4 text-white"},zt={class:"flex justify-between items-center"},At={class:"text-2xl font-bold"},Gt={class:"mt-4"},Jt={class:"cursor-pointer text-blue-600 dark:text-blue-400 hover:underline"},Kt={class:"mt-3 space-y-2"},Qt={class:"grid grid-cols-3 gap-2"},Wt={class:"font-semibold"},Xt={class:"font-semibold"},Yt={class:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4"},Zt={class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},te={class:"space-y-4"},ee={class:"flex gap-2 pt-4"},ne={__name:"Show",props:{company:Object,shipments:Array,stats:Object},setup(u){const x=q(),b=m(null),p=m(0),k=m(!1),h=m(null),g=m(null),l=m({amount:"",driver_name:"",cmr_number:"",payment_date:new Date().toISOString().split("T")[0],notes:""}),c=o=>o?parseFloat(o).toLocaleString("en-US",{maximumFractionDigits:2}):"0",S=o=>o?new Date(o).toLocaleDateString("ar-EG"):"",D=o=>{b.value=o.id,p.value=o.clearance_per_car||40},U=async o=>{try{(await f.put(`/api/company-shipments/${o}/fees`,{clearance_per_car:p.value})).data.success&&(x.success("\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u062A\u062E\u0644\u064A\u0635 \u0628\u0646\u062C\u0627\u062D"),b.value=null,window.location.reload())}catch(e){console.error(e),x.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062A\u062D\u062F\u064A\u062B")}},P=()=>{b.value=null},j=(o,e=null)=>{h.value=o,e?(g.value=e.id,l.value={amount:e.amount,driver_name:e.driver_name,cmr_number:e.cmr_number||"",payment_date:e.payment_date,notes:e.notes||""}):(g.value=null,l.value={amount:"",driver_name:"",cmr_number:"",payment_date:new Date().toISOString().split("T")[0],notes:""}),k.value=!0},w=()=>{k.value=!1,h.value=null,g.value=null},F=async()=>{try{let o;g.value?o=await f.put(`/api/transport-payments/${g.value}`,l.value):o=await f.post(`/api/company-shipments/${h.value}/transport-payments`,l.value),o.data.success&&(x.success(o.data.message),w(),window.location.reload())}catch(o){console.error(o),x.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062D\u0641\u0638")}},L=async o=>{if(!!confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0647 \u0627\u0644\u062F\u0641\u0639\u0629\u061F"))try{(await f.delete(`/api/transport-payments/${o}`)).data.success&&(x.success("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062F\u0641\u0639\u0629 \u0628\u0646\u062C\u0627\u062D"),window.location.reload())}catch(e){console.error(e),x.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062D\u0630\u0641")}};return(o,e)=>(i(),d(y,null,[n(M(E),{title:`${u.company.name} - \u0627\u0644\u062D\u0633\u0627\u0628`},null,8,["title"]),n(R,null,{header:C(()=>[t("div",z,[t("div",null,[t("h2",A,r(u.company.name),1),t("p",G,r(u.company.phone||"\u0644\u0627 \u064A\u0648\u062C\u062F \u0631\u0642\u0645"),1)]),n(M(I),{href:"/company-balances",class:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700"},{default:C(()=>[...e[6]||(e[6]=[N(" \u0627\u0644\u0639\u0648\u062F\u0629 \u0644\u0644\u0642\u0627\u0626\u0645\u0629 ",-1)])]),_:1})])]),default:C(()=>[t("div",J,[t("div",K,[t("div",Q,[t("div",W,[e[7]||(e[7]=t("div",{class:"text-sm text-blue-700 dark:text-blue-300 mb-1"},"\u0639\u062F\u062F \u0627\u0644\u0634\u062D\u0646\u0627\u062A",-1)),t("div",X,r(u.stats.total_shipments),1)]),t("div",Y,[e[8]||(e[8]=t("div",{class:"text-sm text-green-700 dark:text-green-300 mb-1"},"\u0639\u062F\u062F \u0627\u0644\u0633\u064A\u0627\u0631\u0627\u062A",-1)),t("div",Z,r(u.stats.total_cars),1)]),t("div",tt,[e[9]||(e[9]=t("div",{class:"text-sm text-purple-700 dark:text-purple-300 mb-1"},"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u062A\u062E\u0644\u064A\u0635",-1)),t("div",et,r(c(u.stats.total_clearance))+" $",1)]),t("div",st,[e[10]||(e[10]=t("div",{class:"text-sm text-orange-700 dark:text-orange-300 mb-1"},"\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0646\u0642\u0644",-1)),t("div",rt,r(c(u.stats.total_transport))+" $",1)])]),t("div",ot,[t("div",at,[e[11]||(e[11]=t("div",{class:"text-lg mb-2"},"\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A \u0627\u0644\u0643\u0644\u064A",-1)),t("div",lt,r(c(u.stats.grand_total))+" $",1),e[12]||(e[12]=t("div",{class:"text-sm mt-2 opacity-90"},"\u0627\u0644\u062A\u062E\u0644\u064A\u0635 + \u0645\u062C\u0645\u0648\u0639 \u0627\u0644\u0646\u0642\u0644",-1))])]),t("div",dt,[t("div",nt,[t("h3",it," \u0627\u0644\u0634\u062D\u0646\u0627\u062A ("+r(u.shipments.length)+") ",1),t("div",ut,[(i(!0),d(y,null,$(u.shipments,s=>(i(),d("div",{key:s.id,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:shadow-md transition"},[t("div",ct,[t("div",null,[t("h4",gt,r(s.trip.ship_name)+" - "+r(s.trip.voy_no),1),t("p",xt,r(S(s.trip.sailing_date)),1)]),t("div",mt,[e[13]||(e[13]=t("div",{class:"text-sm text-gray-600 dark:text-gray-400"},"\u0639\u062F\u062F \u0627\u0644\u0633\u064A\u0627\u0631\u0627\u062A",-1)),t("div",vt,r(s.cars_count),1)])]),t("div",bt,[t("div",_t,[e[14]||(e[14]=t("h5",{class:"font-semibold text-gray-900 dark:text-white"},"\u0627\u0644\u062A\u062E\u0644\u064A\u0635",-1)),b.value!==s.id?(i(),d("button",{key:0,onClick:a=>D(s),class:"text-blue-600 dark:text-blue-400 hover:underline text-sm"}," \u062A\u0639\u062F\u064A\u0644 ",8,pt)):V("",!0)]),b.value===s.id?(i(),d("div",yt,[t("div",null,[n(v,{for:"clearance",value:"\u0627\u0644\u062A\u062E\u0644\u064A\u0635 \u0644\u0643\u0644 \u0633\u064A\u0627\u0631\u0629 (\u062F\u0648\u0644\u0627\u0631)"}),n(_,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),modelModifiers:{number:!0},type:"number",step:"0.01",class:"mt-1 block w-full"},null,8,["modelValue"])]),t("div",ft,[t("button",{onClick:a=>U(s.id),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"}," \u062D\u0641\u0638 ",8,kt),t("button",{onClick:P,class:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600"}," \u0625\u0644\u063A\u0627\u0621 ")])])):(i(),d("div",ht,[t("div",null,[e[15]||(e[15]=t("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"\u0627\u0644\u062A\u062E\u0644\u064A\u0635/\u0633\u064A\u0627\u0631\u0629",-1)),t("div",wt,r(c(s.clearance_per_car))+" $ ",1)]),t("div",null,[e[16]||(e[16]=t("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A",-1)),t("div",Ct,r(c(s.total_clearance))+" $ ",1)])]))]),t("div",$t,[t("div",Vt,[e[17]||(e[17]=t("h5",{class:"font-semibold text-gray-900 dark:text-white"},"\u062F\u0641\u0639\u0627\u062A \u0627\u0644\u0646\u0642\u0644 \u0627\u0644\u062F\u0627\u062E\u0644\u064A",-1)),t("button",{onClick:a=>j(s.id),class:"px-3 py-1 bg-orange-600 text-white rounded-md hover:bg-orange-700 text-sm"}," + \u0625\u0636\u0627\u0641\u0629 \u062F\u0641\u0639\u0629 ",8,St)]),s.transport_payments&&s.transport_payments.length>0?(i(),d("div",jt,[(i(!0),d(y,null,$(s.transport_payments,a=>(i(),d("div",{key:a.id,class:"bg-white dark:bg-gray-800 rounded p-3 flex justify-between items-center"},[t("div",Mt,[t("div",Dt,r(a.driver_name),1),t("div",Ut," CMR: "+r(a.cmr_number||"-")+" | "+r(S(a.payment_date)),1),a.notes?(i(),d("div",Pt,r(a.notes),1)):V("",!0)]),t("div",Ft,[t("div",Lt,r(c(a.amount))+" $ ",1),t("div",Tt,[t("button",{onClick:T=>j(s.id,a),class:"text-xs text-blue-600 dark:text-blue-400 hover:underline"}," \u062A\u0639\u062F\u064A\u0644 ",8,qt),e[18]||(e[18]=t("span",{class:"text-gray-400"},"|",-1)),t("button",{onClick:T=>L(a.id),class:"text-xs text-red-600 dark:text-red-400 hover:underline"}," \u062D\u0630\u0641 ",8,Et)])])]))),128))])):(i(),d("div",It," \u0644\u0627 \u062A\u0648\u062C\u062F \u062F\u0641\u0639\u0627\u062A \u0628\u0639\u062F ")),t("div",Nt,[t("div",null,[e[19]||(e[19]=t("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"\u0627\u0644\u0645\u062C\u0645\u0648\u0639 \u0627\u0644\u0643\u0644\u064A",-1)),t("div",Ot,r(c(s.internal_transport_total))+" $ ",1)]),t("div",null,[e[20]||(e[20]=t("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"\u0644\u0643\u0644 \u0633\u064A\u0627\u0631\u0629",-1)),t("div",Bt,r(c(s.internal_transport_per_car))+" $ ",1)]),t("div",null,[e[21]||(e[21]=t("div",{class:"text-xs text-gray-600 dark:text-gray-400"},"\u0639\u062F\u062F \u0627\u0644\u062F\u0641\u0639\u0627\u062A",-1)),t("div",Ht,r(s.transport_payments?s.transport_payments.length:0),1)])])]),t("div",Rt,[t("div",zt,[e[22]||(e[22]=t("span",{class:"font-bold"},"\u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A (\u0627\u0644\u062A\u062E\u0644\u064A\u0635 + \u0627\u0644\u0646\u0642\u0644):",-1)),t("span",At,r(c(s.total_amount))+" $",1)])]),t("details",Gt,[t("summary",Jt," \u0639\u0631\u0636 \u0627\u0644\u0633\u064A\u0627\u0631\u0627\u062A ("+r(s.cars_count)+") ",1),t("div",Kt,[(i(!0),d(y,null,$(s.cars,a=>(i(),d("div",{key:a.id,class:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded p-3 text-sm"},[t("div",Qt,[t("div",null,[e[23]||(e[23]=t("span",{class:"text-gray-600 dark:text-gray-400"},"\u0627\u0644\u0645\u0631\u0633\u0644 \u0625\u0644\u064A\u0647:",-1)),t("span",Wt,r(a.consignee_name),1)]),t("div",null,[e[24]||(e[24]=t("span",{class:"text-gray-600 dark:text-gray-400"},"\u0627\u0644\u0634\u0627\u0635\u064A:",-1)),t("span",Xt,r(a.chassis_no||"-"),1)]),t("div",null,[e[25]||(e[25]=t("span",{class:"text-gray-600 dark:text-gray-400"},"\u0627\u0644\u0648\u0635\u0641:",-1)),t("span",null,r(a.description||"-"),1)])])]))),128))])])]))),128))])])])])]),k.value?(i(),d("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:O(w,["self"])},[t("div",Yt,[t("h3",Zt,r(g.value?"\u062A\u0639\u062F\u064A\u0644 \u062F\u0641\u0639\u0629 \u0627\u0644\u0646\u0642\u0644":"\u0625\u0636\u0627\u0641\u0629 \u062F\u0641\u0639\u0629 \u0646\u0642\u0644 \u062C\u062F\u064A\u062F\u0629"),1),t("div",te,[t("div",null,[n(v,{for:"amount",value:"\u0627\u0644\u0645\u0628\u0644\u063A (\u062F\u0648\u0644\u0627\u0631) *"}),n(_,{id:"amount",modelValue:l.value.amount,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.amount=s),modelModifiers:{number:!0},type:"number",step:"0.01",class:"mt-1 block w-full",required:""},null,8,["modelValue"])]),t("div",null,[n(v,{for:"driver_name",value:"\u0627\u0633\u0645 \u0627\u0644\u0633\u0627\u0626\u0642 *"}),n(_,{id:"driver_name",modelValue:l.value.driver_name,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.driver_name=s),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"])]),t("div",null,[n(v,{for:"cmr_number",value:"\u0631\u0642\u0645 CMR"}),n(_,{id:"cmr_number",modelValue:l.value.cmr_number,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.cmr_number=s),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"])]),t("div",null,[n(v,{for:"payment_date",value:"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062F\u0641\u0639\u0629 *"}),n(_,{id:"payment_date",modelValue:l.value.payment_date,"onUpdate:modelValue":e[4]||(e[4]=s=>l.value.payment_date=s),type:"date",class:"mt-1 block w-full",required:""},null,8,["modelValue"])]),t("div",null,[n(v,{for:"notes",value:"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"}),B(t("textarea",{id:"notes","onUpdate:modelValue":e[5]||(e[5]=s=>l.value.notes=s),class:"mt-1 block w-full border-gray-300 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",rows:"2"},null,512),[[H,l.value.notes]])]),t("div",ee,[t("button",{onClick:F,class:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"},r(g.value?"\u062A\u062D\u062F\u064A\u062B":"\u0625\u0636\u0627\u0641\u0629"),1),t("button",{onClick:w,class:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600"}," \u0625\u0644\u063A\u0627\u0621 ")])])])])):V("",!0)]),_:1})],64))}};export{ne as default};
