import{x as G,z as O,r as d,a as c,g as n,j as l,w as v,k,F as M,o as p,H as W,b as e,e as B,v as J,y as K,t as o,h as S,n as Q,i as F,L as V}from"./app.d24a9b80.js";import{_ as X}from"./AuthenticatedLayout.b2e6ea44.js";import{s as Y}from"./show.97659b2f.js";import{p as Z}from"./pay.8e9ce5de.js";import{t as ee}from"./trash.7ddc9f34.js";import{e as te}from"./edit.be120a7d.js";import{_ as se}from"./ModalAddCarPayment.9532c353.js";import{M as oe}from"./ModalDelCar.280eb0e8.js";import{_ as ae}from"./ModalEditCar_S.db8d2b5c.js";import{W as re}from"./v3-infinite-loading.es.9913a41c.js";import{d as le}from"./debounce.16c0a89d.js";import{a as w}from"./index.77964a30.js";/* empty css                                                    */import"./Uploader.b6f22a53.js";/* empty css                                                                 */const de=e("h2",{class:"mb-5 dark:text-white text-center"}," \u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 \u061F ",-1),ne={key:0,class:"py-2"},ie={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},ce={class:"bg-white overflow-hidden shadow-sm"},pe={class:"p-6 dark:bg-gray-900"},ue={class:"flex flex-col"},he={class:"grid grid-cols-2 md:grid-cols-5 lg:grid-cols-5 gap-2 lg:gap-1"},_e={class:"flex items-center max-w-5xl"},ge=e("label",{class:"dark:text-gray-200",for:"simple-search"},null,-1),xe={class:"relative w-full"},me=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-200 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),be={value:"0",disabled:""},ye={value:""},fe=["value"],ve=e("div",null,null,-1),ke={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},we={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},Ce={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},$e={scope:"col",class:"px-1 py-3 text-base"},Ne={scope:"col",class:"px-1 py-3 text-base"},De={scope:"col",class:"px-1 py-3 text-base"},Me={scope:"col",class:"px-1 py-3 text-base"},Ae={scope:"col",class:"px-1 py-3 text-base"},Ie={scope:"col",class:"px-1 py-3 text-base"},Pe={scope:"col",class:"px-1 py-3 text-base"},ze={scope:"col",class:"px-1 py-3 text-base"},je={scope:"col",class:"px-1 py-3 text-base"},Be={scope:"col",class:"px-1 py-3 text-base"},Se={scope:"col",class:"px-1 py-3 text-base"},Fe={scope:"col",class:"px-1 py-3 text-base"},qe={scope:"col",class:"px-1 py-3 text-base"},Ee={scope:"col",class:"px-1 py-3 text-base"},Le={scope:"col",class:"px-1 py-3 text-base"},Re={scope:"col",class:"px-1 py-3 text-base"},Te={scope:"col",class:"px-1 py-3 text-base"},Ue={scope:"col",class:"px-1 py-3 text-base"},He={scope:"col",class:"px-1 py-3 text-base",style:{width:"180px"}},Ge={className:"border dark:border-gray-800 text-center  dark:text-gray-200 text-black px-1 py-2 ",style:{"font-weight":"bold","font-size":"16px"}},Oe={className:"border dark:border-gray-800 text-center px-1 py-2 "},We={className:"border dark:border-gray-800 text-center px-1 py-2 "},Je={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ke={className:"border dark:border-gray-800 text-center px-1 py-2 "},Qe={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ve={className:"border dark:border-gray-800 text-center px-1 py-2 "},Xe={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ye={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ze={className:"border dark:border-gray-800 text-center px-1 py-2 "},et={className:"border dark:border-gray-800 text-center px-1 py-2 "},tt={className:"border dark:border-gray-800 text-center px-1 py-2 "},st={className:"border dark:border-gray-800 text-center px-1 py-2 "},ot={className:"border dark:border-gray-800 text-center px-1 py-2 "},at={className:"border dark:border-gray-800 text-center px-1 py-2 "},rt={className:"border dark:border-gray-800 text-center px-1 py-2 "},lt={className:"border dark:border-gray-800 text-center px-1 py-2 "},dt={className:"border dark:border-gray-800 text-center px-1 py-2 "},nt={className:"border dark:border-gray-800 text-start px-1 py-2"},it=["onClick"],ct=["onClick"],pt=["onClick"],ut={class:"spaner"},ht={class:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-7"},_t={class:"flex items-start rounded-xl dark:bg-gray-600 dark:text-gray-300 bg-white p-4 shadow-lg"},gt=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full border border-orange-100 bg-orange-50"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-orange-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1),xt={class:"mr-4"},mt={class:"font-semibold"},bt={class:"mt-2 text-sm text-gray-500 dark:text-gray-200"},yt={class:"flex items-start rounded-xl dark:bg-gray-600 dark:text-gray-300 bg-white p-4 shadow-lg"},ft=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full border border-red-100 bg-red-50"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1),vt={class:"mr-4"},kt={class:"font-semibold"},wt={class:"mt-2 text-sm text-gray-500 dark:text-gray-200"},Ct=e("div",null,null,-1),Rt={__name:"Sales",props:{client:Array},setup(A){G();const g=O();let $=d(!1);d(!1),d(!1);let u=d(!1),h=d(!1),_=d(!1),I=d(0),P=d(0);function q(s={}){r.value=s,r.value.dinar_s==0&&(r.value.dinar_s=r.value.dinar),r.value.expenses_s==0&&(r.value.expenses_s=r.value.expenses),h.value=!0}function E(s={}){r.value=s,_.value=!0}function L(s={}){r.value=s,r.value.notePayment="\u062D\u0633\u0627\u0628 "+s.car_type+" "+s.year+" "+s.car_color+" \u0631\u0642\u0645 \u0634\u0627\u0635\u0649 "+s.vin+" \u0628\u064A\u062F ",u.value=!0}const r=d({}),x=d([]);let N=d(!1),m=0,D=1,b="";const y=()=>{D=0,x.value.length=0,N.value=!N.value},R=async s=>{console.log(s);try{const t=(await w.get("/getIndexCar",{params:{limit:100,page:D,q:b,user_id:m}})).data;t.data.length<100?(x.value.push(...t.data),s.complete()):(x.value.push(...t.data),s.loaded()),D++}catch(a){console.log(a)}},z=async()=>{w.get("/api/totalInfo").then(s=>{I.value=s.data.data.mainAccount,P.value=s.data.data.allCars}).catch(s=>{console.error(s)})};z();function T(s){h.value=!1,w.post("/api/updateCarsS",s).then(a=>{$.value=!1,g.success("\u062A\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}),z(),y()}).catch(a=>{$.value=!1,g.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}function U(s){w.post("/api/DelCar",s).then(a=>{_.value=!1,g.success("\u062A\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D \u0648\u062E\u0635\u0645 \u0627\u0644\u0645\u0628\u0644\u063A \u0645\u0646 \u062F\u064A\u0646 \u0627\u0644\u0632\u0628\u0648\u0646",{timeout:3e3,position:"bottom-right",rtl:!0}),y()}).catch(a=>{console.error(a)})}function H(s){var a,t,i;w.get(`/api/addPaymentCar?car_id=${s.id}&discount=${(a=s.discountPayment)!=null?a:0}&amount=${(t=s.amountPayment)!=null?t:0}&note=${(i=s.notePayment)!=null?i:""}`).then(f=>{y(),u.value=!1,g.success(" \u062A\u0645 \u062F\u0641\u0639 \u0645\u0628\u0644\u063A \u062F\u0648\u0644\u0627\u0631 "+s.amountPayment+" \u0628\u0646\u062C\u0627\u062D ",{timeout:3e3,position:"bottom-right",rtl:!0});let C=f.data;window.open(`/api/getIndexAccountsSelas?user_id=${s.client.id}&print=2&transactions_id=${C.id}`,"_blank")}).catch(f=>{$.value=!1,g.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}const j=le(y,500);return(s,a)=>(p(),c(M,null,[n(l(W),{title:"Dashboard"}),n(ae,{formData:r.value,show:!!l(h),client:A.client,onA:a[0]||(a[0]=t=>T(t)),onClose:a[1]||(a[1]=t=>k(h)?h.value=!1:h=!1)},{header:v(()=>[]),_:1},8,["formData","show","client"]),n(se,{formData:r.value,show:!!l(u),onA:a[2]||(a[2]=t=>H(t)),onClose:a[3]||(a[3]=t=>k(u)?u.value=!1:u=!1)},{header:v(()=>[]),_:1},8,["formData","show"]),n(oe,{show:!!l(_),formData:r.value,onA:a[4]||(a[4]=t=>U(t)),onClose:a[5]||(a[5]=t=>k(_)?_.value=!1:_=!1)},{header:v(()=>[de]),_:1},8,["show","formData"]),n(X,null,{default:v(()=>[s.$page.props.auth.user.type_id==1||s.$page.props.auth.user.type_id==6?(p(),c("div",ne,[e("div",ie,[e("div",ce,[e("div",pe,[e("div",ue,[e("div",he,[e("div",null,[e("form",_e,[ge,e("div",xe,[me,B(e("input",{"onUpdate:modelValue":a[6]||(a[6]=t=>k(b)?b.value=t:b=t),onInput:a[7]||(a[7]=(...t)=>l(j)&&l(j)(...t)),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"\u0628\u062D\u062B",required:""},null,544),[[J,l(b)]])])])]),e("div",null,[B(e("select",{onChange:a[8]||(a[8]=t=>y()),"onUpdate:modelValue":a[9]||(a[9]=t=>k(m)?m.value=t:m=t),id:"default",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 mb-6 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500"},[e("option",be,o(s.$t("selectCustomer")),1),e("option",ye,o(s.$t("allOwners")),1),(p(!0),c(M,null,S(A.client,(t,i)=>(p(),c("option",{key:i,value:t.id},o(t.name),9,fe))),128))],544),[[K,l(m)]])])]),e("div",null,[ve,e("div",ke,[e("table",we,[e("thead",Ce,[e("tr",null,[e("th",$e,o(s.$t("car_owner")),1),e("th",Ne,o(s.$t("car_type")),1),e("th",De,o(s.$t("year")),1),e("th",Me,o(s.$t("color")),1),e("th",Ae,o(s.$t("vin")),1),e("th",Ie,o(s.$t("car_number")),1),e("th",Pe,o(s.$t("dinar")),1),e("th",ze,o(s.$t("dolar_price")),1),e("th",je,o(s.$t("dolar_custom")),1),e("th",Be,o(s.$t("note")),1),e("th",Se,o(s.$t("shipping_dolar")),1),e("th",Fe,o(s.$t("coc_dolar")),1),e("th",qe,o(s.$t("checkout")),1),e("th",Ee,o(s.$t("expenses")),1),e("th",Le,o(s.$t("total")),1),e("th",Re,o(s.$t("paid")),1),e("th",Te,o(s.$t("discount")),1),e("th",Ue,o(s.$t("date")),1),e("th",He,o(s.$t("execute")),1)])]),e("tbody",null,[(p(!0),c(M,null,S(x.value,t=>{var i,f;return p(),c("tr",{key:t.id,class:Q([t.results==0?"":t.results==1?"bg-red-100 dark:bg-red-900":"bg-green-100 dark:bg-green-900","bg-white border-b dark:bg-gray-900 dark:border-gray-900 hover:bg-gray-50 dark:hover:bg-gray-600"])},[e("td",Ge,o((i=t.client)==null?void 0:i.name),1),e("td",Oe,o(t.car_type),1),e("td",We,o(t.year),1),e("td",Je,o(t.car_color),1),e("td",Ke,o(t.vin),1),e("td",Qe,o(t.car_number),1),e("td",Ve,o(t.dinar_s),1),e("td",Xe,o(t.dolar_price_s),1),e("td",Ye,o((t.dinar_s/t.dolar_price_s*100).toFixed(0)||0),1),e("td",Ze,o(t.note),1),e("td",et,o(t.shipping_dolar_s),1),e("td",tt,o(t.coc_dolar_s),1),e("td",st,o(t.checkout_s),1),e("td",ot,o(t.expenses_s),1),e("td",at,o(t.total_s.toFixed(0)),1),e("td",rt,o(t.paid),1),e("td",lt,o(t.discount),1),e("td",dt,o(t.date),1),e("td",nt,[e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-slate-500 rounded",onClick:C=>q(t)},[n(te)],8,it),e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-orange-500 rounded",onClick:C=>E(t)},[n(ee)],8,ct),t.total_s!=t.paid+t.discount?(p(),c("button",{key:0,tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-green-500 rounded",onClick:C=>L(t)},[n(Z)],8,pt)):F("",!0),n(l(V),{style:{display:"inline-flex"},className:"px-1 py-1  text-white mx-1 bg-blue-500 rounded d-inline-block",href:s.route("showClients",(f=t.client)==null?void 0:f.id)},{default:v(()=>[n(Y)]),_:2},1032,["href"])])],2)}),128))])])])]),e("div",ut,[n(l(re),{car:x.value,onInfinite:R,identifier:l(N)},null,8,["car","identifier"])]),e("div",null,[e("div",ht,[e("div",_t,[gt,e("div",xt,[e("h2",mt,o(s.$t("capital")),1),e("p",bt,o(l(I)),1)])]),e("div",yt,[ft,e("div",vt,[e("h2",kt,o(s.$t("all_cars")),1),e("p",wt,o(l(P)),1)])])])])])])])])])):F("",!0),Ct]),_:1})],64))}};export{Rt as default};
