import{_ as g}from"./AuthenticatedLayout.405e4a28.js";import{x as v,r as u,m as h,a as x,g as n,j as d,w as c,F as w,o as b,H as y,b as r,L as D,f as k,k as S}from"./app.28a0c38b.js";import{_ as $}from"./ModalShowDamageReport.6678c847.js";import{a as N}from"./index.d1918fd3.js";import"./_plugin-vue_export-helper.cdc0426e.js";const R={class:"py-2"},T={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},j={class:"bg-white overflow-hidden shadow-sm"},B={class:"p-6 dark:bg-gray-900"},F={class:"flex justify-between items-center"},E={__name:"edit",props:{data:Object,owner_id:Number},setup(f){const a=f,i=v();let e=u(!1),m=u({driver_name:"",cmr_number:"",cars_count:0,total_damage:0,cars_info:[],created:l()});function l(){const o=new Date,t=o.getFullYear(),s=String(o.getMonth()+1).padStart(2,"0"),p=String(o.getDate()).padStart(2,"0");return`${t}-${s}-${p}`}h(()=>{a.data&&(m.value={id:a.data.id,driver_name:a.data.driver_name||"",cmr_number:a.data.cmr_number||"",cars_count:a.data.cars_count||0,total_damage:a.data.total_damage||0,cars_info:a.data.cars_info||[],created:a.data.created||l()},e.value=!0)});function _(o){N.post("/api/updateDamageReport",o).then(t=>{e.value=!1,i.success("\u062A\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}),setTimeout(()=>{window.location="/damage_report"},1e3)}).catch(t=>{e.value=!1,i.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062A\u0639\u062F\u064A\u0644",{timeout:2e3,position:"bottom-right",rtl:!0})})}return(o,t)=>(b(),x(w,null,[n(d(y),{title:"\u062A\u0639\u062F\u064A\u0644 \u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0636\u0631\u0631"}),n(g,null,{default:c(()=>[r("div",R,[r("div",T,[r("div",j,[r("div",B,[r("div",F,[t[3]||(t[3]=r("h2",{class:"text-xl font-bold dark:text-white"},"\u062A\u0639\u062F\u064A\u0644 \u062A\u0642\u0631\u064A\u0631 \u0627\u0644\u0636\u0631\u0631",-1)),n(d(D),{href:o.route("damage_report.index"),class:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600"},{default:c(()=>[...t[2]||(t[2]=[k(" \u0627\u0644\u0639\u0648\u062F\u0629 ",-1)])]),_:1},8,["href"])])])])])]),n($,{show:d(e),formDamage:d(m),onSave:t[0]||(t[0]=s=>_(s)),onClose:t[1]||(t[1]=s=>S(e)?e.value=!1:e=!1)},null,8,["show","formDamage"])]),_:1})],64))}};export{E as default};
