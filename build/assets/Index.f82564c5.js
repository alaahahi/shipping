import{o as i,a as c,b as e,c as V,w as C,e as y,n as R,K as q,d as j,M as te,t as u,f as b,y as ae,T as X,N as oe,j as x,F as k,g as $,G as se,I as re,r as _,k as h,h as H,m as w,v as p,u as E,z as de,H as le}from"./app.ac0b1eaa.js";import{a as O,_ as ie}from"./AuthenticatedLayout.94ca367f.js";import{t as ne}from"./trash.f25d87e2.js";import{e as ce}from"./edit.df9dcfc7.js";import{a as M}from"./index.0c393447.js";import{M as ue}from"./ModalDelCar.d3f58ed9.js";import{d as me,W as ge}from"./debounce.4dbfa34f.js";const he={name:"line-scale",props:{color:{type:String,default:"#CCC"},size:{type:String,default:"40px"},duration:{type:String,default:"0.6s"}}},fe=["width","height"],ye=["fill"],be=["dur"],ve=["dur"],pe=["fill"],_e=["dur"],xe=["dur"],ke=["fill"],$e=["dur"],we=["dur"];function Ce(t,d,r,o,a,g){return i(),c("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:r.size,height:r.size,viewBox:"0 0 24 30",style:{"enable-background":"new 0 0 50 50"},"xml:space":"preserve"},[e("rect",{x:"0",y:"13",width:"4",height:"5",fill:r.color},[e("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0s",dur:r.duration,repeatCount:"indefinite"},null,8,be),e("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0s",dur:r.duration,repeatCount:"indefinite"},null,8,ve)],8,ye),e("rect",{x:"10",y:"13",width:"4",height:"5",fill:r.color},[e("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.15s",dur:r.duration,repeatCount:"indefinite"},null,8,_e),e("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.15s",dur:r.duration,repeatCount:"indefinite"},null,8,xe)],8,pe),e("rect",{x:"20",y:"13",width:"4",height:"5",fill:r.color},[e("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.3s",dur:r.duration,repeatCount:"indefinite"},null,8,$e),e("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.3s",dur:r.duration,repeatCount:"indefinite"},null,8,we)],8,ke)],8,fe)}const Me=O(he,[["render",Ce]]),De={LineScale:Me};const Ae={name:"vue-element-loading",props:{active:Boolean,spinner:{type:String,default:"spinner"},text:{type:String,default:""},textStyle:{type:Object,default:function(){return{}}},color:{type:String,default:"#000"},isFullScreen:{type:Boolean,default:!1},backgroundColor:{type:String,default:"rgba(255, 255, 255, .9)"},size:{type:String,default:"40"},duration:{type:String,default:"0.6"},delay:{type:[String,Number],default:0}},data(){return{isActive:this.active||!1,isActiveDelay:!1}},mounted(){if(this.$refs.velmld.parentNode.classList.add("velmld-parent"),this.delay){const t=+this.delay*1e3;this.delayActive(t)}},methods:{delayActive(t){this.isActiveDelay=!0,setTimeout(()=>{this.isActiveDelay=!1},t)}},watch:{active(t){this.isActive=t,t&&this.$refs.velmld.parentNode.classList.add("velmld-parent")}},components:De},Ne={class:"velmld-spinner"};function Le(t,d,r,o,a,g){return i(),V(X,{name:"fade"},{default:C(()=>[y(e("div",{class:R([{"velmld-full-screen":r.isFullScreen},"velmld-overlay"]),style:q({backgroundColor:r.backgroundColor}),ref:"velmld"},[e("div",Ne,[j(t.$slots,"default",{},()=>[(i(),V(te(r.spinner),{color:r.color,size:`${r.size}px`,duration:`${r.duration}s`},null,8,["color","size","duration"]))],!0),r.text.length?(i(),c("div",{key:0,style:q({color:r.color,...r.textStyle})},u(r.text),5)):b("",!0)])],6),[[ae,a.isActive||a.isActiveDelay]])]),_:3})}const ze=O(Ae,[["render",Le],["__scopeId","data-v-82159762"]]);const Se={props:{server:{type:String,default:"/api/upload"},isInvalid:{type:Boolean,default:!1},media:{type:Array,default:[]},location:{type:String,default:""},max:{type:Number,default:null},maxFilesize:{type:Number,default:4},warnings:{type:Boolean,default:!0}},mounted(){this.init()},data(){return{addedMedia:[],savedMedia:[],removedMedia:[],isLoading:!0}},methods:{init(){this.savedMedia=this.media,this.savedMedia.forEach((t,d)=>{this.savedMedia[d].url||(this.savedMedia[d].url=this.location+"/"+t.name)}),setTimeout(()=>this.isLoading=!1,1e3),this.$emit("init",this.allMedia)},async fileChange(t){this.isLoading=!0;let d=t.target.files;for(var r=0;r<d.length;r++)if(!this.max||this.allMedia.length<this.max)if(d[r].size<=this.maxFilesize*1e6){let o=new FormData,a=URL.createObjectURL(d[r]);o.set("image",d[r]);const{data:g}=await M.post(this.server,o);let v={url:a,name:g.name,size:d[r].size,type:d[r].type};this.addedMedia.push(v),this.$emit("change",this.allMedia),this.$emit("add",v,this.addedMedia)}else{this.$emit("maxFilesize",d[r].size),this.warnings&&alert(`The file you are trying to upload is too big. 
Maximum Filesize: `+this.maxFilesize+"MB");break}else{this.$emit("max"),this.warnings&&alert(`You have reached the maximum number of files that you can upload. 
Maximum Files: `+this.max);break}t.target.value=null,this.isLoading=!1},removeAddedMedia(t){let d=this.addedMedia[t];this.addedMedia.splice(t,1),this.$emit("change",this.allMedia),this.$emit("remove",d,this.removedMedia)},removeSavedMedia(t){let d=this.savedMedia[t];this.removedMedia.push(d),this.savedMedia.splice(t,1),this.$emit("change",this.allMedia),this.$emit("remove",d,this.removedMedia)}},computed:{allMedia(){return[...this.savedMedia,...this.addedMedia]}},emits:["init","change","add","remove","max","maxFilesize"],components:{Loader:ze}},B=t=>(se("data-v-1238f422"),t=t(),re(),t),Ue={class:"mu-elements-wraper"},Ie={class:"mu-plusbox-container"},Ve=B(()=>e("label",{for:"mu-file-input",class:"mu-plusbox"},[e("svg",{class:"mu-plus-icon",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[e("g",{fill:"none"},[e("path",{d:"M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11s11-4.925 11-11S18.075 1 12 1zm1 15a1 1 0 1 1-2 0v-3H8a1 1 0 1 1 0-2h3V8a1 1 0 1 1 2 0v3h3a1 1 0 1 1 0 2h-3v3z",fill:"currentColor"})])])],-1)),Be=["src"],Te=["onClick"],Fe=B(()=>e("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[e("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)),Re=[Fe],je=["src"],Xe=["onClick"],Oe=B(()=>e("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[e("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)),Ye=[Oe],qe=["value"],He=["value"],Ee={key:0,class:"mu-mt-1"},Ge=B(()=>e("input",{type:"text",name:"media",value:"1",hidden:""},null,-1)),Ke=[Ge];function We(t,d,r,o,a,g){const v=oe("Loader");return i(),c("div",null,[e("div",{class:R(["mu-container",r.isInvalid?"mu-red-border":""])},[x(v,{color:"#0275d8",active:a.isLoading,spinner:"line-scale","background-color":"rgba(255, 255, 255, .4)"},null,8,["active"]),e("div",Ue,[e("div",Ie,[Ve,e("input",{onChange:d[0]||(d[0]=(...f)=>g.fileChange&&g.fileChange(...f)),id:"mu-file-input",type:"file",accept:"image/*",multiple:"",hidden:""},null,32)]),(i(!0),c(k,null,$(a.savedMedia,(f,s)=>(i(),c("div",{key:s,class:"mu-image-container"},[e("img",{src:r.location+"/"+f.name,alt:"",class:"mu-images-preview"},null,8,Be),e("button",{onClick:A=>g.removeSavedMedia(s),class:"mu-close-btn",type:"button"},Re,8,Te)]))),128)),(i(!0),c(k,null,$(a.addedMedia,(f,s)=>(i(),c("div",{key:s,class:"mu-image-container"},[e("img",{src:f.url,alt:"",class:"mu-images-preview"},null,8,je),e("button",{onClick:A=>g.removeAddedMedia(s),class:"mu-close-btn",type:"button"},Ye,8,Xe)]))),128))])],2),e("div",null,[(i(!0),c(k,null,$(a.addedMedia,(f,s)=>(i(),c("div",{key:s,class:"mu-mt-1"},[e("input",{type:"text",name:"added_media[]",value:f.name,hidden:""},null,8,qe)]))),128)),(i(!0),c(k,null,$(a.removedMedia,(f,s)=>(i(),c("div",{key:s,class:"mu-mt-1"},[e("input",{type:"text",name:"removed_media[]",value:f.name,hidden:""},null,8,He)]))),128)),g.allMedia.length?(i(),c("div",Ee,Ke)):b("",!0)])])}const G=O(Se,[["render",We],["__scopeId","data-v-1238f422"]]);const Je={key:0,class:"modal-mask"},Pe={class:"modal-wrapper max-h-[80vh]"},Qe={class:"modal-container dark:bg-gray-900 overflow-auto max-h-[80vh]"},Ze={class:"modal-header"},et={class:"text-center dark:text-gray-200"},tt={class:"modal-body"},at={key:0,class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},ot={class:"mb-4 mx-1"},st=e("label",{class:"dark:text-gray-200",for:"color_id"}," \u0635\u0627\u062D\u0628 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 ",-1),rt={class:"relative"},dt=e("option",{selected:"",disabled:""}," \u062A\u062D\u062F\u064A\u062F \u0635\u0627\u062D\u0628 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 ",-1),lt=["value"],it={class:"relative"},nt={key:0,className:"mb-4 mx-1"},ct={class:"dark:text-gray-200",for:"number"},ut={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-1 lg:gap-2"},mt={className:"mb-4 mx-1"},gt={class:"dark:text-gray-200",for:"car_number"},ht={className:"mb-4 mx-1"},ft={class:"dark:text-gray-200",for:"pin"},yt={className:"mb-4 mx-1"},bt={class:"dark:text-gray-200",for:"pin"},vt={className:"mb-4 mx-1"},pt={class:"dark:text-gray-200",for:"pin"},_t={class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},xt={className:"mb-4 mx-1"},kt={class:"dark:text-gray-200",for:"note"},$t={key:1,class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},wt=["disabled"],Ct={key:2,class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},Mt={class:"mb-4"},Dt=e("label",{class:"form-label"},"\u0627\u0644\u0635\u0648\u0631",-1),At={class:"mt-3"},Nt={key:0,class:"text-danger"},Lt={class:"modal-footer my-2"},zt={class:"flex flex-row m-auto"},St={__name:"ModalAddCarsAnnual",props:{show:Boolean,formData:Object,client:Array,saveCar:Boolean},setup(t){let d=_(!0);function r(o){M.get("/api/carsAnnualImageDel?name="+o.name).then(a=>{toast.success("\u062A\u0645  \u062D\u0630\u0641 \u0627\u0644\u0635\u0648\u0631\u0629 \u0628\u0646\u062C\u0627\u062D",{timeout:5e3,position:"bottom-right",rtl:!0})}).catch(a=>{console.error(a)})}return(o,a)=>(i(),V(X,{name:"modal"},{default:C(()=>{var g,v,f;return[t.show?(i(),c("div",Je,[e("div",Pe,[e("div",Qe,[e("div",Ze,[j(o.$slots,"header",{},()=>[e("h2",et,u(o.$t("add_car")),1)])]),e("div",tt,[t.formData.id?b("",!0):(i(),c("div",at,[e("div",ot,[st,e("div",rt,[h(d)?b("",!0):y((i(),c("select",{key:0,"onUpdate:modelValue":a[0]||(a[0]=s=>t.formData.client_id=s),id:"color_id",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[dt,(i(!0),c(k,null,$(t.client,(s,A)=>(i(),c("option",{key:A,value:s.id},u(s.name),9,lt))),128))],512)),[[H,t.formData.client_id]]),h(d)?b("",!0):(i(),c("button",{key:1,type:"button",onClick:a[1]||(a[1]=s=>{w(d)?d.value=!0:d=!0,t.formData.client_name="",t.formData.client_id=""}),class:"absolute left-0 top-0 h-full px-3 py-2 font-bold text-white bg-green-500 rounded-tl-lg rounded-bl-lg"}," \u0625\u0636\u0627\u0641\u0629 \u0635\u0627\u062D\u0628 \u0633\u064A\u0627\u0631\u0629 "))]),e("div",it,[h(d)?y((i(),c("input",{key:0,id:"note",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[2]||(a[2]=s=>t.formData.client_name=s)},null,512)),[[p,t.formData.client_name]]):b("",!0),h(d)?(i(),c("button",{key:1,type:"button",onClick:a[3]||(a[3]=s=>{w(d)?d.value=!1:d=!1,t.formData.client=""}),class:"absolute left-0 top-0 h-full px-3 py-2 font-bold text-white bg-pink-500 rounded-tl-lg rounded-bl-lg"}," \u062A\u062D\u062F\u064A\u062F \u0635\u0627\u062D\u0628 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 ")):b("",!0)])]),h(d)?(i(),c("div",nt,[e("label",ct,u(o.$t("phoneNumber")),1),y(e("input",{id:"number",type:"number",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[4]||(a[4]=s=>t.formData.client_phone=s)},null,512),[[p,t.formData.client_phone]])])):b("",!0)])),e("div",ut,[e("div",mt,[e("label",gt,u(o.$t("car_number")),1),y(e("input",{id:"car_number",type:"number",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[5]||(a[5]=s=>t.formData.car_number=s)},null,512),[[p,t.formData.car_number]])]),e("div",ht,[e("label",ft,u(o.$t("car_type")),1),y(e("input",{id:"car_type",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[6]||(a[6]=s=>t.formData.car_type=s)},null,512),[[p,t.formData.car_type]])]),e("div",yt,[e("label",bt,u(o.$t("year")),1),y(e("input",{id:"year",type:"number",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[7]||(a[7]=s=>t.formData.year=s)},null,512),[[p,t.formData.year]])]),e("div",vt,[e("label",pt,u(o.$t("color")),1),y(e("input",{id:"car_color",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[8]||(a[8]=s=>t.formData.car_color=s)},null,512),[[p,t.formData.car_color]])])]),e("div",_t,[e("div",xt,[e("label",kt,u(o.$t("note")),1),y(e("input",{id:"note",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[9]||(a[9]=s=>t.formData.note=s)},null,512),[[p,t.formData.note]])])]),t.saveCar?b("",!0):(i(),c("div",$t,[e("button",{class:"modal-default-button py-3 bg-blue-500 rounded col-6",onClick:a[10]||(a[10]=s=>{o.$emit("a",t.formData)}),disabled:!t.formData.client_id&&!t.formData.client_name}," \u062D\u0641\u0638 \u0648\u0645\u062A\u0627\u0628\u0639\u0629 ",8,wt)])),t.saveCar?(i(),c("div",Ct,[e("div",Mt,[Dt,e("div",At,[x(h(G),{server:"/api/carsAnnualUpload?carId="+t.saveCar,"is-invalid":!!((g=o.errors)!=null&&g.media),onChange:o.changeMedia,location:"/storage/posts/media",onInit:o.initMedia,onAdd:o.addMedia,onRemove:r},null,8,["server","is-invalid","onChange","onInit","onAdd"])]),(v=o.errors)!=null&&v.media?(i(),c("p",Nt,u((f=o.errors)==null?void 0:f.media[0]),1)):b("",!0)])])):b("",!0)]),e("div",Lt,[e("div",zt,[e("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6",onClick:a[11]||(a[11]=s=>{o.$emit("close"),t.formData=""})}," \u0625\u063A\u0644\u0627\u0642 ")])])])])])):b("",!0)]}),_:3}))}};const Ut={key:0,class:"modal-mask"},It={class:"modal-wrapper max-h-[80vh]"},Vt={class:"modal-container dark:bg-gray-900 overflow-auto max-h-[80vh]"},Bt={class:"modal-header"},Tt=e("h2",{class:"text-center dark:text-gray-200"}," \u062A\u0639\u062F\u064A\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062A ",-1),Ft={class:"modal-body"},Rt={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-1 lg:gap-2"},jt={className:"mb-4 mx-1"},Xt={class:"dark:text-gray-200",for:"car_number"},Ot={className:"mb-4 mx-1"},Yt={class:"dark:text-gray-200",for:"pin"},qt={className:"mb-4 mx-1"},Ht={class:"dark:text-gray-200",for:"pin"},Et={className:"mb-4 mx-1"},Gt={class:"dark:text-gray-200",for:"pin"},Kt={class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},Wt={className:"mb-4 mx-1"},Jt={class:"dark:text-gray-200",for:"note"},Pt={class:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-1 lg:gap-2"},Qt={class:"m-4"},Zt=e("label",{class:"form-label"},"\u0627\u0644\u0635\u0648\u0631",-1),ea={key:0,class:"text-danger"},ta={class:"modal-footer my-2"},aa={class:"flex flex-row"},oa={class:"basis-1/2 px-4"},sa={class:"basis-1/2 px-4"},ra=["disabled"],da={__name:"ModalUpdateCarsAnnual",props:{show:Boolean,formData:Object,client:Array,saveCar:Boolean},setup(t){const d=E();function r(o){M.get("/api/carsAnnualImageDel?name="+o.name).then(a=>{d.success("\u062A\u0645  \u062D\u0630\u0641 \u0627\u0644\u0635\u0648\u0631\u0629 \u0628\u0646\u062C\u0627\u062D",{timeout:5e3,position:"bottom-right",rtl:!0})}).catch(a=>{console.error(a)})}return(o,a)=>(i(),V(X,{name:"modal"},{default:C(()=>{var g,v,f;return[t.show?(i(),c("div",Ut,[e("div",It,[e("div",Vt,[e("div",Bt,[j(o.$slots,"header",{},()=>[Tt])]),e("div",Ft,[e("div",Rt,[e("div",jt,[e("label",Xt,u(o.$t("car_number")),1),y(e("input",{id:"car_number",type:"number",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[0]||(a[0]=s=>t.formData.car_number=s)},null,512),[[p,t.formData.car_number]])]),e("div",Ot,[e("label",Yt,u(o.$t("car_type")),1),y(e("input",{id:"car_type",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[1]||(a[1]=s=>t.formData.car_type=s)},null,512),[[p,t.formData.car_type]])]),e("div",qt,[e("label",Ht,u(o.$t("year")),1),y(e("input",{id:"year",type:"number",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[2]||(a[2]=s=>t.formData.year=s)},null,512),[[p,t.formData.year]])]),e("div",Et,[e("label",Gt,u(o.$t("color")),1),y(e("input",{id:"car_color",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[3]||(a[3]=s=>t.formData.car_color=s)},null,512),[[p,t.formData.car_color]])])]),e("div",Kt,[e("div",Wt,[e("label",Jt,u(o.$t("note")),1),y(e("input",{id:"note",type:"text",class:"mt-1 block w-full border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm dark:bg-gray-700 dark:text-gray-200 dark:border-gray-900","onUpdate:modelValue":a[4]||(a[4]=s=>t.formData.note=s)},null,512),[[p,t.formData.note]])])]),e("div",Pt,[e("div",Qt,[Zt,e("div",null,[x(h(G),{server:"/api/carsAnnualUpload?carId="+t.formData.id,"is-invalid":!!((g=o.errors)!=null&&g.media),onChange:o.changeMedia,onInitMedia:o.media,location:"/public/uploadsResized",media:t.formData.car_images,onAdd:o.addMedia,onRemove:r},null,8,["server","is-invalid","onChange","onInitMedia","media","onAdd"])]),(v=o.errors)!=null&&v.media?(i(),c("p",ea,u((f=o.errors)==null?void 0:f.media[0]),1)):b("",!0)])])]),e("div",ta,[e("div",aa,[e("div",oa,[e("button",{class:"modal-default-button py-3 bg-gray-500 rounded",onClick:a[5]||(a[5]=s=>o.$emit("close"))}," \u0627\u063A\u0644\u0627\u0642 ")]),e("div",sa,[e("button",{class:"modal-default-button py-3 bg-rose-500 rounded col-6",onClick:a[6]||(a[6]=s=>{t.formData.date=t.formData.date?t.formData.date:o.getTodayDate(),o.$emit("a",t.formData),t.formData=""}),disabled:!t.formData.client_id&&!t.formData.client_name}," \u062D\u0641\u0638 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A ",8,ra)])])])])])])):b("",!0)]}),_:3}))}},la=e("h2",{class:"mb-5 dark:text-white text-center"}," \u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 \u061F ",-1),ia={key:0,class:"py-2"},na={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},ca={class:"bg-white overflow-hidden shadow-sm"},ua={class:"p-6 dark:bg-gray-900"},ma={class:"flex flex-col"},ga={class:"grid grid-cols-2 md:grid-cols-5 lg:grid-cols-5 gap-2 lg:gap-1"},ha={class:"flex items-center max-w-5xl"},fa=e("label",{class:"dark:text-gray-200",for:"simple-search"},null,-1),ya={class:"relative w-full"},ba=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-200 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),va={value:"0",disabled:""},pa={value:""},_a=["value"],xa={class:"text-center"},ka=e("div",null,null,-1),$a={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},wa={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},Ca={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},Ma=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0627\u0633\u0645 \u0635\u0627\u062D\u0628 \u0627\u0644\u0633\u06CC\u0627\u0631\u06D5 ",-1),Da={scope:"col",class:"px-1 py-3 text-base"},Aa={scope:"col",class:"px-1 py-3 text-base"},Na={scope:"col",class:"px-1 py-3 text-base"},La={scope:"col",class:"px-1 py-3 text-base"},za={scope:"col",class:"px-1 py-3 text-base"},Sa={scope:"col",class:"px-1 py-3 text-base"},Ua=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0627\u0644\u0645\u0644\u0641\u0627\u062A \u0627\u0644\u0645\u062E\u0632\u0646\u0629 ",-1),Ia={scope:"col",class:"px-1 py-3 text-base",style:{width:"90px"}},Va={className:"border dark:border-gray-800 text-center  dark:text-gray-200 text-black px-1 py-2 ",style:{"font-weight":"bold","font-size":"16px"}},Ba={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ta={className:"border dark:border-gray-800 text-center px-1 py-2 "},Fa={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ra={className:"border dark:border-gray-800 text-center px-1 py-2 "},ja={className:"border dark:border-gray-800 text-center px-1 py-2 "},Xa={className:"border dark:border-gray-800 text-center px-1 py-2 "},Oa={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ya=["href"],qa=["src"],Ha={className:"border dark:border-gray-800 text-start px-1 py-2"},Ea=["onClick"],Ga=["onClick"],Ka={class:"spaner"},Wa=e("div",null,null,-1),oo={__name:"Index",props:{clientAnnual:Array},setup(t){de();const d=E();let r=_(!1),o=_(!1),a=_(!1),g=_(!1);_(0),_(0);let v=_(!1);function f(m={}){D.value=m,a.value=!0}function s(m={}){D.value=m,g.value=!0}function A(m={}){D.value={},o.value=!0}const D=_({}),N=_([]);let T=_(!1),L=0,F=1,z="";const S=()=>{F=0,N.value.length=0,T.value=!T.value},K=async m=>{console.log(m);try{const l=(await M.get("api/getIndexCarAnnual",{params:{limit:100,page:F,q:z,user_id:L}})).data;l.data.length<100?(N.value.push(...l.data),m.complete()):(N.value.push(...l.data),m.loaded()),F++}catch(n){console.log(n)}};function W(m){a.value=!1,M.post("/api/updateCarsAnnual",m).then(n=>{r.value=!1,d.success("\u062A\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}),S()}).catch(n=>{r.value=!1,d.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}function J(m){M.post("/api/delCarsAnnualr",m).then(n=>{g.value=!1,d.success("\u062D\u0630\u0641 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 \u0628\u0646\u062C\u0627\u062D",{timeout:3e3,position:"bottom-right",rtl:!0}),S()}).catch(n=>{console.error(n)})}const Y=me(S,500);function P(m){M.post("/api/addCarsAnnual",m).then(n=>{v.value=n.data.id,d.success("\u062A\u0645 \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0628\u0646\u062C\u0627\u062D",{timeout:5e3,position:"bottom-right",rtl:!0})}).catch(n=>{console.error(n)})}function Q(m){return`/public/uploadsResized/${m}`}function Z(m){return`/public/uploads/${m}`}return(m,n)=>(i(),c(k,null,[x(h(le),{title:"Dashboard"}),x(St,{formData:D.value,saveCar:h(v),show:!!h(o),client:t.clientAnnual,onA:n[0]||(n[0]=l=>P(l)),onClose:n[1]||(n[1]=l=>{w(o)?o.value=!1:o=!1,S()})},{header:C(()=>[]),_:1},8,["formData","saveCar","show","client"]),x(da,{formData:D.value,saveCar:h(v),show:!!h(a),client:t.clientAnnual,onA:n[2]||(n[2]=l=>W(l)),onClose:n[3]||(n[3]=l=>w(a)?a.value=!1:a=!1)},{header:C(()=>[]),_:1},8,["formData","saveCar","show","client"]),x(ue,{show:!!h(g),formData:D.value,onA:n[4]||(n[4]=l=>J(l)),onClose:n[5]||(n[5]=l=>w(g)?g.value=!1:g=!1)},{header:C(()=>[la]),_:1},8,["show","formData"]),x(ie,null,{default:C(()=>[m.$page.props.auth.user.type_id==1?(i(),c("div",ia,[e("div",na,[e("div",ca,[e("div",ua,[e("div",ma,[e("div",ga,[e("div",null,[e("form",ha,[fa,e("div",ya,[ba,y(e("input",{"onUpdate:modelValue":n[6]||(n[6]=l=>w(z)?z.value=l:z=l),onInput:n[7]||(n[7]=(...l)=>h(Y)&&h(Y)(...l)),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"\u0628\u062D\u062B",required:""},null,544),[[p,h(z)]])])])]),e("div",null,[y(e("select",{onChange:n[8]||(n[8]=l=>S()),"onUpdate:modelValue":n[9]||(n[9]=l=>w(L)?L.value=l:L=l),id:"default",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 mb-6 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500"},[e("option",va,u(m.$t("selectCustomer")),1),e("option",pa,u(m.$t("allOwners")),1),(i(!0),c(k,null,$(t.clientAnnual,(l,U)=>(i(),c("option",{key:U,value:l.id},u(l.name),9,_a))),128))],544),[[H,h(L)]])]),e("div",xa,[e("button",{type:"button",onClick:n[10]||(n[10]=l=>A()),style:{"min-width":"150px"},className:"px-6 mb-12 mx-2 py-2 font-bold text-white bg-purple-600 rounded"}," \u0627\u0636\u0627\u0641\u0629 \u0633\u064A\u0627\u0631\u0629 ")])]),e("div",null,[ka,e("div",$a,[e("table",wa,[e("thead",Ca,[e("tr",null,[Ma,e("th",Da,u(m.$t("car_type")),1),e("th",Aa,u(m.$t("year")),1),e("th",Na,u(m.$t("color")),1),e("th",La,u(m.$t("car_number")),1),e("th",za,u(m.$t("note")),1),e("th",Sa,u(m.$t("date")),1),Ua,e("th",Ia,u(m.$t("execute")),1)])]),e("tbody",null,[(i(!0),c(k,null,$(N.value,l=>{var U;return i(),c("tr",{key:l.id,class:R([l.results==0?"":l.results==1?"bg-red-100 dark:bg-red-900":"bg-green-100 dark:bg-green-900","bg-white border-b dark:bg-gray-900 dark:border-gray-900 hover:bg-gray-50 dark:hover:bg-gray-600"])},[e("td",Va,u((U=l.client)==null?void 0:U.name),1),e("td",Ba,u(l.car_type),1),e("td",Ta,u(l.year),1),e("td",Fa,u(l.car_color),1),e("td",Ra,u(l.car_number),1),e("td",ja,u(l.note),1),e("td",Xa,u(l.date),1),e("td",Oa,[(i(!0),c(k,null,$(l.car_images,(I,ee)=>(i(),c("a",{key:ee,href:Z(I.name),style:{cursor:"pointer"},target:"_blank"},[e("img",{src:Q(I.name),alt:"",class:"px-1",style:{"max-width":"100px","max-height":"50px",display:"inline"}},null,8,qa)],8,Ya))),128))]),e("td",Ha,[e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-slate-500 rounded",onClick:I=>f(l)},[x(ce)],8,Ea),e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-orange-500 rounded",onClick:I=>s(l)},[x(ne)],8,Ga)])],2)}),128))])])])]),e("div",Ka,[x(h(ge),{car:N.value,onInfinite:K,identifier:h(T)},null,8,["car","identifier"])])])])])])])):b("",!0),Wa]),_:1})],64))}};export{oo as default};
